{"version":3,"file":"jelly.js","sources":["../src/modules/util.js","../src/modules/interval.js","../src/modules/error.js","../src/modules/transform.js","../src/layouts/core/aggregate.js","../src/modules/field.js","../src/modules/measureField.js","../src/layouts/core/aggregateMixed.js","../src/layouts/core/autoResize.js","../src/layouts/core/color.js","../src/layouts/core/colorDomain.js","../src/layouts/core/condition.js","../src/layouts/core/mute.js","../src/layouts/core/demute.js","../src/layouts/core/demuteLegend.js","../src/layouts/core/_condtionForMute.js","../src/layouts/core/demuteNodes.js","../src/layouts/core/demuteRegions.js","../src/layouts/core/_dimensionType.js","../src/layouts/core/dimension.js","../src/layouts/core/dimensions.js","../src/layouts/core/domain.js","../src/layouts/core/filterNodes.js","../src/layouts/core/filterRegions.js","../src/layouts/core/hideTooltip.js","../src/layouts/core/innerSize.js","../src/layouts/core/legend.js","../src/layouts/core/limitKeys.js","../src/layouts/core/limitRows.js","../src/layouts/core/margin.js","../src/layouts/core/measure.js","../src/layouts/core/measureName.js","../src/layouts/core/measures.js","../src/layouts/core/mixedDimension.js","../src/layouts/core/muteLegend.js","../src/layouts/core/muteNodes.js","../src/layouts/core/muteRegions.js","../src/layouts/core/nodeName.js","../src/layouts/core/nodes.js","../src/layouts/core/offset.js","../src/layouts/core/parent.js","../src/layouts/core/process.js","../src/layouts/core/rebindOnMethod.js","../src/layouts/core/regions.js","../src/layouts/core/remove.js","../src/layouts/core/render.js","../src/layouts/core/renderCanvas.js","../src/layouts/core/renderFrame.js","../src/modules/legend.js","../src/layouts/core/renderLegend.js","../src/layouts/core/renderRegion.js","../src/modules/spectrum.js","../src/layouts/core/renderSpectrum.js","../src/modules/tooltip.js","../src/layouts/core/renderTooltip.js","../src/layouts/core/reset.js","../src/layouts/core/resetTooltip.js","../src/layouts/core/size.js","../src/layouts/core/scale.js","../src/layouts/core/setAttrs.js","../src/layouts/core/setCustomDomain.js","../src/layouts/core/showTooltip.js","../src/layouts/core/styleFont.js","../src/layouts/core/tooltip.js","../src/layouts/core/updateColorScale.js","../src/layouts/core/index.js","../src/modules/axis.js","../src/layouts/rectLinear/axis.js","../src/layouts/rectLinear/axisDefault.js","../src/layouts/rectLinear/axisX.js","../src/layouts/rectLinear/axisY.js","../src/layouts/rectLinear/axisTitle.js","../src/layouts/rectLinear/renderAxis.js","../src/layouts/rectLinear/thickness.js","../src/layouts/rectLinear/index.js","../src/layouts/facet/axisFacet.js","../src/layouts/facet/facet.js","../src/layouts/facet/index.js","../src/layouts/paddingMixin/index.js","../src/layouts/sortMixin/sortByValue.js","../src/layouts/sortMixin/index.js","../src/layouts/stackMixin/index.js","../src/layouts/streamMixin/distDomain.js","../src/layouts/streamMixin/limitViewInterval.js","../src/layouts/streamMixin/stream.js","../src/layouts/streamMixin/streamPanning.js","../src/layouts/streamMixin/tempPosForOrdinalScale.js","../src/layouts/streamMixin/viewInerval.js","../src/layouts/streamMixin/index.js","../src/layouts/bar/_annotation.js","../src/layouts/bar/_axis.js","../src/layouts/bar/_domain.js","../src/layouts/bar/_facet.js","../src/layouts/bar/_legend.js","../src/layouts/bar/_mark.js","../src/modules/dimensionField.js","../src/layouts/bar/_munge.js","../src/layouts/bar/_panning.js","../src/layouts/bar/_range.js","../src/layouts/bar/_region.js","../src/layouts/bar/_tooltip.js","../src/layouts/bar/index.js","../src/layouts/brushMixin/brushGen.js","../src/layouts/brushMixin/brushMove.js","../src/layouts/brushMixin/index.js","../src/layouts/fitLineMixin/index.js","../src/layouts/seriesMixin/seriesName.js","../src/layouts/seriesMixin/index.js","../src/layouts/zoomMixin/pointNum.js","../src/layouts/zoomMixin/zoom.js","../src/layouts/zoomMixin/zoomExtent.js","../src/layouts/zoomMixin/zoomed.js","../src/layouts/zoomMixin/zoomGen.js","../src/layouts/zoomMixin/zoomTransform.js","../src/layouts/zoomMixin/index.js","../src/layouts/shapeMixin/index.js","../src/layouts/line/_brush.js","../src/layouts/line/_legend.js","../src/layouts/line/_brushZoom.js","../src/layouts/line/_mark.js","../src/layouts/line/_munge.js","../src/layouts/line/_panning.js","../src/layouts/line/_domain.js","../src/layouts/line/_range.js","../src/layouts/line/_axis.js","../src/layouts/line/_meanLine.js","../src/layouts/line/_region.js","../src/layouts/line/_facet.js","../src/layouts/line/_fitLine.js","../src/modules/multi-tooltip.js","../src/layouts/line/_tooltip.js","../src/layouts/line/_zoom.js","../src/layouts/line/index.js","../src/layouts/scatter/_axis.js","../src/layouts/scatter/_domain.js","../src/layouts/scatter/_facet.js","../src/layouts/scatter/_fitLine.js","../src/layouts/scatter/_legend.js","../src/layouts/scatter/_range.js","../src/layouts/scatter/_mark.js","../src/layouts/scatter/_munge.js","../src/layouts/scatter/_panning.js","../src/layouts/scatter/_region.js","../src/layouts/scatter/_tooltip.js","../src/layouts/scatter/_brushZoom.js","../src/layouts/scatter/_zoom.js","../src/layouts/scatter/index.js","../src/layouts/xy-heatmap/_munge.js","../src/layouts/xy-heatmap/_domain.js","../src/layouts/xy-heatmap/_range.js","../src/layouts/xy-heatmap/_mark.js","../src/layouts/xy-heatmap/_axis.js","../src/layouts/xy-heatmap/_spectrum.js","../src/layouts/xy-heatmap/_region.js","../src/layouts/xy-heatmap/_tooltip.js","../src/layouts/xy-heatmap/index.js","../src/layouts/treemap/_munge.js","../src/layouts/treemap/_domain.js","../src/layouts/treemap/_range.js","../src/layouts/treemap/_mark.js","../src/layouts/treemap/_spectrum.js","../src/layouts/treemap/_tooltip.js","../src/layouts/treemap/index.js","../src/layouts/par-coords/_munge.js","../src/layouts/par-coords/_domain.js","../src/layouts/par-coords/_range.js","../src/layouts/par-coords/_mark.js","../src/layouts/par-coords/_axis.js","../src/layouts/par-coords/_legend.js","../src/layouts/par-coords/_region.js","../src/layouts/par-coords/_facet.js","../src/layouts/par-coords/_brush.js","../src/layouts/par-coords/index.js","../src/layouts/pie/_munge.js","../src/layouts/pie/_domain.js","../src/layouts/pie/_mark.js","../src/layouts/pie/_legend.js","../src/layouts/pie/_tooltip.js","../src/layouts/pie/index.js","../src/layouts/marker-map/_munge.js","../src/layouts/marker-map/_map.js","../src/layouts/marker-map/_domain.js","../src/layouts/marker-map/_mark.js","../src/layouts/marker-map/index.js","../src/layouts/combo/_axis.js","../src/layouts/combo/_munge.js","../src/layouts/combo/_domain.js","../src/layouts/combo/_range.js","../src/layouts/combo/_region.js","../src/layouts/combo/_legend.js","../src/layouts/combo/_facet.js","../src/layouts/combo/_tooltip.js","../src/layouts/combo/index.js","../src/layouts/index.js"],"sourcesContent":["import {format, select} from 'd3';\n\nconst classPrefix = \"jellychart\";\nconst magicTableColorScheme = [ '#50C3F7 ','#7986CB ','#BA68C8 ','#F06292 ','#FF8A65 ','#FFD54F ','#AED581 ','#4CB6AC ','#2C82A9 ','#48528A ','#803E8C ','#A6365B ','#CF6644 ','#C1A039 ','#749350 ','#32827A '];\nlet labelFormat = (function() {\n  let integerFormat = format(',');\n  let plusIntegerFormat = format('+,');\n  let floatFormat = format(',.2f');\n  let plusFloatFormat = format('+,.2f');\n  return function(value, plus = false) {\n   if(isNaN(value)) return value;\n   else if(typeof value === 'string') value = +value;\n   return (Number.isInteger(value) ? (plus ? plusIntegerFormat: integerFormat) : (plus? plusFloatFormat : floatFormat))(value);\n  }\n})();\n\nfunction className(name, selectorMode = false, prefix = classPrefix) {\n  let names = name.split(' ').map(d => prefix + '-' + d);\n  if (selectorMode) return '.' + names.join('.');\n  else return names.join(' ');\n}\n\nfunction rebindOnMethod(instance, listeners) {\n  if (instance.on && typeof instance.on === 'function') { \n    let oldOn = instance.on;\n    instance.on = function() { \n      let value;\n      try {\n        value = oldOn.apply(instance, arguments);\n      } catch (e) {\n        value = listeners.on.apply(listeners, arguments);\n      }\n      return value;\n    }\n  } else {\n    instance.on = function () {\n      let value = listeners.on.apply(listeners, arguments);\n      return value === listeners ? instance : value;\n    };\n  }\n  return instance;\n}\n\nfunction safari () {\n  try {\n    return  /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || safari.pushNotification);\n  } catch(e) {\n    return false;\n  }\n}\n\nfunction attrFunc(attr) {\n  return function(value) {\n    if (!arguments.length) return this.__attrs__[attr];\n    this.__attrs__[attr] = value;\n    return this;\n  };\n}\n\nfunction setAttrs(self, attrs) {\n  if (!self.__attrs__) self.__attrs__ = {};\n  attrs = JSON.parse(JSON.stringify(attrs));\n  for (let attr in attrs) {\n    if (attrs.hasOwnProperty(attr)) {\n      self.__attrs__[attr] = attrs[attr];\n    }\n  }\n}\n\nfunction setMethodsFromAttrs (classFunc, attrs) {\n  for (let attr in attrs) {\n    if(attrs.hasOwnProperty(attr) && !classFunc.prototype[attr]) {\n      classFunc.prototype[attr] = attrFunc(attr);\n    }\n  }\n}\n\nfunction setMethodFromDefaultObj (attr, defaultSetting = {}) {\n  return function(value) {\n    if (!arguments.length) return this.__attrs__[attr];\n    else if (typeof value === 'boolean') {\n      if (value) value = defaultSetting;\n    } else if (typeof value === 'object') {\n      for (let k in defaultSetting) {\n        if (defaultSetting.hasOwnProperty(k)) {\n          if (!(k in value)) value[k] = defaultSetting[k];\n        }\n      }\n    }\n    this.__attrs__[attr] = value;\n    return this;\n  }\n}\n\nfunction uniqueId (_id) {\n  return select('body').selectAll('#' + _id).empty();\n}\n\nfunction getUniqueId(prefix, num = 0) {\n  let _id = prefix + num;\n  while(!uniqueId(_id)) {\n    num ++;\n    _id = prefix + num;\n  }\n  return _id;\n}\n\nfunction zeroPoint (domain) {\n  return (domain[0] * domain[domain.length-1]) < 0 //assume that domain is sorted\n}\n\nfunction mix (parent) {\n  return new MixinBuilder(parent);\n}\n\nclass MixinBuilder {  \n  constructor(parent) {\n    this.parent = parent;\n  }\n\n  with(...mixins) { \n    return mixins.reduce((cur, mixin) => mixin(cur), this.parent);\n  }\n}\n\nfunction genFunc(ClassFunc) {\n  let func = function() {\n    return new ClassFunc();\n  }\n  func.__class__ = ClassFunc;\n  return func;\n}\n\nexport {\n  attrFunc,\n  className, \n  classPrefix, \n  genFunc,\n  getUniqueId, \n  labelFormat, \n  magicTableColorScheme, \n  mix,\n  rebindOnMethod,\n  safari, \n  setAttrs,\n  setMethodsFromAttrs, \n  setMethodFromDefaultObj, \n  uniqueId, \n  zeroPoint\n};","import {\n  timeMillisecond,\n  timeSecond,\n  timeMinute,\n  timeHour,\n  timeDay,\n  timeWeek,\n  timeSunday,\n  timeMonday,\n  timeTuesday,\n  timeWednesday,\n  timeThursday,\n  timeFriday,\n  timeSaturday,\n  timeMonth,\n  timeYear,\n  utcMillisecond,\n  utcSecond,\n  utcMinute,\n  utcHour,\n  utcDay,\n  utcWeek,\n  utcSunday,\n  utcMonday,\n  utcTuesday,\n  utcWednesday,\n  utcThursday,\n  utcFriday,\n  utcSaturday,\n  utcMonth,\n  utcYear\n} from 'd3';\n\nexport default  {\n  millisecond: timeMillisecond,\n  second: timeSecond,\n  minute: timeMinute,\n  hour: timeHour,\n  day: timeDay,\n  week: timeWeek,\n  sunday: timeSunday,\n  monday: timeMonday,\n  tuesday: timeTuesday,\n  wednesday: timeWednesday,\n  thursday: timeThursday,\n  friday: timeFriday,\n  saturday: timeSaturday,\n  month: timeMonth,\n  year: timeYear,\n  utcMillisecond,\n  utcSecond,\n  utcMinute,\n  utcHour,\n  utcDay,\n  utcWeek,\n  utcSunday,\n  utcMonday,\n  utcTuesday,\n  utcWednesday,\n  utcThursday,\n  utcFriday,\n  utcSaturday,\n  utcMonth,\n  utcYear\n};","function NotAvailableSelectorError (selector) {\n  this.message = selector + 'is not availabele to select';\n  this.name = 'NotAvailableSelectorError';\n}\n\nfunction ConditionException (message = 'Unacceptable condtion') {\n  this.message = message \n  this.name = 'ConditionException';\n}\n\nfunction ZeroDenominatorException (message = 'Zero in the Denominator of a Fraction') {\n  this.message = message ;\n  this.name = 'ZeroDenominator';\n}\n\nexport {NotAvailableSelectorError, ConditionException, ZeroDenominatorException};","import {sum, mean, variance, min, max, median, extent, scaleTime, scaleLinear, scalePow, scaleLog} from 'd3';\nimport {ZeroDenominatorException} from './error';\n\nconst summarize = {sum, mean, variance, min, max, median, extent};\nsummarize.values = function (leaves) {\n  return leaves;\n};\nsummarize.count = function (leaves) {\n  return leaves.length;\n};\n\nfunction dateComparator (order = 'ascending', field) {\n  return function(a,b) {\n    if (field) {\n      a = a[field]; b = b[field];\n    }\n    if (order === 'natural') return 0;\n    else if (order === 'ascending') return a.getTime() - b.getTime();\n    else return b.getTime() - a.getTime();\n  }\n}\n\nfunction comparator (order = 'ascending', orderList, textToNum = true, accessor = (d => d)) { \n  let reg = /(\\d+((-|\\.)*\\d*))/;\n  function __compareNumbers (a, b) {\n    if (order === 'natural') return 0;\n    else if (order === 'ascending') return a - b;\n    else return b - a;\n  }\n  function __compareStrings (a, b, onlyText = false) {\n    if (order === 'natural') return 0;\n    if(textToNum && !onlyText) {\n      let numA = a.match(reg), numB = b.match(reg);\n      if (numA && numB) {\n        return __compareNumbers (+numA[0], +numB[0]) || __compareStrings(a,b,true);\n      } \n    }\n    if (order === 'ascending') return a.localeCompare(b);\n    return b.localeCompare(a);\n  }\n  function __compareByList (a, b) {\n    let findFunc = t => {\n      return d => {\n        if (t instanceof Date && d instanceof Date) return t-d === 0\n        else return d === t;\n      }\n    }\n    let ai = orderList.findIndex(findFunc(a)); \n    let bi = orderList.findIndex(findFunc(b));\n    if (order === 'descending') return bi-ai;\n    else return ai - bi;\n  }\n  return function(a,b) {\n    let compareFunc;\n    if (!orderList || orderList.length === 0) {\n      compareFunc = (typeof a === 'string' && typeof b === 'string' ? __compareStrings : __compareNumbers);\n    } else {\n      compareFunc = __compareByList;\n    }\n    return compareFunc(accessor(a),accessor(b));\n  }\n}\n\nfunction leastSquare(target, xField='x', yField='y') {\n  const length = target.length;\n  const lengthRev = 1.0 / length;\n  const xBar = sum(target, d => d[xField]) * lengthRev;\n  const yBar = sum(target, d => d[yField]) * lengthRev;\n  const ssXX = sum(target.map(d => Math.pow(d[xField] - xBar, 2)));\n  const ssYY = sum(target.map(d => Math.pow(d[yField] - yBar, 2)));\n  const ssXY = sum(target.map(d => (d[xField] - xBar) * (d[yField]- yBar)))\n  const slope = ssXY /ssXX;\n  const intercept = yBar - (xBar * slope);\n  const rSquare = Math.pow(ssXY, 2) / (ssXX * ssYY);\n  return {slope, intercept, rSquare};\n}\n\n\nfunction stack (target, measures, normalized = false) {\n  if(!Array.isArray(measures)) measures = [measures];\n  target.forEach((d, i, arr) => {\n    measures.forEach(m => {\n      let prefix = m.valueName();\n      if (i === 0) d.data.value[prefix + '-start'] = 0;\n      else d.data.value[prefix + '-start'] = arr[i-1].data.value[prefix + '-end'];\n      d.data.value[prefix + '-end'] = d.data.value[prefix + '-start'] + d.data.value[prefix];\n    })\n  });\n  if (normalized) {\n    let max = {};\n    let lastVal = target[target.length-1].data.value; // need to be sorted.\n    measures.forEach(m => {\n      let prefix = m.valueName();\n      max[prefix] = lastVal[prefix + '-end'];\n    })\n    target.forEach((d) => {\n      measures.forEach(m => {\n        let prefix = m.valueName();\n        let thisMax = max[prefix];\n        if(thisMax !== 0) {\n          d.data.value[prefix + '-start'] = d.data.value[prefix + '-start'] / thisMax;\n          d.data.value[prefix + '-end'] = d.data.value[prefix + '-end'] / thisMax;\n        } else {\n          throw new ZeroDenominatorException();\n        }\n      })\n    });\n  }}  \n\n\nfunction continousScale(domain, type = 'linear', field) {\n  let isTime = type === 'time' || false;\n  if (!isTime) {\n    isTime = true;\n    for (let i = 0; i < domain.length; i++) {\n      let d = domain[i];\n      if (!(d instanceof Date)) {\n        isTime = false;\n        break;\n      }\n    }\n  }\n  let scale;\n  if (isTime) {\n    scale = scaleTime();\n    type = 'time'\n  } else {\n    if (type === 'pow') scale = scalePow();\n    else if (type === 'log') scale = scaleLog();\n    else {\n      scale = scaleLinear();\n      type = 'linear';\n    }\n  }\n  scale._scaleType = type;\n  scale._field = field;\n  return scale;\n}\n\nexport {\n  comparator, \n  continousScale,\n  dateComparator,\n  leastSquare,\n  summarize, \n  stack\n};","import {merge, nest, hierarchy} from 'd3';\nimport interval from '../../modules/interval';\nimport {dateComparator, comparator, summarize} from '../../modules/transform';\n\nfunction dimension(dim, nested) {\n  if (dim.interval) { // if has interval, transform key using d3Interval\n    let intr = interval[dim.interval];\n    nested.key(d => intr(d[dim.field])); \n  } else if (dim.format) { \n    let f = dim.format;\n    nested.key(d => f(d[dim.field]));\n  } else {\n    nested.key(d => d[dim.field]) \n  }\n  if( (dim.order === 'ascending'  || dim.order === 'descending')) {\n    nested.sortKeys(comparator(dim.order, dim.orderList));\n  }\n  return nested;\n}\n\nfunction dateKey (result, reverse, preFormat) { \n  let dimensions = this.dimensions();\n  let currentLevel = result;\n  for (let i = 0 ; i < dimensions.length ; i++) {\n    let dim = reverse ? dimensions[dimensions.length - 1 - i] : dimensions[i] ;\n    if (dim.interval) {\n      currentLevel.forEach(d => {\n        d.key = new Date(d.key)\n      });\n      currentLevel.sort(dateComparator(dim.order, 'key'));\n      if (preFormat && dim.format) { //preformatting : treemap\n        currentLevel.forEach(d => {\n          d.key = dim.format(d.key);\n        });\n      }\n    }\n    if (i < dimensions.length -1) currentLevel = merge(result.map(d => d.values));\n  }\n  return result;\n}\n\n/**\n * nest and hierarchy dataset\n * @private\n * @memberOf Core#\n * @param {boolean} reverse=false aggregates in reverse order of dimensions\n * @param {boolean} rollup=true summaraizes values of leaves\n * @param {boolean} preFormat=false formats keys.\n * @param {boolean} useHierarchy=true use d3.hierarchy before returning the result\n * @param {boolean} sum=true sums values of children\n * @return {hierarchy}\n */\nfunction aggregate (reverse = false, rollup = true, preFormat = false, useHierarchy = true, sum = true, dimensions, measures) {\n  let data = this.data();\n  dimensions = dimensions || this.dimensions();\n  measures = measures || this.measures();\n  let nested = nest();\n  for (let i = 0 ; i < dimensions.length ; i++) {\n    let dim = reverse ? dimensions[dimensions.length - 1 - i] : dimensions[i] ;\n    dimension(dim, nested);\n  }\n  if(!rollup) {\n    let result = dateKey.call(this, nested.entries(data), reverse, preFormat);\n    return useHierarchy ? hierarchy({values:result}, function(d){return d.values;}).children : result;\n  }\n  nested.rollup(values => {\n    let result = {};\n    measures.forEach(m => {\n      result[`${m.field}-${m.op}`] = summarize[m.op](values, d => d[m.field]); //name => field + op\n    });\n    return result;\n  });\n  let result = nested.entries(data);\n  dateKey.call(this, result, reverse, preFormat);\n  \n  if (useHierarchy) {\n    let root = hierarchy({values:result}, function(d){return d.values;});\n    if (sum && measures.length === 1) {\n      let m = measures[0];\n      root.sum(d => d.value ? d.value[`${m.field}-${m.op}`] : 0);\n    }\n    return root.children;\n  } else {\n    return result;\n  }\n}\n\nexport default aggregate;","import {setAttrs, setMethodsFromAttrs} from './util'\n\nconst attrs = {\n  customDomain: null,\n  level: 0, //level in hierarchy\n  munged: null, //nested data\n  target: null, //x|y|region\n  format: null, //string|number|date|mixed\n  formatSub: null, //string|number|date|mixed\n  field: null, //fieldname\n}\n\nclass Field {\n  constructor(field) {\n    setAttrs(this, attrs);\n    this.__execs__ = {};\n    this.setInit(field, ['field', 'format', 'formatSub', 'customDomain']);\n  }\n  setInit(source, attrNames = []) {\n    if (source) {\n      attrNames.forEach(n => {\n        if (source[n]) this[n](source[n]);\n      })\n    }\n    return this;\n  }\n  axis(at) {\n    if (!arguments) return this.__execs__.axis;\n    if (at && typeof at === 'object') {\n      if (at !== this.__execs__.axis) this.__execs__.axis = at;\n      at.field = this.mixed ? this.concatFields() : this.field();\n      at.tickFormat = this.format();\n      at.tickFormatSub = this.formatSub();\n    }\n    return this;\n  }\n  toObject() {\n    return {field: this.field(), format: this.format(), formatSub: this.formatSub(), customDomain: this.customDomain()}\n  }\n}\nsetMethodsFromAttrs(Field, attrs);\n\nexport default Field;","import {extent} from 'd3';\nimport Field from './field';\nimport {setAttrs, setMethodsFromAttrs} from './util';\n\nconst countMeasureTitle = ' ';\nconst countMeasure = {field: '__--jelly_count_measure--__', op: 'count'}; \nconst mixedMeasure = {field: '__--jelly_mixed_measure--__', op: 'mean'}; \n\nconst attrs = {\n  aggregated: false, //already aggregated\n  op: 'mean',\n  mixed: false,\n  measures: [] //when mixed, get measures\n}\n\nclass MeasureField extends Field {\n  constructor(measure) {\n    super(measure);\n    setAttrs(this, attrs);\n    this.setInit(measure, ['op']);\n  }\n  domain(padding = 0, stacked = false, allowMono = false) {\n    const level = this.level();\n    const munged = this.munged();\n\n    let curLevel = 0;\n    let domain = [];\n    let field = this.valueName();\n    function _value(target, curLevel) {\n      target.forEach(function(d) {\n        if(curLevel < level) {\n          _value(d.children, curLevel+1);\n        } else {\n          if (stacked) {\n            domain.push(d.data.value[field + '-start'] );\n            domain.push(d.data.value[field + '-end'] );\n          } else {\n            domain.push(d.data.value[field]);\n          }\n        }\n      });\n    }\n    _value(munged, curLevel);\n    domain = extent(domain);\n    if (domain[0] === domain[1] && !allowMono) { //when min and mix is the same\n      const offset = domain[0] * 0.2;\n      domain[0] -= offset;\n      domain[1] += offset;\n    }\n\n    if(padding <= 0) return domain;\n    let dist = Math.abs(domain[0] - domain[1]);\n    dist *= padding * 0.5;\n    return [domain[0] - dist, domain[1] + dist];\n  }\n\n  concatFields() {\n    if (this.mixed()) {\n      if (this.measures().length > 0) return this.measures().map(d => d.field).join('-');\n      else return '';\n    }\n    else if (this.field() === mixedMeasure.field) return '';\n    else return this.field();\n  }\n\n  valueName() {\n    let fieldName = this.field();\n    return fieldName + (this.mixed() || (fieldName === mixedMeasure.field && this.aggregated())? '' : '-' + this.op()); \n  }\n\n  toObject() {\n    let def = super.toObject();\n    def.op = this.op();\n    return def;\n  }\n}\n\nfunction measureField(measure) {\n  return new MeasureField(measure);\n}\n\nsetMethodsFromAttrs(MeasureField, attrs);\n\nexport {countMeasure, countMeasureTitle, mixedMeasure};\nexport default measureField;","import {hierarchy} from 'd3';\nimport {mixedMeasure} from '../../modules/measureField';\nimport {summarize} from '../../modules/transform';\n\n/**\n * aggregate data which have N-measures (used in Bar and Line only)\n * @private\n * @memberOf Core#\n * @param {boolean} reverse=false\n * @param {boolean} useHierarchy=true\n * @param {boolean} sum=true\n * @return {hierarchy}\n */\nfunction aggregateMixed (reverse = false, useHierarchy = true, sum = true) {\n  let data = this.data();\n  let dimensions = this.dimensions();\n  let measures = this.measures();\n  let results;\n  if(dimensions.length === 0) {\n    results = measures.map(m => {\n      let value = summarize[m.op](data, d => d[m.field]);\n      let result = {};\n      result.key = m.field; //result[mixedDimension.field] = m.field;\n      result.value = {};\n      result.value[mixedMeasure.field] = value;\n      return result;\n    });   \n  } else { \n    results = this.aggregate(data, true, false, false);\n    if (reverse) {\n      results = measures.map(function(m) {\n        let result = {};\n        result.key = m.field;\n        result.values = results.map(function (d) { \n          let result = {};\n          result.key = d.key;\n          result.value = {};\n          result.value[mixedMeasure.field] = d.value[m.field + '-' + m.op];\n          return result;\n        });\n        return result;\n      });\n    } else {\n      results.forEach(function(d) {\n        d.values = measures.map(function(m) {\n          let result = {};\n          result.key = m.field;\n          result.value = {}\n          result.value[mixedMeasure.field] = d.value[m.field + '-' + m.op];\n          return result;\n        });\n        delete d.value;\n      })\n    }\n  }\n\n  if (useHierarchy) {\n    let root = hierarchy({values:results}, function(d){return d.values;});\n    if (sum) {\n      root.sum(d => d.value ? d.value[mixedMeasure.field] : 0);\n    }\n    return root.children;\n  } else {\n    return results;\n  }\n}\n\nexport default aggregateMixed;","const allowThreshold = 20;\n/**\n * @memberOf Core#\n * If autoResize is true, it will ignore current width setting and change the chart's width according to the containers's width. If autoResize is not specified, returns the current autoResize setting. \n * @return {autoResize|Core}\n * @param {boolean} [autoResize=false] If is true, resizes the chart's width according to the containers's width\n * @return {autoResize|Core}\n */\nfunction autoResize(autoResize) {\n  if (!arguments.length) return this.__attrs__.autoResize;\n  if (autoResize) {\n    if (!this.__execs__.autoResize) {\n      const that = this;\n      let allowResize = true; \n      let lastWidth;\n      this.__execs__.autoResize = function() {\n        if (allowResize && that.__execs__.canvas) {\n          const rect = that.__execs__.container.node().getBoundingClientRect();\n          if ((!lastWidth || lastWidth !== rect.width))  {\n            const transition = that.transition();\n            that.width(rect.width)\n              .transition({duration: 0, delay:0})\n              .render(true, that.autoResizeSkip())\n              .transition(transition);\n            lastWidth = rect.width;\n          }\n          allowResize = false;\n          setTimeout(() => {\n            allowResize = true;\n          }, allowThreshold);\n        }\n      }\n    }\n    window.addEventListener('resize', this.__execs__.autoResize);\n  } else {\n    if (this.__execs__autoResize) {\n      window.removeEventListener('resize', this.__execs__.autoResize);\n      this.__execs__.autoResize = null;\n    }\n  }\n  this.__attrs__.autoResize = autoResize;\n  return this;\n}\n\nexport default autoResize;","/**\n * If color is specified, sets color schemes in array and returns the instance itself. The color schemes is used for color marks of the chart and follows {@link https://developer.mozilla.org/en-US/docs/Web/CSS/color_value CSS color type}. If color is not specified, returns the instance's current color schemes.\n * @memberOf Core#\n * @function\n * @example\n * core.color('red');\n * core.color(['#fff', 'steelblue', 'rgb(128, 128, 128)']);\n * core.color();\n * @param {(string|string[])} color=defaultSchemes color schemes\n * @return {color|Core}\n */\nfunction color (color) {\n  if (!arguments.length) return this.__attrs__.color;\n  if (Array.isArray(color)) {\n    this.__attrs__.color = color;\n  } else if (typeof color === 'string') {\n    this.__attrs__.color = [color];\n  }\n  return this;\n}\n\nexport default color;","/**\n * If colorDomain is specified, match color domain and color schemes manually. If colorDomain is not specified, returns the instance's current colorDomain.\n * ColorDomain is an array of objects includes a key and a color(optional) property. If a color peroperty is not specified, uses a color in internal {@link Core#color color schemes} in order. Also, if an element of array is string type, it translates into an object with a key property.  \n * \n * @memberOf Core#\n * @function\n * @example\n * bar.data([\n *    {name: 'A', value: 10},\n *    {name: 'B', value: 20},\n *    {name: 'C', value: 30},\n *    {name: 'D', value: 40}\n *  ]) //sets data\n *  .dimensions(['name'])\n *  .measures(['value'])\n *  .color(['red', 'green', 'blue', 'yellow'])\n *  .colorDomain(['B', {key: 'A', color: 'orange'}, {key: 'D'}]) \n *  // sets bar A: orange / bar B: red / bar C: blue / bar D: green\n * @param {(string[]|object[])} [colorDomain]\n * @param {string|number} colorDomain[].key\n * @param {string} [colorDomain[].color]\n */\nfunction colorDomain(colorDomain) {\n  if (!arguments.length) return this.__attrs__.colorDomain;\n  colorDomain = colorDomain.map(d => {\n    if (typeof d === 'string' || typeof d === 'number') return {key: d};\n    return d;\n  });\n  this.__attrs__.colorDomain = colorDomain;\n  return this;\n}\n\nexport default colorDomain;","/**\n * determines a condition of the chart\n * @private\n * @param {*} conditionFunc \n */\nfunction condition (conditionFunc) {\n  if (!arguments.length) return this.__execs__.condition;\n  this.__execs__.condition = conditionFunc.call(this, this.__attrs__.dimensions, this.__attrs__.measures);\n  return this;\n}\n\nexport default condition;","const duration = 140;\n/**\n * transparentize the selection's opacity by {@link Core#muteIntensity}\n * @memberOf Core#\n * @param {d3Selection} nodeOrRegion the selection of nodes and regions in the chart\n * @param {number} [intensity]\n * @return {Core}\n */\nfunction mute(nodeOrRegion, intensity) {\n  intensity = intensity || this.muteIntensity();\n  nodeOrRegion.transition().duration(duration).attr('opacity', intensity);\n  return this;\n}\n\nexport default mute;\nexport {duration};","import {duration} from './mute';\n\n/**\n * recovers the selection's opacity from {@link Core#mute}\n * @memberOf Core#\n * @param {d3Selection} nodeOrRegion the selection of nodes and regions in the chart\n * @return {Core}\n */\nfunction demute(nodeOrRegion) {\n  nodeOrRegion.transition().duration(duration).attr('opacity', 1);\n  return this;\n}\n\nexport default demute;","/**\n * Fiters labels with a key different with exceptionFilter in the chart's legend, demute the selection.\n * @memberOf Core#\n * @example\n * core.demuteLegend('Sales'); // recover opacity of muted labels, whose key is not 'Sales', in the legend;\n * @param {string|function} [exceptionFilter] If the fiter is a string, select nodes which has different key with the filter. If the a function, it is evaluated for each selected element, in order, being passed the current datum (d), the current index (i), and the current group (nodes), with this as the current DOM element (nodes[i]).\n * @return {Core}\n */\nfunction demuteLegend(excemptionFilter) {\n  if(this.__execs__.legend) this.__execs__.legend.demute(excemptionFilter);\n  return this;\n}\n\nexport default demuteLegend","export default function (filter) {\n  let cond;\n  if (typeof filter === 'function') {\n    cond = filter;\n  } else if (typeof filter === 'string') { \n    cond = d => d.data.key !== filter;\n  } else if (typeof filter === 'object' && filter.data) {\n    cond = d => d.data.key !== filter.data.key;\n  } else if (typeof filter === 'object') {\n    cond = d => d.data.key instanceof Date ? d.data.key - filter !== 0 : false;\n    if (filter instanceof Date) return cond = d => d.data.key instanceof Date ? d.data.key - filter !== 0 : false;\n    else cond = d => d.data.key !== filter;\n  } \n  return cond;\n}","import conditionForMute from './_condtionForMute';\n/**\n * Fiters nodes according to excemptionFilter in the chart and {@link Core#demute demutes} the nodes. If excemptionFilter is no specified, demutes all nodes.\n * @memberOf Core#\n * @example\n * core.demuteNodes('Sales'); // nodes whose key is not 'Sales' are demuted\n * core.demuteNodes(d => d.key !== 'Sales') // nodes whose key is not 'Sales' are demuted\n * @param {string|function} [excemptionFilter] If the fiter is a string, select nodes which has different key with the filter. If the a function, it is evaluated for each selected element, in order, being passed the current datum (d), the current index (i), and the current group (nodes), with this as the current DOM element (nodes[i]).\n * @return {Core}\n */\nfunction demuteNodes (excemptionFilter) {\n  let nodes;\n  if (!arguments.length) { //모두 \n    nodes = this.filterNodes().classed('mute', false).call(this.demute);\n  } else {\n    nodes = this.filterNodes(conditionForMute(excemptionFilter));\n    if (nodes.size() > 0) {\n      nodes.classed('mute', false).call(this.demute);\n    }\n  }\n  return this;\n}\nexport default demuteNodes; ","import conditionForMute from './_condtionForMute';\n\nfunction demute(regions, isSeries = false) {\n  regions.selectAll(isSeries ? this.seriesName() : this.nodeName()).classed('mute', false).call(this.demute);\n}\n/**\n * Fiters regions according to exceptionFilter in the chart and {@link Core#demute demutes} the nodes in the selected regions. If exceptionFilter is no specified, demutes all nodes in regions.\n * @memberOf Core#\n * @example\n * core.demuteRegions('Sales'); // regions whose key is not 'Sales' are demuted\n * core.demuteRegions(d => d.key !== 'Sales') // regions whose key is not 'Sales' are demuted\n * @param {string|function} [exceptionFilter] If the fiter is a string, select nodes which has different key with the filter. If the a function, it is evaluated for each selected element, in order, being passed the current datum (d), the current index (i), and the current group (nodes), with this as the current DOM element (nodes[i]).\n * @return {Core}\n */\nexport default function (exceptionFilter) {\n  let regions;\n  if (!arguments.length) { \n    regions = this.filterRegions();\n    demute.call(this, regions);\n    if (this.seriesName) demute.call(this, regions, true);\n  } else {\n    regions = this.filterRegions(conditionForMute(exceptionFilter), true);\n    demute.call(this, regions);\n    if (this.seriesName) demute.call(this, regions, true);\n  }\n  return this;\n}","import {format, timeFormat} from 'd3';\n\nconst dimensionMax = 100;\nfunction setFormat(f) {\n  if (f && typeof f === 'string') {\n    try {\n      return timeFormat(f);\n    } catch (e) {\n      try {\n        return format(f);\n      } catch (e) {\n        throw e;\n      }\n    } \n  } else {\n    return null;\n  }\n}\nfunction _dimensionType(dimension) {\n  if (typeof dimension === 'string') {\n    return {field: dimension, order: 'natural', max: dimensionMax};\n  } else if (typeof dimension === 'object') {\n    dimension = Object.assign({}, dimension);\n    if (!dimension.max) dimension.max = dimensionMax;\n    if (!dimension.order) dimension.order = 'natural';\n    dimension.format = setFormat(dimension.format);\n    dimension.formatSub = setFormat(dimension.formatSub);\n    return dimension;\n  }\n}\n\nexport default _dimensionType;","import _dimensionType from './_dimensionType';\n\n/**\n * appends a dimension to {@link Core#dimensions dimensions} array. A dimenension(key) acts as an index that is used to look up measure(value). A synonym for dimension is independent attribute. Jelly-chart has {@link Core#data data} in an array to be grouped into a hierarchical tree structure with dimensions; multi-dimensions can make multiple levels of grouping. The combination of all dimensions would be unique for each item. Each dimension is converted into a mark(region or node) according to its chart type and level.\n * \n * @memberOf Core#\n * @function\n * @example\n * core.dimension({field:'Sales', order:'ascending'});\n * core.dimension({field: 'Sales Date', format: '%y', interval: 'year'})\n * core.dimension('Profit');\n * @param {(string|object)} dimension\n * @param {string} dimension.field refers a key property in objects from the {@link Core#data data array}. The key property will be invoked for each element in the input array and must return a string identifier to assign the element to its group. \n * @param {string} [dimension.order=natural] chooses comparator types among natural, ascending and descending, sorting nodes in selected order. \n * @param {number} [dimension.max=100] maximum number of nodes\n * @param {string} [dimension.format=undefined] a time formatter for the given string {@link https://github.com/d3/d3-time-format#locale_format specifier}\n * @param {string} [dimension.formatSub=undefined] a sub-time formatter for the given string {@link https://github.com/d3/d3-time-format#locale_format specifier}, which used sub-ticks on it's axis.\n * @param {string} [dimension.interval=undefined] If the dimension has Date type values, set an {@link https://github.com/d3/d3-time#intervals interval} which is a conventional unit of time to grouped its value.\n * @return {Core}\n */\nfunction dimension(dimension) {\n  this.__attrs__.dimensions.push(_dimensionType(dimension));\n  return this;\n}\n\nexport default dimension;","import _dimensionType from './_dimensionType';\n\n/**\n * If dimensions is specified, sets dimensions and returns the instance itself. If dimensions is an object or string, it would be turned into an array with a dimension. If dimensions is not specified, returns the instance's current dimensions. \n * A dimenension(key) acts as an index that is used to look up measure(value). A synonym for dimension is independent attribute. Jelly-chart has {@link Core#data data} in an array to be grouped into a hierarchical tree structure with dimensions; multi-dimensions can make multiple levels of grouping. The combination of all dimensions would be unique for each item. Each dimension is converted into a region or a node according to its chart type and level.\n * @memberOf Core#\n * @function\n * @example\n * bar.data([\n *    {category:'Blue', name: 'A', value: 10},\n *    {category:'Blue', name: 'B', value: 20},\n *    {category:'Blue', name: 'C', value: 30},\n *    {category:'Blue', name: 'D', value: 40},\n *    {category:'Red', name: 'A', value: 20},\n *    {category:'Red', name: 'B', value: 10},\n *    {category:'Red', name: 'C', value: 40},\n *    {category:'Red', name: 'D', value: 10},\n *  ]) //sets data\n *  .dimensions(['category', {field:'name', order:'ascending'}])\n *  //generate\bs a grouped bar chart which has 2 regions (Red, Blue) with 4 bars(A,B,C,D) each.\n * @param {(string|object|Object[])} [dimensions] sets a {@link Core#dimension dimension} array which are objects has properties for aggregation(grouping).\n * @return {(dimensions|Core)}\n */\nfunction dimensions (dimensions) {\n  if (!arguments.length) return this.__attrs__.dimensions;\n  if (!Array.isArray(dimensions)) {\n    dimensions = [dimensions];\n  }\n  this.__attrs__.dimensions = dimensions.map(function (v) { return _dimensionType(v); });\n  return this;\n}\n\nexport default dimensions;","/**\n * gets a domain of the scale with a specified name\n * @memberOf Core#\n * @function\n * @param {string} name \n */\nfunction domain(name) {\n  const scale = this.__execs__.scale;\n  if (name in scale && scale.hasOwnProperty(name)) {\n    return scale[name].domain();\n  } else {\n    return null;\n  }\n}\n\nexport default domain;","/**\n * Fiters nodes in the chart, returning a new selection that contains only the elements for which the specified filter is true. \n * @memberOf Core#\n * @example\n * core.filterNodes(function(d) {\n *    return d.key === key;\n * })\n * @param {(string|function)} filter The filter may be specified either as a selector stringfilter is  or a function. If the a function, it is evaluated for each selected element, in order, being passed the current datum (d), the current index (i), and the current group (nodes), with this as the current DOM element (nodes[i]).\n * @return {d3Selection}\n */\nfunction filterNodes(filter) {\n  let nodes = this.nodes();\n  if (!filter || typeof filter !== 'function') return nodes;\n  return nodes.filter(filter);\n}\n\n\n\nexport default filterNodes;","import {select} from 'd3';\n\n/**\n * Fiters regions in the chart, returning a new selection that contains only the elements for which the specified filter is true. \n * @memberOf Core#\n * @example\n * core.filterRegions(function(d) {\n *    return d.key === key;\n * })\n * @param {(string|function)} filter The filter may be specified either as a selector stringfilter is  or a function. If the a function, it is evaluated for each selected element, in order, being passed the current datum (d), the current index (i), and the current group (nodes), with this as the current DOM element (nodes[i]).\n * @return {d3Selection}\n */\nfunction filterRegions(callback, noFacet = false) {\n  let regions = this.regions();\n  if (!callback || typeof callback !== 'function') return regions;\n  if (noFacet) {\n    regions =  regions.filter(function() {\n      return !select(this).classed('facet'); //exclude .facet\n    })\n  }\n  return regions.filter(callback);\n}\n\nexport default filterRegions;","/**\n * hides a tooltip\n * @memberOf Core#\n * @function\n * @return {Core}\n */\nexport default function() {\n  if (this.multiTooltip && this.multiTooltip()) return this;\n  this.__execs__.tooltip.hide();\n  return this;\n}","/**\n * returns an inner size of chart excepting offsets from the container's size\n * @memberOf Core#\n * @function\n * @param {boolean} needArray If needArray is true, retruns the size in array\n * @return {object|array} returns {width, height} or [width, height] according to needArray\n */\nfunction innerSize(needArray = false) {\n  let offset = this.offset();\n  let width = this.width() - offset.left - offset.right;\n  let height = this.height() - offset.top - offset.bottom;\n  if (needArray) return [width, height];\n  else return {width, height};\n} \n\nexport default innerSize;","const horizontalThickness = 54;\nconst verticalThickness = 162;\n\n/**\n * If legend is specified, sets the legend object which includes an orient and a thickness of the legend. If legend is a boolean, it would be tured into an object with a bottom orient and a default thickness. Also, is a string, it would become a orient of an object. If legend is not specified, returns the instance's current legend.\n * @memberOf Core#\n * @function\n * @example\n * core.legend(true); //sets {orient: 'bottom', thickness: 54}\n * core.legend({orient:'right', thickness: 200}); \n * core.legend();\n * @param {boolean|string|object} [legend] sets a legend type. If is a false, removes the legend.\n * @param {string} legend.orient=bottom sets a legend orient(top|right|bottom|left)\n * @param {string} [legend.align=start] sets a legend align(start|middle|end)\n * @param {number} [legend.thickness=(54|162)] sets a legend thickness. if the orient is top or bottom, the default thickness is 54 pixels. Otherwise, it would be 162 pixels.\n * @return {legend|Core}\n */\nfunction legend (legend) { \n  if (!arguments.length) return this.__attrs__.legend;\n  if (legend === true) this.__attrs__.legend = {orient: 'bottom', align: 'start', thickness: horizontalThickness  }\n  else if (legend === false) this.__attrs__.legend = null;\n  else if (typeof legend === 'object') {\n    if(!legend.orient) legend.orient = 'bottom';\n    if(!legend.thickness) legend.thickness = (legend.orient === 'bottom' || legend.orient === 'top') ? horizontalThickness : verticalThickness;\n    if(!legend.align) legend.thickness = 'start';\n    this.__attrs__.legend = legend;\n  }\n  return this;\n}\n\nexport default legend;","/**\n * limits the number of nodes length as many as limitNumber.\n * @memberOf Core#\n * @function\n * @example\n * core.limitKeys(10);\n * @param {number} limitNumber\n * @return {Core}\n */\nfunction limitKeys(limitNumber) {\n  let _limit = function (target, num, level, maxLevel) {\n    target = target.slice(0, num);\n    if (level < maxLevel) target.forEach(d => d.children = _limit(d.children, num, level+1, maxLevel))\n    return target;\n  }\n  if(!arguments.length) {\n    let num = this.__attrs__.limitKeys;\n    if (num) {\n      let munged = this.__execs__.munged;\n      let nestedLevel = this.dimensions().length;\n      let result = _limit(this.aggregated() ? munged.children : munged, num, 1 , nestedLevel);\n      if (this.aggregated()) {\n        munged.children = result;\n        result = munged;\n      }\n      this.__execs__.munged = result;\n    }\n  } else {\n    this.__attrs__.limitRows = limitNumber;\n  }\n  return this;\n}\n\nexport default limitKeys;","/**\n * limits the number of elements length from the {@link data data}  as many as limitNumber, in order.\n * @memberOf Core#\n * @function\n * @example\n * core.limitRows(100);\n * @param {number} limitNumber\n * @return {Core}\n */\nfunction limitRows(limitNumber) {\n  if(!arguments.length) {\n    let num = this.__attrs__.limitRows;\n    if (num) {\n      let data = this.data();\n      if (this.aggregated()) {\n        data.children = data.children.slice(0, num);\n      } else {\n        data = data.slice(0, num);\n      }\n      this.data(data);\n    }\n  } else {\n    this.__attrs__.limitRows = limitNumber;\n  }\n}\n\nexport default limitRows;","function append(source, target, prop) {\n  if (source[prop] && typeof source[prop] === 'number') target[prop] = source[prop]; \n}\n/**\n * If margin is specified, sets margin of the container and returns the instance itself. The unit of margin is a pixel. If margin is not specified, returns the instance's current margin.\n * @memberOf Core#\n * @function\n * @example\n * core.margin({top:100, right: 100}); //sets the margin's top and right amount\n * core.margin();\n * @param {object} [margin]\n * @param {number} [margin.top=40] top\n * @param {number} [margin.right=40] right\n * @param {number} [margin.bottom=40] bottom\n * @param {number} [margin.left=40] left\n * @return {margin|Core}\n */\nfunction margin(margin = {}) {\n  const curMargin =this.__attrs__.margin;\n  if (!arguments.length) return this.__attrs__.margin;\n  if (typeof margin === 'object') {\n    ['top', 'right', 'left', 'bottom'].forEach(prop => append(margin, curMargin, prop));\n  }\n  return this;\n}\nexport default margin;","import {timeFormat} from 'd3';\n\n/**\n * appends a measure to {@link Core#measures measures} array. A measure(value) acts as an value that is looked up by dimensions(key). A synonym for measure is dependent attribute. Jelly-chart has {@link Core#data data} in an array to be grouped into a hierarchical tree structure with dimensions. If measures are specified, leaves of the tree will be summarized by them. \n * @memberOf Core#\n * @function\n * @example\n * core.measure({field:'Sales', 'op': 'mean'});\n * core.measure('Profit');\n * @param {(string|object)} measure\n * @param {string} [measure.field] refers a value property in objects from the {@link Core#data data array}. The value property will be invoked for leaf elements during aggregation and their values in the property will be summarized by the specified operator as an value.\n * @param {string} [measure.op=sum] an operator(sum, mean, variance, min, max, median) to summarize leaf elements.\n * @param {string} [measure.format] a time formatter for the given string {@link https://github.com/d3/d3-time-format#locale_format specifier}\n * @return {Core}\n */\nfunction measure (measure) {\n  if (typeof measure === 'string') {\n    this.__attrs__.measures.push({field: measure, op: 'sum'});\n  } else if (typeof measure === 'object') {\n    if ('format' in measure && typeof measure.format === 'string') measure.format = timeFormat(measure.format);\n    this.__attrs__.measures.push(measure);\n  }\n  return this;\n}\n\nexport default measure;","import {mixedMeasure} from '../../modules/measureField';\n\n/**\n * get a transformed field name of a measure\n * @memberOf Core#\n * @function\n * @private\n * @param {object} measure\n * @param {string} suffix \n */\nfunction measureName  (measure, suffix) {\n  measure = measure  || this.measures()[0];\n  let name = measure.field;\n  if (!this.aggregated() || measure.field !== mixedMeasure.field) name += '-' + measure.op;\n  return name + (suffix !== undefined ?  ('-' + suffix) : '');\n}\n\nexport default measureName;","import {timeFormat} from 'd3';\n\n/**\n * If measures is specified, sets measures and returns the instance itself. If measures is an object or string, it would be turned into an array with a measure. If measures is not specified, returns the instance's current measures. \n * A measure(value) acts as an value that is looked up by dimensions(key). A synonym for dimension is independent attribute. Jelly-chart has {@link Core#data data} in an array to be grouped into a hierarchical tree structure with dimensions. If measures are specified, leaves of the tree will be summarized by them. \n * @memberOf Core#\n * @function\n * @example\n * bar.data([\n *    {name: 'A', sales: 10},\n *    {name: 'B', sales: 20},\n *    {name: 'C', sales: 30},\n *    {name: 'D', sales: 40},\n *    {name: 'A', sales: 20},\n *    {name: 'B', sales: 10},\n *    {name: 'C', sales: 40},\n *    {name: 'D', sales: 10},\n *  ]) //sets data\n *  .dimensions(['name'])\n *  .measures([{field:'sales', op: 'mean'}])\n *  //generate\bs a mono bar chart with 4 bars(A,B,C,D).\n *  //each bar's length will be determined mean of 'sales' values from leaf elements.\n * @param {(string|object|Object[])} [measures] sets a {@link Core#measure measure} array which are objects has properties for aggregation(grouping).\n * @return {(measures|Core)}\n */\n\nfunction measures (measures) {\n  if (!arguments.length) return this.__attrs__.measures;\n  var _type = function (v) {\n    if (typeof v === 'string') {\n      return {field: v, op: 'sum'};\n    } else if (typeof v === 'object') {\n      if ('format' in v && typeof v.format === 'string') v.format = timeFormat(v.format);\n      return v;\n    }\n  };\n  if (Array.isArray(measures)) {\n    this.__attrs__.measures = measures.map(function (v) { return _type(v); });\n  } else {\n    this.__attrs__.measures = [_type(measures)];\n  }\n  return this;\n}\n\nexport default measures;","/**\n * generate a pseudo dimension which concatenates measures.\n * @memberOf Core#\n * @function\n * @private\n * @return {mixedDimension}\n */\nfunction mixedDimension() {\n  const mixedDimension = {order: 'natural'};\n  mixedDimension.field = this.measures().map(d => d.field).join('-');\n  return mixedDimension;\n}\n\nexport default mixedDimension;","/**\n * Fiters labels with a key different with exceptionFilter in the chart's legend, demute the selection.\n * @memberOf Core#\n * @example\n * core.demuteLegend('Sales'); // recover opacity of muted labels, whose key is not 'Sales', in the legend;\n * @param {string|function} [exceptionFilter] If the fiter is a string, select nodes which has different key with the filter. If the a function, it is evaluated for each selected element, in order, being passed the current datum (d), the current index (i), and the current group (nodes), with this as the current DOM element (nodes[i]).\n * @return {Core}\n */\nfunction muteLegend(key) {\n  if (this.__execs__.legend) this.__execs__.legend.mute(key);\n  return this;\n}\n\nexport default muteLegend;","import conditionForMute from './_condtionForMute';\n\nexport default function (exceptionFilter) {\n  let nodes;\n  if (!arguments.length) { \n    nodes = this.filterNodes().classed('mute', true).call(this.mute, this.muteIntensity());\n  } else if (exceptionFilter === null) { \n    nodes = this.filterNodes().classed('mute', false).call(this.demute);\n  } else {\n    nodes = this.filterNodes(conditionForMute(exceptionFilter));\n    if (nodes.size() > 0) {\n      nodes.classed('mute', true).call(this.mute, this.muteIntensity());\n    }\n  }\n  return this;\n}","import conditionForMute from './_condtionForMute';\n\nfunction mute(regions, ismute = true, isSeries = false) {\n  regions.selectAll(isSeries ? this.seriesName() : this.nodeName()).classed('mute', ismute).call(ismute ? this.mute : this.demute, this.muteIntensity());\n}\n\nfunction muteRegions(exceptionFilter) {\n  let regions;\n  if (!arguments.length) {  \n    regions = this.filterRegions();\n    mute.call(this, regions, true);\n    if (this.seriesName) mute.call(this, regions, true, true);\n  } else if (exceptionFilter === null) { \n    regions = this.filterRegions();\n    mute.call(this, regions, false);\n    if (this.seriesName) mute.call(this, regions, false, true);\n  } else {\n    regions = this.filterRegions(conditionForMute(exceptionFilter), true);\n    if (regions.size() > 0) {\n      mute.call(this, regions, true);\n      if (this.seriesName) mute.call(this, regions, true, true);\n    }\n  } \n  return this;\n}\n\nexport default muteRegions;","/**\n * @memberOf Core#\n * @function\n * @private\n * @param {*} nodeName \n */\nfunction nodeName(nodeName) {\n  let splited;\n  if (!arguments.length || nodeName === false) return this.__attrs__.nodeName;\n  else if (typeof nodeName === 'boolean' && nodeName) {\n    return splited ? splited :  (splited = this.__attrs__.nodeName.split('.').join(' ').trim())\n  }\n  else if (typeof nodeName === 'string') {\n    this.__attrs__.nodeName = nodeName;\n    splited = this.__attrs__.nodeName.split('.').join(' ').trim();\n  }\n  return this;\n}\n\nexport default nodeName;","/**\n * returns all nodes\n * @memberOf Core#\n * @function\n * @return {d3Selection} nodes\n */\nfunction nodes() {\n return this.regions().selectAll(this.nodeName());\n}\n\nexport default nodes;","const zeroMargin = {top:0, right:0, bottom:0, left:0};\n/**\n * returns offsets around the content area, that includes the {@link Core#margin margin}, {@link Core#legend legend} area\n * @memberOf Core#\n * @function\n * @return {object} {top, right, bottom, left} offset in pixels\n */\nfunction offset() {  \n  if (this.zeroOffset()) return zeroMargin;\n  let offset = Object.assign({}, this.zeroMargin() ? zeroMargin : this.margin());\n  let legend = this.legend();\n  if(legend) offset[legend.orient] += legend.thickness;\n  return offset;\n}\n\nexport default offset;","/**\n * @private\n * @param {Core} parent \n */\nfunction parent(parent) {\n  if(!arguments.length) return this.__attrs__.parent;\n  this.__attrs__.parent = parent;\n  return this;\n}\n\nexport default parent;","function gen(type, call, option) {\n  return {type, call, allow: option.allow, isPre: option.isPre};  \n}\n/**\n * sets and gets rendering procedures.\n * @memberOf Core#\n * @function\n * @param {string} [type] \n * @param {function} [call] \n * @param {object} [option]\n * @param {string} option.after\n * @param {function} option.allow\n * @return {process|process[]|Core}\n */\nfunction process(type, call, option={}) {\n  if (!this.__process__) this.__process__ = [];\n  if (!arguments.length) return this.__process__;\n  const process = this.__process__;\n  if (call && typeof call === 'function') {\n    const existing = process.findIndex(p => p.type === type);\n    if (existing >=0) { //renew existing\n      process[existing] = gen(type, call, option);\n    } else {\n      process.splice(process.length, 0, gen(type, call, option)); //insert new proc\n    }\n    return this;\n  } else {\n    return process.find(p => p.type === type);\n  }\n}\n\nexport default process;","import {rebindOnMethod} from '../../modules/util';\n/**\n * @private\n * @param {d3Dispatch} listeners \n */\nexport default function(listeners) {\n  return rebindOnMethod(this, listeners);\n}","/**\n * returns all regions\n * @memberOf Core#\n * @function\n * @return {d3Selection} regions\n */\nfunction regions() {\n  return this.__execs__.canvas.selectAll(this.regionName());\n}\n\nexport default regions;","/**\n * reset and remove the canvas in the chart area\n * @memberOf Core#\n * @function\n * @return {Core} \n */\nexport default function() {\n  this.reset();\n  if (this.__execs__.canvas) {\n    this.__execs__.canvas.node().parentNode.parentNode.remove();\n    this.__execs__.canvas = null;\n  }\n  return this;\n}","function bindOn(node, dispatch) {\n  node.on('click.default', function () {\n    dispatch.apply('selectClick', this, arguments);\n  }).on('mouseenter.default', function () {\n    dispatch.apply('selectEnter', this, arguments);\n  }).on('mouseleave.default', function () {\n    dispatch.apply('selectLeave', this, arguments);\n  })\n  return node;\n}\nfunction run(process) {\n  process.forEach(p => {\n    if (p.allow) {\n      if (p.allow.call(this)) p.call.call(this);\n    } else {\n      p.call.call(this);\n    }\n  })\n}\n/**\n * renders the chart. At the end of settings for a chart, it should be called. If keep is true, it does not reset existing scales.\n * @memberOf Core#\n * @function\n * @param {boolean} [keep=false] If is true, not reset existing scales.\n * @param {String[]} [skip=[]] If skip includes an process, the process will be ignored.\n * @return {Core}\n */\nfunction render(keep = false, skip = []) {\n  const process = {\n    pre: [],\n    post: []\n  };\n  this.process().forEach(p => {\n    if (skip.indexOf(p.type) < 0) {\n      if (p.isPre) process.pre.push(p);\n      else process.post.push(p);\n    }\n  })\n\n  this.reset(keep);\n  this.keep(keep);\n  if (this.needCanvas()) this.renderFrame();\n  run.call(this, process.pre);\n  if (this.needCanvas()) this.renderCanvas();\n  run.call(this, process.post);\n\n  if (!this.__execs__.canvas) return;\n\n  const dispatch = this.__execs__.selectDispatch;\n  const node = this.nodes();\n  const legend = this.__execs__.legend;\n  if (node && node.size() > 0) {\n    if (this.parent()) {\n      return;\n    }\n    node.call(bindOn, dispatch)\n      .on('mouseenter.default.legend', (d) => {\n        if (legend && legend.mute && this.muteToLegend) this.muteToLegend(d);\n      }).on('mouseleave.default.legend', (d) => {\n        if (legend && legend.demute && this.demuteToLegend) this.demuteToLegend(d);\n      })\n  }\n\n  if (this.isFacet && this.isFacet()) { //when is facet, get dispatch from regions.\n    node.call(bindOn, dispatch);\n  }\n\n  if (this.stream && this.stream() && keep) {\n    this.stream(null);\n  }\n\n  return this;\n}\n\nexport default render;","import {select} from 'd3';\nimport {NotAvailableSelectorError} from '../../modules/error';\nimport {className, getUniqueId} from '../../modules/util';\n\nconst background = 'none';\nfunction appendClipPath(selection, innerSize, margin = 0, transition = null) {\n  let pos = rect => {\n    rect.attr('x', -margin)\n      .attr('y', -margin)\n      .attr('width', innerSize.width + margin*2)\n      .attr('height', innerSize.height + margin*2);\n  }\n  let defs = selection.selectAll(function() {\n      return this.childNodes;\n    }).filter(function() {\n      return select(this).classed(className('canvas-g-defs'))\n    })\n  if (defs.empty()) {\n    defs = selection.append('defs')\n      .attr('class', className('canvas-g-defs'))\n      .datum(innerSize)  \n    defs.append('clipPath')\n      .attr('id', () => getUniqueId('canvas-g-'))\n      .attr('class', className('canvas-g-clip-path'))\n    .append('rect')\n      .attr('class', className('canvas-g-clip-path-rect'))\n      .call(pos);\n  }\n  \n  let rect = defs.select(className('canvas-g-clip-path-rect', true));\n  if (transition) rect = rect.transition().duration(transition.duration).delay(transition.delay);\n  rect.call(pos);\n}\n\nfunction appendStringContainer(selector, offset, self) {\n  const markLocal = self.__execs__.mark;\n  selector = select(selector);\n  if (selector.empty()) throw new NotAvailableSelectorError();\n  if (selector.node().tagName === 'g' || selector.node().tagName === 'G') {\n    if (selector.select(className('canvas-g', true)).empty() ) {\n      self.__execs__.canvas = selector.append('g').attr('class', className('canvas-g'));\n      self.__execs__.canvas.append('g').attr('class', className('regions'));\n    } else if(!this.__execs__.canvas) {\n      self.__execs__.canvas = selector.select(className('canvas-g', true));\n    }\n    markLocal.set(self.__execs__.canvas.node(), {x:offset.left, y:offset.right});\n    self.__execs__.canvas\n      .attr('transform', 'translate(' + [offset.left, offset.right] +')');\n  }\n}\n\n/**\n * render a canvas area on which chart components are placed\n * @memberOf Core#\n * @function\n * @private\n * @param {number} margin custom margin for shrink the clip-path on the canvas\n * @return {Core}\n */\nfunction renderCanvas (margin = 0) {\n  let selector = this.container();\n  if(selector === null) return null;\n  let offset = this.offset();\n  let innerSize= this.innerSize();\n  if(typeof selector !== 'string') { //if is DOM\n    appendStringContainer(selector, offset, this);\n    if (this.__execs__.canvas) { //if has a canvas, return \n      this.__execs__.canvas.datum(this.__execs__.munged);\n      this.__execs__.canvas.call(appendClipPath, innerSize, margin, this.transition());\n      return;\n    } \n  }\n\n  let svg;\n  if (this.__execs__.canvas) { //if has a canvas, find svg\n    svg = select(this.__execs__.canvas.node().parentNode);\n  } else { //if has no canvas, generate svg and canvas.\n    let container =  select(selector);\n    if (container.empty()) {\n      throw new NotAvailableSelectorError();\n    }\n    svg = container.select(className('frame', true)).select('svg');\n    this.__execs__.canvas = svg.append('g').attr('class', className('canvas-g'))\n      .attr('transform', 'translate(' + [offset.left, offset.top] +')');\n    this.__execs__.canvas.append('rect')\n      .attr('class', className('background'))\n      .style('fill', background);\n    this.__execs__.canvas.append('g').attr('class', className('regions'));\n  }\n  let trans = this.transition();\n  let canvas = this.__execs__.canvas;\n  canvas.style('pointer-events', 'none');\n  if (trans) { //FIXME: enable pointer events after rendering\n   canvas.transition().duration(trans.duration).delay(trans.delay)\n    .attr('transform', 'translate(' + [offset.left, offset.top] +')')\n    .on('end', function() {\n      select(this).style('pointer-events', 'all');\n    })\n  } else {\n    canvas.attr('transform', 'translate(' + [offset.left, offset.top] +')')\n      .style('pointer-events', 'all');\n  }\n  canvas.select(className('background', true))\n    .attr('width', innerSize.width).attr('height', innerSize.height);\n  canvas.datum(this.__execs__.munged)\n    .call(appendClipPath, innerSize, margin, this.transition())\n  \n  return this;\n}\n\nexport default renderCanvas;","import {select} from 'd3';\nimport {NotAvailableSelectorError} from '../../modules/error';\nimport {className} from '../../modules/util';\n\nfunction setSvg(svg, self) {\n  svg.attr('width', self.width())\n    .attr('height', self.height())\n    .attr('viewBox', '0 0 ' + self.width() + ' ' + self.height());\n  return svg;\n}\n\nfunction appendHidden(container, self) {\n  self.__execs__.hidden = container.append('g')\n    .attr('class', className('hidden-g'))\n    .style('visibility', 'hidden');\n  return container;\n}\n\n/**\n * render a svg and append a hidden area\n * @memberOf Core#\n * @function\n * @private\n * @return {Core}\n */\nfunction renderFrame() {\n  let selector = this.container();\n  let container = select(selector);\n  if (container.empty()) throw new NotAvailableSelectorError();\n  this.__execs__.container = container;\n  if (typeof selector !== 'string') {\n    if (container.node().tagName === 'g' || container.node().tagName === 'G') {\n      if (container.selectAll(className('hidden-g', true)).empty()) {\n        container.call(appendHidden, this);\n      } else if (!this.__execs__.hidden) {\n        this.__execs__.hidden = container.select(className('hidden-g', true));\n      }\n      return ;  \n    }\n  }\n  let svg;\n  if (!this.__execs__.canvas) {\n    svg = container.append('div')\n     .attr('class',  className('frame'))\n    if(this.name()) svg.attr('id', 'jelly-chart-id-' + this.name());\n    svg = svg.append('svg');\n    svg.call(appendHidden, this);\n    svg.call(setSvg, this);\n  } else {\n    svg = select(this.__execs__.canvas.node().parentNode);\n  }\n  if (this.autoResize()) {\n    this.width(this.__execs__.container.node().getBoundingClientRect().width);\n  }\n  container.select(className('frame', true))\n    .style('width', this.width() + 'px')\n    .style('height', this.height() + 'px');\n  if (this.transition()) svg = svg.transition().duration(this.transition().duration).delay(this.transition().delay)\n  svg.call(setSvg, this);\n  return this;\n}\n\nexport default renderFrame;","import {dispatch, schemeCategory10, select, symbol, symbolTriangle} from 'd3';\nimport {className, setMethodsFromAttrs, getUniqueId, rebindOnMethod} from './util';\n\nconst defaultFont = {\n  'font-family': 'sans-serif',\n  'font-size': 11,\n  'font-weight': 'normal',\n  'font-style': 'normal'\n};\nconst areaClipPath = className('legend-area-clip-path');\nconst labelClipPath = className('legend-label-clip-path');\nconst aligns = ['start', 'middle', 'bottom'];\nconst orients = ['top', 'bottom'];\nconst highlightDuration = 180;\nconst _attrs = {\n  align: aligns[0],\n  color: '#485465',\n  muteIntensity: 0.3,\n  font: defaultFont,\n  format: null,\n  height: 0,\n  orient: orients[1],\n  scale: null,\n  showTooltip: true,\n  title: null,\n  transition : null,\n  width: 0,\n  x: 0,\n  y: 0\n}\nclass Legend {\n  constructor() {\n    this.__attrs__ = JSON.parse(JSON.stringify(_attrs));\n    this.__execs__ = {legend:null};\n    this.__execs__.dispatch = dispatch('selectClick', 'selectEnter', 'selectLeave');\n    rebindOnMethod(this, this.__execs__.dispatch);\n  }\n}\n\nfunction _legend() {\n  return new Legend();\n}\n\nfunction isHorizontal() {\n  return this.orient() === 'bottom' || this.orient() === 'top';\n}\n\nfunction _style(selection) {\n  let font = this.font();\n  for (var k in font) {\n    selection.style(k, (k === 'font-size' ? font[k] + 'px' : font[k]));\n  }\n}\n\nfunction _align(selection) {\n  const area = selection.select(className('label-area', true));\n  const width = this.width();\n  const align = this.align();\n  const areaWidth = area.node().getBBox().width;\n  let alignPos = 0;\n  \n  if (align === aligns[1]) { //middle\n    alignPos = Math.round((width - areaWidth) /2); \n  } else if (align === aligns[2]) { //end\n    alignPos = width - areaWidth;\n  }\n  area.attr('transform', `translate(${alignPos},0)`);\n  return selection;\n}\n\nfunction _arrow(selection, that, rowNum) {\n  const isHorizontal = that.isHorizontal();\n  const width = that.width();\n  const height = that.height();\n  const labelHeight = that.labelHeight();\n  const labelPadding = that.labelPadding();\n  const rectW = labelHeight + labelPadding;\n  const arrowColor = schemeCategory10[0], rectColor = '#A3A3A3';\n  const area = selection.select(className('label-area', true));\n  let curRowNum = 0;\n  let arrow = selection.selectAll(className('arrow', true))\n    .data(['up', 'down'])\n  let arrowEnter = arrow.enter().append('g')\n    .attr('class', d => className('arrow ' + d))\n    .style('cursor', 'pointer')\n  arrowEnter.append('rect')\n      .attr('width', rectW)\n      .attr('height', rectW)\n      .attr('fill', '#fff')\n      .attr('stroke', rectColor)\n      .attr('stroke-width', '1px')\n      .attr('shape-rendering', 'crispEdges');\n  arrowEnter.append('path')\n    .attr('d', symbol().type(symbolTriangle).size(labelHeight * 2.5))\n    .attr('transform', function (d, i) {\n      var translate = 'translate(' + [(rectW - 1) * 0.5, (rectW - 1) * 0.5] + ')';\n      return translate + (i === 1 ? 'rotate(180)' : '');\n    })\n    .style('display', 'block')\n    .attr('fill', d => d === 'up' ? rectColor : arrowColor);\n  arrow = arrowEnter.merge(arrow)\n    .attr('transform', function (d,i) {\n      if (isHorizontal) return 'translate(' + [ width + labelPadding, i * (labelHeight + labelPadding) ] + ')';\n      else return 'translate(' + [0, height + labelPadding*1.25 + i * (labelHeight + labelPadding)] +')'\n    })\n  arrow.on('click', function(d) {\n    if (d === 'up' && curRowNum > 0) {\n      curRowNum -=1;\n    } else if (d === 'down' && curRowNum < rowNum ) {\n      curRowNum += 1; \n    } else {  \n      return;\n    }\n    arrow.select('path').style('fill', arrowColor).style('cursor', 'pointer');\n    if (curRowNum === 0) {\n      arrow.select('path').filter(d => d === 'up').style('fill', rectColor).style('cursor', 'default');\n    } else if (curRowNum === rowNum) {\n      arrow.select('path').filter(d => d === 'down').style('fill', rectColor).style('cursor', 'default');\n    }\n\n    area.attr('transform', 'translate(' + [0, -curRowNum * (labelHeight + labelPadding)] + ')');\n    //areaClip.select('rect').attr('y', curRowNum * (labelHeight + labelPadding))\n  });\n}\n\nfunction _clipPath (selection, that) {\n  const width = that.width();\n  const maxLabelW = that.isHorizontal() ? width /2 : width;\n  \n  let defs = selection.selectAll('defs')\n    .data([[{name: areaClipPath, width: width}, {name: labelClipPath, width: maxLabelW}]]);\n  defs = defs.enter().append('defs').merge(defs);\n  let clipPath = defs.selectAll('clipPath')\n    .data(d => d, d => d.name)\n  clipPath.exit().remove();\n  clipPath = clipPath.enter().append('clipPath')\n    .attr('class', d => d.name)\n    .attr('id', d => getUniqueId(d.name + '-'))\n    .merge(clipPath);\n  let rect = clipPath.selectAll('rect')\n    .data(d => [d]);\n  rect.exit().remove();\n  rect = rect.enter().append('rect')\n    .merge(rect)\n    .attr('width', d => d.width)\n    .attr('height', that.height());\n  selection.select(className('label-area-parent', true))\n    .attr('clip-path', 'url(#' + clipPath.filter((d,i) => i === 0).attr('id') + ')')\n  selection.selectAll(className('label', true))\n    .attr('clip-path', 'url(#' +clipPath.filter((d,i) => i === 1).attr('id') + ')');\n  return selection;\n}\nfunction _overflow(selection) {\n  const isHorizontal = this.isHorizontal();\n  const width = this.width();\n  const maxLabelW = isHorizontal ? width /2 : width;\n  const labelHeight = this.labelHeight();\n  const labelPadding = this.labelPadding();\n  let rowNum = 0, curX = 0, curY = 0;\n  selection.call(_clipPath, this);\n  selection.selectAll(className('label', true))\n    .each( function(d,i) {\n      let selection = select(this);\n      let x,y;\n      let w = Math.min(this.getBBox().width, maxLabelW);\n      if(i === 0  || (isHorizontal && curX + w + labelPadding * 2 <= width)) {\n        x = curX;\n        y = curY;\n      } else {\n        rowNum += 1;\n        x = curX = 0;\n        y = curY = curY + labelHeight +  labelPadding;\n      }\n      curX += w + labelPadding * 2;\n      selection.attr('transform', 'translate(' + [x,y] +')')\n    })\n  if ((rowNum +1) * (labelHeight + labelPadding) > this.height()) { \n    selection.call(_arrow, this, rowNum);\n  } else {\n    selection.selectAll(className('arrow', true)).remove();\n  }\n}\n\nfunction _render(selection) {\n  this.__execs__.legend = selection;\n  \n  let area = selection.select(className('label-area', true));\n  if(this.transition() && !area.empty()) {\n    let trans = this.transition();\n    selection.transition().duration(trans.duration).delay(trans.delay)\n      .attr('transform', 'translate(' +[this.x(), this.y()] + ')');\n  } else {\n    selection.attr('transform', 'translate(' +[this.x(), this.y()] + ')')\n  }\n  if (area.empty()) {\n    area = selection.append('g').attr('class', className('label-area-parent'))\n     .append('g').attr('class', className('label-area'));\n  }\n  \n  const labelHeight = this.labelHeight();\n  const labelHeightHalf = labelHeight/2;\n  let scale = this.scale();\n  let label = area.selectAll(className('label', true))\n    .data(scale.domain().filter(d => d !== undefined && d !== null).map(d => {\n      return {key: d, color: scale(d)}\n    }))\n  \n  label.exit().remove();\n  \n  let labelEnter = label.enter().append('g')\n    .attr('class', className('label'))\n    .style('cursor', 'pointer');\n  labelEnter.append('title')\n  labelEnter.append('rect').style('fill', 'none');\n  labelEnter.append('circle');\n  labelEnter.append('text')\n    .style('letter-spacing', '-0.1px');\n\n  label = labelEnter.merge(label)\n    .style('fill', d => d.color);\n  label.select('title')\n    .text(d => this.format() ? this.format()(d.key) : d.key);\n  label.select('circle')\n    .attr('cx', labelHeightHalf).attr('cy', labelHeightHalf)\n    .attr('r', 5)\n  label.select('text')\n    .attr('x', labelHeight)\n    .attr('dx', '.35em')\n    .attr('dy', '.9em')\n    .style('fill', this.color())\n    .text(d => this.format() ? this.format()(d.key) : d.key);\n  label.select('rect')\n    .attr('width', function() {\n      return this.parentNode.getBBox().width;\n    }).attr('height', function() {\n      return this.parentNode.getBBox().height;\n    })\n  const dispatch = this.__execs__.dispatch;\n  label.on('click', function(d) {\n    dispatch.call('selectClick', this, d);\n  }).on('mouseenter', function(d) {\n    dispatch.call('selectEnter', this, d);\n  }).on('mouseleave', function(d) {\n    dispatch.call('selectLeave', this, d);\n  })\n}\n\nfunction _filter(selection, exceptionFilter) {\n  if (typeof exceptionFilter === 'function') {\n    return selection.filter(exceptionFilter)\n  } else if (typeof exceptionFilter === 'string') {\n    return selection.filter(d => d.key !== exceptionFilter);\n  } else if (exceptionFilter instanceof Date) {\n    let keyTime = exceptionFilter.getTime();\n    return selection.filter(d => d.key.getTime() !== keyTime);\n  } else if (exceptionFilter.tagName && exceptionFilter.tagName === 'g') {\n    return selection.filter(function() {\n      return this !== exceptionFilter;\n    })\n  } \n\n  return selection.filter(() => true);\n}\n\nfunction demute(exceptionFilter) {\n  _filter(this.__execs__.legend.selectAll(className('label', true)), exceptionFilter)\n    .transition().duration(highlightDuration)\n    .attr('opacity', 1);\n}\n\nfunction mute(exceptionFilter) {\n  let selection = _filter(this.__execs__.legend.selectAll(className('label', true)), exceptionFilter);\n\n  if (selection) {\n    selection.transition().duration(highlightDuration)\n      .attr('opacity', this.muteIntensity());\n  } \n  return this;\n}\n\nfunction labelHeight() {\n  return this.font()['font-size'];\n}\n\nfunction labelPadding() {\n  return this.isHorizontal() ? this.labelHeight() /2 : this.labelHeight();\n}\n\nfunction update() {\n\n}\nfunction render(selection) {\n  _style.call(this, selection);\n  _render.call(this, selection);\n  _overflow.call(this, selection);\n  _align.call(this, selection);\n}\nLegend.prototype.demute = demute;\nLegend.prototype.mute = mute;\nLegend.prototype.labelHeight =  labelHeight;\nLegend.prototype.labelPadding = labelPadding;\nLegend.prototype.render = render;\nLegend.prototype.update = update;\nLegend.prototype.isHorizontal = isHorizontal;\n\nsetMethodsFromAttrs(Legend, _attrs);\n\nexport default _legend;","import {select} from 'd3';\nimport legend from '../../modules/legend';\nimport {className} from '../../modules/util';\n\n/**\n * render a legend according to internal {@link Core#legend legend} settings\n * @memberOf Core#\n * @function\n * @private\n * @param {string} [field=region] specify a field name to select color scale.\n * @return {Core}\n */\nfunction renderLegend(field = 'region') {\n  const that = this;\n  let legendToggle = this.legend();\n  let canvas = this.__execs__.canvas;  \n  if (!legendToggle) {\n    canvas.selectAll(className('legend', true)).remove();\n    return;\n  }\n  const fieldObj = this.__execs__.field;\n  if (!legendToggle.format && fieldObj[field].isInterval()) legendToggle.format = fieldObj[field].format();\n  let x,y,width, height;\n  let offset =  this.offset();\n  let innerSize = this.innerSize();\n  let margin = this.margin();\n  let offsetThickness = legendToggle.font ? legendToggle.font['font-size'] : 20;\n  if (legendToggle.orient === 'bottom' || legendToggle.orient === 'top') {\n    x = 0;\n    if (legendToggle.orient === 'bottom') y = innerSize.height  + offset.bottom - margin.bottom - legendToggle.thickness + offsetThickness;\n    else y = - offset.top + margin.top - offsetThickness;\n    if (this.axisX && !this.axisX()) {\n      y += offsetThickness * (legendToggle.orient === 'bottom' ? 1 : -1)\n    }\n    width = innerSize.width;\n    height = legendToggle.thickness - offsetThickness;\n  } else {\n    if (legendToggle.orient === 'right') x = innerSize.width + offset.right - legendToggle.thickness;\n    else x = - offset.left + margin.left - offsetThickness;\n    y = offsetThickness / 2;\n    width = legendToggle.thickness - offsetThickness;\n    height = innerSize.height - offsetThickness/2;\n  }\n  let colorScale = this.scale().color;\n  let legendObj = legend().scale(colorScale)\n    .x(x).y(y)\n    .align(legendToggle.align)\n    .width(width).height(height)\n    .orient(legendToggle.orient)\n    .format(legendToggle.format)\n    .transition(this.transition());\n  this.__execs__.legend = legendObj;\n\n  legendObj.on('selectEnter', function(d) {\n    if (that.muteFromLegend) {\n      that.muteFromLegend(d);\n    }\n    legendObj.mute(this); //FIXME: need to mute by the label\n    that.__execs__.selectDispatch.call('legendEnter', this, d);\n  }).on('selectLeave', function(d) {\n    if (that.demuteFromLegend) {\n      that.demuteFromLegend(d);\n    }\n    legendObj.demute(this);\n    that.__execs__.selectDispatch.call('legendLeave', this, d);\n  })\n  \n  let legendSel = canvas.selectAll(className('legend', true))\n    .data([legendObj]);\n  legendSel.exit().remove();\n  legendSel.enter().append('g')\n    .attr('class', className('legend'))\n    .merge(legendSel)\n    .each(function(legend) {\n      legend.render(select(this));\n    });\n  return this;\n}\n\nexport default renderLegend;","import {select, transition} from 'd3';\nimport {className} from '../../modules/util';\n\n/**\n * render regions\n * @memberOf Core#\n * @function\n * @private\n * @param {function} posFunc specifies positions of a region by set x and y value of the region data\n * @param {function} [dataFunc=d => d] specify a data accessor\n * @param {boolean} [isFacet=false] \n * @param {string} [suffix='']\n * @return {Core}\n */\nfunction renderRegion(posFunc, dataFunc = d => d, isFacet = false, suffix = '') {\n  let region = this.__execs__.canvas.select(className('regions', true))\n    .selectAll(this.regionName() + (isFacet ? '.facet' : '') + suffix)\n    .data(dataFunc, (d,i) => (d.data && d.data.key) ? d.data.key : i);\n  const regionName = this.regionName().split('.').join(' ').trim();\n  const aggregated = this.aggregated();\n  const regionClass = regionName + (isFacet ? ' facet' : '');\n  const canvas = this.__execs__.canvas;\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay); \n  const _id = canvas.selectAll(className('canvas-g-clip-path', true)).attr('id');\n  let _regionInit = function (selection) {\n    selection.each(function(xy) {\n      if (!aggregated) select(this).attr('transform', 'translate(' + [xy.x, xy.y] + ')');\n      else select(this).attr('transform', 'translate(0,0)');\n      if (_id && !isFacet) select(this).attr('clip-path', 'url(#' + _id+')');\n    })\n  };\n  let _region = function (selection) {\n    selection.each(function(xy) {\n      if (!aggregated) select(this).transition(trans).attr('transform', 'translate(' + [xy.x, xy.y] + ')');\n      else select(this).attr('transform', 'translate(0,0)');\n    })\n  };\n  \n  region.exit().remove();\n  let regionEnter = region.enter().append('g')\n      .attr('class', regionClass)\n      .each(posFunc)\n      .call(_regionInit)\n  region.each(posFunc);\n  region = regionEnter.merge(region);\n  region.call(_region);\n  return region;\n}\n\nexport default renderRegion;","import {range, scaleLinear, symbol, symbolTriangle} from 'd3';\nimport {className, labelFormat, safari, setMethodsFromAttrs, getUniqueId} from './util';\nimport {countMeasure, countMeasureTitle} from './measureField';\n\nconst defaultFont = {\n  'font-family': 'sans-serif',\n  'font-size': 11,\n  'font-weight': 'normal',\n  'font-style': 'normal'\n};\nconst gradientPrefix = 'legend-gradient-';\n//const labelClipPath = 'legend-label-clip-path';\nconst orients = ['top', 'bottom'];\nconst _attrs = {\n  color: '#6e6e6e',\n  field: null,\n  height: 0,\n  orient: orients[0],\n  gradientWidth: 150,\n  gradientHeight: defaultFont['font-size'],\n  scale: null,\n  showTooltip: true,\n  title: null,\n  width: 0,\n  x: 0,\n  y: 0,\n  font: defaultFont\n}\nclass Spectrum {\n  constructor() {\n    this.__attrs__ = JSON.parse(JSON.stringify(_attrs));\n    this.__execs__ = {spectrum:null, scale:null};\n  }\n}\n\nfunction _spectrum() {\n  return new Spectrum();\n}\n\nfunction _style(selection) {\n  let font = this.font();\n  for (var k in font) {\n    selection.style(k, (k === 'font-size' ? font[k] + 'px' : font[k]));\n  }\n}\n\nfunction _gradientAlternative(selection, width, height, colorRange) {\n  const chipNum = width;\n  const chipW = width / chipNum;\n  let fill = scaleLinear().domain([0, width]).range(colorRange);\n  let chips = range(0, chipNum).map(function (i) {\n    return i * chipW + chipW;\n  });\n  selection.selectAll(className('gradient-chip', true))\n    .data(chips)\n    .enter().append('rect')\n    .attr('class', className('gradient-chip'))\n    .attr('width', chipW)\n    .attr('height', height)\n    .attr('x', function (d) {\n      return d - chipW;\n    }).style('fill', d => fill(d));\n}\n\nfunction _render(selection) {\n  this.__execs__.spectrum = selection.attr('transform', 'translate(' +[this.x(), this.y()] + ')')\n  const scale = this.scale();\n  const colorRange = scale.range();\n  const gradientWidth = this.gradientWidth();\n  const gradientHeight = this.gradientHeight();\n  this.__execs__.scale = scaleLinear().domain(scale.domain()).rangeRound([0, gradientWidth]);\n\n  let area = selection.select(className('gradient-area', true));\n  if (area.empty()) {\n    let gradientId = getUniqueId(gradientPrefix);\n    let triangleSymbol = symbol().type(symbolTriangle).size(40);\n    area = selection.append('g').attr('class', className('gradient-area'))\n    area.append('path').attr('class', className('arrow'))\n      .attr('fill', '#777')\n      .attr('d', triangleSymbol)\n      .style('visibility', 'hidden');\n    selection.append('defs').append('linearGradient')\n      .attr('id', gradientId);\n  }\n  area.attr('transform', 'translate(' + [(this.width() - gradientWidth) /2, 18] + ')');\n  let gradient = selection.select('linearGradient')\n  let stop = gradient.selectAll('stop')\n    .data(colorRange);\n  stop.enter().append('stop')\n    .merge(stop).attr('offset', (d,i) => i*100 + '%')\n    .attr('stop-color', d => d)\n  if(safari()) {\n    area.call(_gradientAlternative, gradientWidth, gradientHeight, colorRange);\n  } else {\n    let rect = area.selectAll(className('gradient-rect', true))\n    .data([scale])\n    rect.enter().append('rect')\n      .attr('class', className('gradient-rect'))\n      .merge(rect)\n      .attr('width', this.gradientWidth())\n      .attr('height', this.gradientHeight())\n      .attr('fill', 'url(#' +gradient.attr('id') + ')');\n  }\n  let label = area.selectAll(className('label', true))\n    .data(scale.domain())\n  label.enter().append('text')\n    .attr('class', className('label'))\n    .merge(label)\n    .attr('x', (d,i) => i * gradientWidth)\n    .attr('y', gradientHeight)\n    .attr('dy', '1.25em')\n    .attr('text-anchor', 'middle')\n    .style('fill', '#999')\n    .text(d => labelFormat(d));\n  let titleText = this.title() || this.field();\n  titleText = titleText.localeCompare(countMeasure.field) === 0 ? countMeasureTitle : titleText;\n  let title = area.selectAll(className('title', true))\n    .data([titleText])\n  title.exit().remove();\n  title.enter().append('text')\n    .merge(title)\n    .attr('class', className('title'))\n    .attr('x', gradientWidth + this.font()['font-size'])\n    .attr('y', gradientHeight * 0.5)\n    .attr('dy', '.35em')\n    .attr('text-anchor', 'start')\n    .text(d => d);\n}\n\nfunction hide() {\n  this.__execs__.spectrum.select(className('arrow', true))\n    .style('visibility', 'hidden');\n  return this;\n}\n\nfunction labelHeight() {\n  return this.font()['font-size'];\n}\n\nfunction labelPadding() {\n  return this.labelHeight() /2;\n}\n\nfunction show(value) {\n  let pos = this.__execs__.scale(value);\n  this.__execs__.spectrum.select(className('arrow', true))\n    .style('visibility', 'visible')\n    .attr('transform', 'translate(' + pos + ',-5)rotate(180)');\n  return this;\n}\n\n\nfunction update() {\n\n}\nfunction render(selection) {\n  _style.call(this, selection);\n  _render.call(this, selection);\n}\n\nSpectrum.prototype.hide =  hide;\nSpectrum.prototype.labelHeight = labelHeight;\nSpectrum.prototype.labelPadding = labelPadding;\nSpectrum.prototype.render = render;\nSpectrum.prototype.show = show;\nSpectrum.prototype.update = update;\n\nsetMethodsFromAttrs(Spectrum, _attrs);\n\nexport default _spectrum;","import {select} from 'd3';\nimport {className} from '../../modules/util';\nimport spectrum from  '../../modules/spectrum';\n\n/**\n * render a spectrum instead of a legend according to internal {@link Core#legend legend} settings. Charts such as treeemap and xy-heatmap, which use a contniuous color scale to present their measure level, use this method.\n * @memberOf Core#\n * @function\n * @private\n * @return {Core}\n */\nfunction renderSpectrum() {\n  let legendToggle = this.legend();\n  if (!legendToggle) return;\n  \n  let field = this.__execs__.field;\n  let x,y,width, height;\n  let offset =  this.offset();\n  //FIXME: enable other directions\n  if (legendToggle.orient === 'bottom') {\n    x = 0;\n    y = this.innerSize().height  + offset.bottom - this.margin().bottom - legendToggle.thickness;\n    width = this.innerSize().width;\n    height = legendToggle.thickness;\n  }\n  \n  let colorScale = this.scale().color;\n  let legendObj = spectrum().scale(colorScale)\n    .field(field.color.field())\n    .x(x).y(y)\n    .width(width).height(height);\n  this.__execs__.canvas.selectAll(this.nodeName() + '.point')\n    .on('mouseenter.spectrum', d => {\n      legendObj.show(d.value)\n    })\n    .on('mouseleave.spectrum', () => legendObj.hide());\n  this.__execs__.legend = legendObj;\n\n  let canvas = this.__execs__.canvas;\n  let spectrumSel = canvas.selectAll(className('spectrum', true))\n    .data([legendObj]);\n  spectrumSel.exit().remove();\n  spectrumSel.enter().append('g')\n    .attr('class', className('spectrum'))\n    .merge(spectrumSel)\n    .each(function(d) {\n      d.render(select(this));\n    });\n  return this;\n}\n\nexport default renderSpectrum;","import {local, select} from 'd3';\nimport {setMethodsFromAttrs} from './util';\nimport {className, labelFormat} from './util';\nimport {countMeasure, countMeasureTitle} from './measureField';\n\nconst arrowWidth = 4;\nconst backgroundColor = '#001a32';\nconst whiteColor = '#fff';\nconst greyColor = '#7b92ae';\nconst IS_IE9 = typeof navigator === 'object' ? (/MSIE 9/i.test(navigator.userAgent)) : false;\nconst defaultFont = {\n  'font-family': 'sans-serif',\n  'font-size': 11,\n  'font-weight': 'normal',\n  'font-style': 'normal'\n};\n\nconst _attrs = {\n  absolute: false,\n  anchor: {x:'left', y:'top'}, \n  color: null,\n  dx: 0,\n  dy: 0,\n  font: defaultFont,\n  offsetFunc: null,\n  keys : null, //{name, value}\n  keyFunc: null, // function(d) { return {name, value}}\n  nodeName : className('mark node', true),\n  target: null,\n  valueFormat : null,\n  valueFunc: null,\n  values : [], //[{name, value}, ...]\n  x: 0,\n  y: 0,\n  fromMulti: false,\n  showDiff : false\n}\n\nclass Tooltip {\n  constructor() {\n    this.__attrs__ = JSON.parse(JSON.stringify(_attrs));\n    this.__execs__ = {tooltip:null, mark:null, init: true};\n    this.valueFormat(labelFormat);\n  }\n}\n\nfunction _tooltip () {\n  return new Tooltip();\n}\n\nfunction _styleOpacity(selection, value = 1) {\n  if (IS_IE9) return selection.style('filter', 'alpha(opacity=' + (value * 100) + ')');\n  else return selection.style('opacity', value);\n}\n\nfunction _event() {\n  const that = this;\n  const target = this.target();\n  const points = target.__execs__.canvas.selectAll(this.nodeName());\n  points.on('mouseleave.tooltip', function() {\n    if (that.fromMulti()) return;\n    that.hide();\n  }).on('mouseenter.tooltip', function(d) {\n    showFromPoint.call(that, this, d);\n  })\n}\n\nfunction _position() {\n  const target = this.target();\n  const points = target.__execs__.canvas.selectAll(this.nodeName());\n  const root = (target.parent() ? target.parent() : target).__execs__.canvas.node();\n  const absLocal = local();\n  const offsetFunc = this.offsetFunc();\n  const absolute = this.absolute();\n  let initX = 0; \n  let initY = 0;\n  let offset = target.offset();\n  initX += offset.left; initY += offset.top;\n  if (target.parent()) { //add parent's offset\n    offset = target.parent().offset();\n    initX += offset.left; initY += offset.top;\n  }\n  //add frame and svg offset\n  let svgRect = root.parentNode.getBoundingClientRect();    \n  let frameRect = root.parentNode.parentNode.getBoundingClientRect();\n  initX += svgRect.left - frameRect.left;\n  initY += svgRect.top - frameRect.top; \n  initX += arrowWidth;\n  \n  let __pos = function (cur,pos) {\n    if (cur.x) pos.x += cur.x;\n    if (cur.y) pos.y += cur.y;\n  }\n  let __absPos = function(d) {\n    let pos = {x:initX, y:initY};\n    if (offsetFunc && typeof offsetFunc === 'function') {\n      let offset = offsetFunc.apply(this, arguments);\n      pos.x += offset.x; pos.y += offset.y;\n    }\n    let cur = d;\n    if (absolute) {\n      __pos(cur, pos);\n    } else {\n      while(cur) {\n        __pos(cur, pos);\n        cur = cur.parent;\n      }\n    }\n    return pos;\n  }\n  points.each(function() {\n    let pos = __absPos.apply(this, arguments);\n    absLocal.set(this, pos);\n  })\n  this.__execs__.mark = absLocal;\n}\n\nfunction _render(selection) { //pre-render the tooltip \n  let tooltip = this.__execs__.tooltip //selection.select('.tooltip'); //FIXME: can not generate tooltip area independently.\n  if (selection.style('position') === 'static') selection.style('position', 'relative');\n  if (!tooltip || tooltip.empty()) {\n    tooltip = selection.append('div').attr('class', className('tooltip'))\n      .style('color', whiteColor)\n      .style('pointer-events', 'none')\n      .style('background-color', backgroundColor)\n      .style('padding', '9px')\n      .style('border-radius', '8px')\n      .style('position', 'absolute')\n      .style('z-index', '999')\n      .call(_styleOpacity, 0)\n    \n    tooltip.append('div')\n      .attr('class', className('keys'))\n      .style('padding-bottom', '1em')\n      .style('letter-spacing', '0.1px')\n      .call(_styleOpacity, 0.9);\n    tooltip.append('table')\n      .attr('class', className('values'))\n      .style('border-collapse', 'collapse')\n      .call(_styleOpacity, 0.72);\n    tooltip.append('div')\n      .attr('class', className('arrow'))\n      .style('position', 'absolute')\n      .style('top', 'calc(' + arrowWidth + 'px + 50%)')\n      .style('left', '0%')\n      .style('margin', -(arrowWidth*2) + 'px')\n      .style('border-width', arrowWidth + 'px')\n      .style('border-style', 'solid')\n      .style('border-color', 'transparent ' + backgroundColor + ' transparent transparent')\n      .text(' ');\n  }\n  for (let fontKey in this.font()) {\n    tooltip.style(fontKey, this.font()[fontKey] + (fontKey === 'font-size' ? 'px' : ''));\n  }\n  this.__execs__.tooltip = tooltip;\n  _position.call(this);\n  _event.call(this);\n}\n\nfunction hide() {\n  let tooltip = this.__execs__.tooltip;\n  tooltip.transition().duration(180).call(_styleOpacity, 0)\n\n}\n\nfunction render(selection) {\n  selection = select(selection);\n  _render.call(this, selection);\n}\n\nfunction showFromPoint(point, d) {\n  if (this.fromMulti()) return;\n  const color = this.color();\n  const key = this.keyFunc();\n  const value = this.valueFunc();\n  let pos = this.__execs__.mark.get(point);\n  this.x(pos.x).y(pos.y)\n    .color(color ? color : d.color)\n    .key(key ? key.call(this, d, d.key): null)\n    .value(value.call(this, d, d.text))\n    .show();\n  return this;\n}\n\nfunction show() {\n  let valueFormat = this.valueFormat();\n  let tooltip = this.__execs__.tooltip;\n  \n  if(this.keys()) {\n    let key = tooltip.select(className('keys', true)).selectAll(className('key', true))\n    .data(this.keys())\n    key.exit().remove();\n    key = key.enter().append('div')\n      .attr('class', className('key'))\n      .merge(key);\n    key.text(d => d.value);\n  }\n  let value = tooltip.select(className('values', true)).selectAll(className('value', true))\n    .data(this.values());\n  value.exit().remove();\n  value = value.enter().append('tr')\n    .attr('class', className('value'))\n    .merge(value)\n  if (this.showDiff() && value.size() > 1) {\n    value.style('color', (_,i) => (i ===0 ? greyColor : whiteColor));\n  } else {\n    value.style('color', whiteColor);\n  }\n  \n  let label = value.selectAll('td')\n    .data(d => [d.name, d.value])\n  label.exit().remove();\n  label = label.enter().append('td')\n    .style('padding', 0)\n    .style('margin', 0)\n    .style('padding-bottom', '.35em')\n    .style('padding-right', (_,i) => (i===0 ? '2em' : 0))\n    .style('text-align', (_,i) => (i===0 ? 'left' : 'right'))\n    .merge(label)\n    .text((d,i) => {\n      if (i === 0) {\n        return d.localeCompare(countMeasure.field) === 0 ? countMeasureTitle : d;\n      } else {\n        return valueFormat(d);\n      }\n    })\n  let tooltipH = tooltip.node().getBoundingClientRect().height/2;\n  tooltip\n    .style('left', (this.x() + this.dx()) + 'px')\n    .style('top', this.y() + this.dy() - tooltipH + 'px')\n  .transition().duration(180)\n    .call(_styleOpacity, 1);\n  \n}\n\nfunction key(_val) {\n  if(!arguments.length || _val === null) return this;\n  if('name' in _val && 'value' in _val) this.__attrs__.keys = [_val];\n  return this;\n}\n\nfunction value(_val) {\n  if(!arguments.length) return this;\n  if(Array.isArray(_val)) {\n    this.__attrs__.values = _val;\n  } else if('name' in _val && 'value' in _val) {\n    this.__attrs__.values = [_val];\n  }\n  return this;\n}\n\nTooltip.prototype.hide = hide;\nTooltip.prototype.render = render;\nTooltip.prototype.show = show;\nTooltip.prototype.showFromPoint = showFromPoint;\nTooltip.prototype.key = key;\nTooltip.prototype.value = value;\n\nsetMethodsFromAttrs(Tooltip, _attrs);\n\nexport default _tooltip;","import tooltip from '../../modules/tooltip';\n\n/**\n * renders tooltip according to the internal {@link Core#tooltip tooltip} settings.\n * @memberOf Core#\n * @function\n * @private\n * @param {object} setting\n * @param {number} [setting.dx]\n * @param {number} [setting.dy]\n * @param {string} [setting.color ]\n * @param {function} [setting.key]\n * @param {function} [setting.value]\n * @param {function} [setting.offset]\n * @param {boolean} [setting.showDiff]\n * @param {boolean} fromMulti=false\n * @param {boolean} absolute=false\n * @return {Tooltip}\n */\nfunction renderTooltip(setting = {}, fromMulti = false, absolute = false) {\n  const tooltipObj = tooltip().dx( (setting && setting.dx ? setting.dx : 0))\n    .dy((setting && setting.dy ? setting.dy : 0))\n    .target(this)\n    .absolute(absolute)\n    .fromMulti(fromMulti);\n  const container = (this.parent() ? this.parent() : this).__execs__.canvas;\n  if(setting.color) tooltipObj.color(setting.color);\n  if (!fromMulti) {\n    tooltipObj.keyFunc(setting.key)\n      .valueFunc(setting.value)\n      .offsetFunc(setting.offset)\n      .showDiff(setting.showDiff);\n    this.__execs__.tooltip = tooltipObj;\n  }\n  tooltipObj.render(container.node().parentNode.parentNode);\n  return tooltipObj;\n}\n\nexport default renderTooltip;","import {select, local} from 'd3';\nimport {className} from '../../modules/util';\n\n/**\n * reset the chart\n * @memberOf Core#\n * @function\n * @param {boolean} [keep=false] If keep is true, not reset existing scales.\n * @return {Core} \n */\nfunction reset (keep=false) {\n  this.__execs__.axis = {};\n  this.__execs__.legend = null;\n  if (!this.parent()) this.__execs__.mark = local(); //when is facet, not reset\n  this.__execs__.regions = null;\n  this.__execs__.nodes = null;\n  if (!keep) {\n    this.__execs__.scale = {};\n    this.__execs__.field = {};\n  }\n  if (!this.parent() && this.__execs__.canvas) select(this.container()).selectAll(className('tooltip', true)).remove(); //reset, because .facet can generates multiple tooltips.\n  return this;\n}\n\nexport default reset;","import { select } from 'd3';\nimport { className } from '../../modules/util';\n\nfunction resetTooltip() {\n  const parent = this.parent();\n  select((parent ? parent : this).__execs__.canvas.node().parentNode.parentNode)\n    .selectAll(className('tooltip', true)).remove(); //remove existing tooltip\n  return this;\n}\n\nexport default resetTooltip;","/**\n * If size is specified, sets the size range and it direction and returns the instance itself. Each chart type apply size settings differently. If size is not specified, returns the instance's current transition and use the default size setting.\n * \n * @memberOf Core#\n * @function\n * @example\n * line.size(20) // set point radius of a line chart to 20 pixel\n * scatter.size(10) // set point radius of a scatter chart to 10 pixel\n * scatter.size([10, 100]) // set the range of point radius of a scatter chart from 10 to 100 pixel\n * pie.size([20, 100]) // set the inner radius to 20 and the outer radius to 100 seperately\n * treemap.size({range: [600, 400]}) // set the width to 600 and the height to 400 pixel of a treemap\n * @param {number|object|Object[]} [size] \n * @return {size|Core}\n */\nfunction size(size) {\n  if (!arguments.length) return this.__attrs__.size;\n  if (Array.isArray(size)) { // only range [min, max]\n    this.__attrs__.size = {range: size, reverse: false};\n  } else if (typeof size === 'number') { // only number [num, num]\n    this.__attrs__.size = {range: [size, size], reverse: false};\n  } else if (typeof size === 'object') {\n    this.__attrs__.size = size;\n  }\n  return this;\n}\n\nexport default size;","/**\n * If name is specified, returns a scale with the name in existing scales. If name is not specified, returns an object includes all scales.\n * @memberOf Core#\n * @function\n * @example\n * core.scale('color'); //returns the color scale;\n * core.scale() // returns the scale object\n * @param {string} [name] \n * @return {object|function} \n */\nfunction scale(name) {\n  if(!arguments.length) return this.__execs__.scale;\n  return this.__execs__.scale[name];\n}\n\nexport default scale;","import {setAttrs as _setAttrs} from '../../modules/util'\n\n/**\n * @memberOf Core#\n * @function\n * @private\n * @param {*} attrs \n */\nfunction setAttrs (attrs) {\n  _setAttrs(this, attrs);\n  return this;\n}\n\nexport default setAttrs","function adjustDomain(scale, from, to) {\n  let result = [];\n\n  if (to[0] > from[0]) result[0] = from[0];\n  else result[0] = to[0];\n\n  if (to[1] < from [1]) result[1] = from[1];\n  else result[1] = to[1];\n  \n  scale.domain(result);\n  if (from[0] === result[0] && from[1] === result[1]) scale.nice();\n}\n\n/**\n * @memberOf Core#\n * @function\n * @private\n * @param {*} target \n * @param {*} domain \n * @param {*} fromScale \n */\nfunction setCustomDomain(target, domain, fromScale = false) {\n  let scale = fromScale ? target : this.__execs__.scale[target];\n  let field = fromScale ? null : this.__execs__.field[target];\n  scale._defaultDomain = domain;\n  if (fromScale) {\n    scale.domain(domain).nice();\n  } else if (this.customDomain()) {\n    adjustDomain(scale, domain, this.customDomain());\n  } else if ((this.isMixed ? !this.isMixed() : true) && field.customDomain()) { //use field's customDomain\n    adjustDomain(scale, domain, field.customDomain());\n  } else {\n    scale.domain(domain).nice();\n  }\n  return this;\n}\n\nexport default setCustomDomain;","/**\n * shows a tooltip on a node which has the same keys.\n * @todo not work for a multiTooltip\n * @memberOf Core#\n * @function\n * @param {...string} keys - Keys from the leaf to parents\n * @return {Core}\n */\nfunction showTooltip (...keys) {\n  if (this.multiTooltip && this.multiTooltip()) return;\n  let condition = d => {\n    let cond = true\n    let target = d;\n    keys.forEach(k => {\n      cond = cond && target.data.key === k;\n      if (target.parent) target = target.parent;\n      else return cond;\n    })\n    return cond;\n  }\n  let nodes = this.filterNodes(condition); \n  let tooltip = this.__execs__.tooltip;\n  if (nodes.size() > 0) { \n    nodes.each(function(d) {\n      tooltip.showFromPoint(this, d);\n    });\n  }\n  return this;\n}\n\nexport default showTooltip;","import {select} from 'd3';\n\n/**\n * @memberOf Core#\n * @function\n * @private\n * @param {*} selection \n * @param {*} font \n */\nfunction styleFont(selection, font) {\n  font = font || this.font();\n  for (let fontKey in font) {\n    if (!selection.selectAll) selection = select(selection);\n    selection.style(fontKey, font[fontKey] + (fontKey === 'font-size' ? 'px' : ''));\n  }\n}\n\nexport default styleFont;","/**\n * If tooltip is specified, decides to show a tooltip in the chart by it value. If is false, prevent showing the tooltip. If tooltip is not specified, returns the instance's current tooltip setting.\n * @memberOf Core#\n * @function\n * @example\n * core.tooltip(true); //set to show a tooltip\n * core.tooltip({sortByValue:'ascending'}); // set to show a tooltip and sort items in order of their measrue values.\n * @param {boolean|object} [tooltip=false]\n * @return {tooltip|Core}\n */\n\nfunction tooltip(tooltip) {\n  if (!arguments.length) return this.__attrs__.tooltip;\n  if (typeof tooltip === 'boolean') {\n    if (tooltip) {\n      tooltip = {sortByValue: 'natural'};\n    } \n  } \n  if (typeof tooltip === 'object') {\n    if (!tooltip.sortByValue) tooltip.sortByValue = 'natural';\n  }\n  this.__attrs__.tooltip = tooltip;\n  return this;\n}\n\nexport default tooltip;","import {scaleOrdinal} from 'd3';\nfunction fillUndefined (range, colors) {\n  let lastColorIndex = 0;\n  range = range.map(c => {\n    if (c === undefined) {\n      while (lastColorIndex < colors.length) {\n        let n = colors[lastColorIndex];\n        lastColorIndex +=1;\n        if (range.findIndex( d => d == n) < 0) {\n          return n;\n        }\n      }\n    } \n    return c;\n  })\n  return range.filter(c => c !== undefined);  \n}\n/**\n * @memberOf Core#\n * @function\n * @private\n * @param {*} domain \n * @param {*} keepLast \n */\nfunction updateColorScale(domain, keepLast = true) { //FIXME: update without domain\n  const lastScale = this.scale().color;\n  if (this.colorDomain() && this.colorDomain().length > 0) {\n    let order = this.colorDomain();\n    let originColors = this.color();\n    let newRange = domain.map(d => {\n      let i = order.findIndex(o => d == o.key);\n      if (i >= 0) {\n        return order[i].color ? order[i].color : originColors[i];\n      } else {\n        return undefined;\n      }\n    });\n    newRange = fillUndefined(newRange, originColors);\n    let scale = scaleOrdinal().domain(domain).range(newRange);\n    scale._defaultRange = this.color();\n    return scale;\n  } else if (keepLast && lastScale && this.color() === lastScale._defaultRange) {\n    let originColors = this.color();\n    let lastDomain = this.scale().color.domain();\n    let lastRange = this.scale().color.range();\n    let exist = false;\n    let lastIndex = domain.map(d => {\n      const i = lastDomain.findIndex(l => l === d);\n      if (!exist && i >= 0) exist = true;\n      return i;\n    });\n\n    if (exist) {\n      let newRange = lastIndex.map(i => {\n        if (i >= 0 && i < lastRange.length) { \n          return lastRange[i];\n        } else {\n          return undefined;\n        }\n      });\n      newRange = fillUndefined(newRange, originColors);\n      return lastScale.domain(domain).range(newRange);\n    }\n  }\n  let scale = scaleOrdinal().domain(domain).range(this.color());\n  scale._defaultRange = this.color();\n  return scale;\n}\n\nexport default updateColorScale;","import {dispatch, local} from 'd3';\nimport {attrFunc, className, magicTableColorScheme, setMethodFromDefaultObj} from '../../modules/util';\n\nimport aggregate from './aggregate';\nimport aggregateMixed from './aggregateMixed';\nimport autoResize from './autoResize';\nimport color from './color';\nimport colorDomain from './colorDomain';\nimport condition from './condition';\nimport demute from './demute';\nimport demuteLegend from './demuteLegend';\nimport demuteNodes from './demuteNodes';\nimport demuteRegions from './demuteRegions';\nimport dimension from './dimension';\nimport dimensions from './dimensions';\nimport domain from './domain';\nimport filterNodes from './filterNodes';\nimport filterRegions from './filterRegions';\nimport hideTooltip from './hideTooltip';\nimport innerSize from './innerSize';\nimport legend from './legend';\nimport limitKeys from './limitKeys';\nimport limitRows from './limitRows';\nimport margin from './margin';\nimport measure from './measure';\nimport measureName from './measureName';\nimport measures from './measures';\nimport mixedDimension from './mixedDimension';\nimport mute from './mute';\nimport muteLegend from './muteLegend';\nimport muteNodes from './muteNodes';\nimport muteRegions from './muteRegions';\nimport nodeName from './nodeName';\nimport nodes from './nodes';\nimport offset from './offset';\nimport parent from './parent';\nimport process from './process';\nimport rebindOnMethod from './rebindOnMethod';\nimport regions from './regions';\nimport remove from './remove';\nimport render from './render';\nimport renderCanvas from './renderCanvas';\nimport renderFrame from './renderFrame';\nimport renderLegend from './renderLegend';\nimport renderRegion from './renderRegion';\nimport renderSpectrum from './renderSpectrum';\nimport renderTooltip from './renderTooltip';\nimport reset from './reset';\nimport resetTooltip from './resetTooltip';\nimport size from './size';\nimport scale from './scale';\nimport setAttrs from './setAttrs';\nimport setCustomDomain from './setCustomDomain';\nimport showTooltip from './showTooltip';\nimport styleFont from './styleFont';\nimport tooltip from './tooltip';\nimport updateColorScale from './updateColorScale';\n\nconst defaultFont = {\n  'font-family': 'sans-serif',\n  'font-size': 12,\n  'font-weight': 'lighter',\n  'font-style': 'normal'\n}\n\nconst continousColorScheme = ['#ece7f2','#50C3F7'];\nconst categoryColorScheme = magicTableColorScheme;\n\nconst _attrs = {\n  autoResize: false,\n  autoResizeSkip: ['munge', 'domain'],\n  aggregated: false,\n  color : categoryColorScheme,\n  colorDomain: null,\n  container: null,\n  customDomain: null,\n  data: [],\n  dimensions: [],\n  font: defaultFont,\n  height: 480,\n  keep: false,\n  label: null,\n  legend: null,\n  limitKeys : 200,\n  limitRows: 1000,\n  name: null,\n  nodeName: className('mark node', true),\n  needCanvas: true,\n  margin: {top: 40, right: 40, bottom: 40, left: 40},\n  measures: [],\n  muteIntensity: 0.3,\n  parent : null,\n  regionName: className('mark region', true),\n  size: null,\n  tooltip: true,\n  transition: {duration: 600, delay: 20},\n  width: 640,\n  zeroOffset: false,\n  zeroMargin: false\n}\n\n/** \n * Core of jelly-chart \n * @class Core\n * */\nclass Core {\n  constructor() {\n    this.setAttrs(_attrs);\n    this.__execs__ = {\n      autoResize: false,\n      axis: {}, //axis settings\n      condition: null, \n      canvas: null, \n      hidden: null,\n      field: {}, // {x,y,color,raidus}\n      legend:null, \n      mark: local(),\n      scale: {},\n      tooltip: null,\n      regions: null,\n      nodes: null\n    }; \n    this.on = undefined; \n    this.__execs__.selectDispatch = dispatch('selectClick', 'selectEnter', 'selectLeave', 'legendEnter', 'legendLeave');\n    this.rebindOnMethod(this.__execs__.selectDispatch);\n  }\n  \n}\n\n/**\n * If fontStyle is specified, sets the font styles to the specified object and returns the instance itself. If fontStyle is not specified, returns the instance's current fontStyle.\n * @function\n * @example\n * core.font({'font-size': 16}); //sets th font size to 16px, then returns core itself;\n * core.font(); //returns the current fontStyle object;\n * @param {object} [fontStyle]\n * @param {string} fontStyle.font-family=sans-serif\n * @param {number} fontStyle.font-size=12\n * @param {string} fontStyle.font-weight=lighter\n * @param {string} fontStyle.font-style=normal\n * @return {(fontStyle|Core)}\n */\nCore.prototype.font = setMethodFromDefaultObj('font', defaultFont);\n\n/**\n * If transition is specified, sets the transition duration and delay to the specified object and returns the instance itself. If transition is not specified, returns the instance's current transition.\n * @function\n * @example\n * core.transition({duration: 1000}); //sets the transition duration to 1000 milliseconds, then returns core itself;\n * core.transition(); //returns the current transition object;\n * @param {object} [transition]\n * @param {number} transition.duration=600 transition duration in milliseconds\n * @param {number} transition.delay=20 trnasition delay in millisecends\n * @return {(transition|Core)}\n */\nCore.prototype.transition = setMethodFromDefaultObj('transition', _attrs.transition);\nCore.prototype.aggregated = attrFunc('aggregated');\nCore.prototype.autoResizeSkip = attrFunc('autoResizeSkip');\n/**\n * The Core method `.container` sets a selector of a chart holder element or an element itself as its container. Core finds the holder element and renders a chart on it.\n * If container is specified, sets a selector or a element and returns the instance itself. If container is not specified, returns the instance's current container.\n * @function\n * @example\n * core.container('#chart-container'); //sets a selector of a chart holder element as its container\n * core.container(document.getElementById('chart-container')); //sets an element as its container\n * core.container(); //returns the current container;\n * @param {(string|Element)} [container] a selector or an element\n * @return {((string|Element)|Core)}\n */\nCore.prototype.container = attrFunc('container');\n\n/**\n * The Core method `.customDomain` sets a user-defined domain of a measrure variable. It's reflection differs based on the char type.\n * If customDomain is specified, sets a selector or a element and returns the instance itself. If customDomain is not specified, returns the instance's current customDomain.\n * @function\n * @example\n * core.customDomain([0, 100]); //sets a custom domain;\n * core.container(); //returns the current custom domain;\n * @param {Number[]} [customDomain] a user-defined domain of a measrure variable\n * @return {(customDomain|Core)}\n */\nCore.prototype.customDomain = attrFunc('customDomain');\n\n/**\n * If data is specified, sets data and returns the instance itself. The data shoud be an array of objects, and the object includes the properties used as dimensions and measures. If data is not specified, returns the instance's current data.\n * @function\n * @example\n * core.data([\n *    {name: 'a', value: 10},\n *    {name: 'a', value: 100},\n *    {name: 'b', value: 20}\n *  ]) //sets data\n *  .dimensions(['name'])\n *  .measures(['value']); \n * \n * core.data(); //returns the current data;\n * @param {Object[]} [data] \n * @return {(data|Core)}\n */\nCore.prototype.data = attrFunc('data');\n\n/**\n * If height is specified, sets height of the container and returns the instance itself. The unit of height is a pixel. If height is not specified, returns the instance's current height.\n * @function\n * @example\n * core.height(600); //sets a custom height;\n * core.height(); //returns the current height;\n * @param {number} [height=480] height of the container\n * @return {(height|Core)}\n */\nCore.prototype.height = attrFunc('height');\nCore.prototype.keep = attrFunc('keep');\n/**\n * If label is specified as true, sets the chart to show labels on its marks and returns the instance itself. If label is not specified, returns the instance's current height.\n * @function\n * @example\n * core.label(true); //shows labels\n * core.label(); //returns the current height;\n * @param {boolean} [label=false] whether to show labels on marks\n * @return {(label|Core)}\n */\nCore.prototype.label = attrFunc('label');\nCore.prototype.name = attrFunc('name');\nCore.prototype.needCanvas = attrFunc('needCanvas');\n\n/**\n * If muteIntensity is specified, sets muteIntensity of the chart and returns the instance itself. MuteIntensity determines opacity of marks which is muted by {@link Core#mute .mute} method. If muteIntensity is not specified, returns the instance's current width.\n * @function\n * @example\n * core.muteIntensity(0.5); //sets a custom width;\n * core.muteIntensity(); //returns the current width;\n * @param {number} [muteIntensity=0.3] opacity of muted marks\n * @return {(muteIntensity|Core)}\n */\nCore.prototype.muteIntensity = attrFunc('muteIntensity');\nCore.prototype.regionName = attrFunc('regionName');\n\n/**\n * If width is specified, sets width of the container and returns the instance itself. The unit of width is a pixel. If width is not specified, returns the instance's current width.\n * @function\n * @example\n * core.width(600); //sets a custom width;\n * core.width(); //returns the current width;\n * @param {number} [width=640] width of the container\n * @return {(width|Core)}\n */\nCore.prototype.width = attrFunc('width');\nCore.prototype.zeroOffset = attrFunc('zeroOffset');\nCore.prototype.zeroMargin = attrFunc('zeroMargin');\n\nCore.prototype.aggregate = aggregate;\nCore.prototype.aggregateMixed = aggregateMixed;\nCore.prototype.autoResize = autoResize;\nCore.prototype.color = color;\nCore.prototype.colorDomain = colorDomain;\nCore.prototype.condition = condition;\nCore.prototype.demute = demute;\nCore.prototype.demuteLegend = demuteLegend;\nCore.prototype.demuteNodes = demuteNodes;\nCore.prototype.demuteRegions = demuteRegions;\nCore.prototype.dimension = dimension;\nCore.prototype.dimensions = dimensions;\nCore.prototype.domain = domain;\nCore.prototype.filterNodes = filterNodes;\nCore.prototype.filterRegions = filterRegions;\nCore.prototype.hideTooltip = hideTooltip;\nCore.prototype.innerSize = innerSize;\nCore.prototype.legend = legend;\nCore.prototype.limitKeys = limitKeys;\nCore.prototype.limitRows = limitRows;\nCore.prototype.margin = margin;\nCore.prototype.mixedDimension = mixedDimension;\nCore.prototype.measure = measure;\nCore.prototype.measureName = measureName;\nCore.prototype.measures = measures;\nCore.prototype.mute = mute;\nCore.prototype.muteLegend = muteLegend;\nCore.prototype.muteNodes = muteNodes;\nCore.prototype.muteRegions = muteRegions;\nCore.prototype.nodeName = nodeName;\nCore.prototype.nodes = nodes;\nCore.prototype.offset = offset;\nCore.prototype.parent = parent;\nCore.prototype.process = process;\nCore.prototype.tooltip = tooltip;\nCore.prototype.scale = scale;\nCore.prototype.styleFont = styleFont;\nCore.prototype.rebindOnMethod = rebindOnMethod;\nCore.prototype.regions = regions;\nCore.prototype.remove = remove;\nCore.prototype.render = render;\nCore.prototype.renderCanvas = renderCanvas;\nCore.prototype.renderFrame = renderFrame;\nCore.prototype.renderLegend = renderLegend;\nCore.prototype.renderRegion = renderRegion;\nCore.prototype.renderSpectrum = renderSpectrum;\nCore.prototype.renderTooltip = renderTooltip;\nCore.prototype.reset = reset;\nCore.prototype.resetTooltip = resetTooltip;\nCore.prototype.size = size;\nCore.prototype.setAttrs = setAttrs;\nCore.prototype.setCustomDomain = setCustomDomain;\nCore.prototype.showTooltip = showTooltip;\nCore.prototype.updateColorScale = updateColorScale;\n\nexport default Core;\nexport {continousColorScheme};\n","import {select, axisTop, axisRight, axisBottom, axisLeft, format, timeFormat, max, min, set, transition, zip} from 'd3';\nimport {className, labelFormat, setMethodsFromAttrs, getUniqueId, zeroPoint} from './util';\nimport {countMeasure, countMeasureTitle} from './measureField';\nimport interval from '../modules/interval';\n\nconst offsetThickness = 14;\nconst verticalAxisThickness = 18; \nconst horizontalAxisThickness = 18;\nconst tickFormatForOrdinal = labelFormat;\nconst targets = ['x', 'y'];\nconst orients = ['top', 'right', 'bottom', 'left'];\nconst SIPrefixFormat = format('.2s');\nconst commaFormat = format(',');\nconst defaultFont = {\n  'font-family': 'sans-serif',\n  'font-size': 10,\n  'font-weight': 'normal',\n  'font-style': 'normal',\n  'letter-spacing': '0.1px'\n};\nconst titleSize = 13;\nconst domainColor = '#c0ccda';\nconst titleColor = '#485465';\nconst gridColor = '#e7ebef';\nconst zerocolor = '#aaa';\nconst defaultTickRotate = 45;\nconst smallModeThreshold = 300;\nconst _attrs = {\n  autoTickFormat: true,\n  autoRotate: true,\n  color: '#7b92ae',\n  field: null,\n  facet : null,\n  font: defaultFont,\n  format: null,\n  grid: false,\n  gridSize : 0,\n  interval: null,\n  orient: orients[2],\n  scale: null,\n  showTitle: true,\n  showDomain: true,\n  showTicks: true,\n  thickness: 40,\n  target: targets[0],\n  tickFormat: null,\n  tickFormatSub: null,\n  title: '',\n  titleOrient: null,\n  ticks: null,\n  tickRotate: 0,\n  tickSize: 0,\n  tickPadding: 4,\n  transition: null,\n  x: 0,\n  y: 0,\n}\n\nclass Axis {\n  constructor() {\n    this.__attrs__ = JSON.parse(JSON.stringify(_attrs));\n    this.__execs__ = {axis:null, canvas: null, rotated: false};\n  }\n}\n\nfunction _axis() {\n  return new Axis();\n}\n\nfunction isHorizontal() {\n  return this.orient() === 'bottom' || this.orient() === 'top';\n}\n\nfunction _generator () {\n  let orient = this.orient();\n  let scale = this.scale();\n  let axis;\n  \n  if (orient === orients[0]) axis = axisTop();\n  else if (orient === orients[1]) axis = axisRight();\n  else if (orient === orients[3]) axis = axisLeft();\n  else axis = axisBottom();\n  this.__execs__.axis = axis;\n\n  if (scale) axis.scale(scale);\n  if (this.transition()) {\n    let trans = this.transition();\n    this.__execs__.transition = transition().duration(trans.duration).delay(trans.delay);\n  }\n}\n\nfunction _grid (selection, zoomed) {\n  if(this.grid() && this.gridSize() > 0) {\n    let axis = this.__execs__.axis;\n    let gridSize = this.gridSize();\n    let isHorizontal = this.isHorizontal();\n    let orient = this.orient();\n    let target = (isHorizontal ? 'y2' : 'x2');\n    let sign = (orient === 'left' || orient === 'top') ? 1 : -1;\n    let scale = this.scale();\n    let gridLine = selection.selectAll('.grid')\n      .data(scale.ticks(axis._tickNumber).map(d => scale(d)));\n    gridLine.exit().remove();\n    let gridLineEnter = gridLine.enter().append('g')\n      .attr('class', 'grid')\n    gridLineEnter.append('line')\n      .style('stroke', gridColor);\n    gridLine = gridLineEnter.merge(gridLine);\n    if(this.transition() && !zoomed) {\n      gridLine = gridLine.transition(this.__execs__.transition);\n    }\n    gridLine.attr('transform', d => 'translate(' + (isHorizontal? [d+0.5, 0]: [0, d-0.5]) + ')')\n      .select('line')\n      .attr(target, sign * gridSize);\n  } else {\n    selection.selectAll('.grid').remove();\n  }\n}\n\nfunction _overflow (selection) {\n  const scale = this.scale();\n  const orient = this.orient();\n  let tickStepSize = (() => {\n    if (scale.bandwidth) {\n      let bandwidth = scale.bandwidth();\n      if (bandwidth === 0) return scale.step();\n      return scale.bandwidth();\n    } else {\n      let ticks = scale.ticks();\n      if (ticks.length > 1) {\n        return Math.abs(scale(ticks[1]) - scale(ticks[0]));\n      } else {\n        return Math.abs(scale.range[scale.range().length-1] - scale.range()[0]);\n      }\n    }\n  })();\n  let _generateId = () => {\n    let prefix = 'axis-' + this.target() + '-' + this.orient() + '-';\n    return getUniqueId(prefix);\n  }\n  let _tooltip = () => {\n    selection.selectAll('.tick')\n      .each(function() {\n        let sel = select(this); \n        let t = sel.select('title');\n        if (t.empty()) t = sel.insert('title', ':first-child');\n        let text = sel.select('text').text();\n        t.text(text);\n      })\n  }\n  let _clipPath = () => {\n    let defs = selection.select('defs')\n    if (defs.empty()) {\n      let _id = _generateId(); \n      defs = selection.append('defs');\n      defs.append('clipPath')\n        .attr('id', _id)\n        .append('rect');\n      selection.selectAll('.tick')\n        .attr('clip-path', 'url(#' + _id +')');\n    }\n    const rectPos = {};\n    let scaleDist = Math.abs(scale.range()[1] - scale.range()[0]);\n    if (scaleDist === 0) scaleDist = scale.range()[0] * 2;\n    if (this.isHorizontal()) {\n      rectPos.width = scaleDist;\n      rectPos.height = this.thickness() - (this.showTitle() ? this.font()['font-size'] * 1.71 : 0);\n      rectPos.x = -rectPos.width/2;\n      rectPos.y = orient === 'bottom' ? 0 : -rectPos.height;\n    } else {\n      rectPos.width = this.thickness() ;\n      rectPos.height = scaleDist;\n      rectPos.x = orient === 'left' ? -rectPos.width : 0;\n      rectPos.y = -rectPos.height/2;\n    }\n    defs.select('clipPath').select('rect').datum(rectPos)\n      .attr('x', d => d.x).attr('y', d => d.y)\n      .attr('width', d => d.width).attr('height', d => d.height);\n  }\n  let _hidden = () => {\n    let showTicks = this.showTicks();\n    let isSmall = tickStepSize < this.font()['font-size'] * (this.isHorizontal() ? 1 : 0.72);\n    selection.selectAll('.tick')\n      .style('visibility', isSmall && scale.bandwidth ? 'hidden': (showTicks ? 'inherit' : 'hidden'));\n  }\n  let _rotate = () => {\n    let tickPadding = this.tickPadding();\n    let tickRotate = this.tickRotate();\n    let isHorizontal = this.isHorizontal();\n    let isPositive = this.orient() === 'right' || this.orient() === 'top';\n    let _rotateFunc =  (_selection, _tickRotate = tickRotate) => {\n      let padding;\n      if(isHorizontal) padding = [0, tickPadding/2];\n      else padding = [_selection.attr('x') * .71, 0];\n      if (this.transition()) _selection = _selection.transition().duration(180)\n      _selection\n        .attr('transform', 'translate(' + padding+') rotate('+ (_tickRotate * -1)+')').attr('text-anchor', isHorizontal ? 'start': 'end')\n        .attr('text-anchor', isPositive ? 'start' : 'end');\n    }\n    \n    if (tickRotate !== 0) {\n      selection.selectAll('.tick > text')\n        .call(_rotateFunc);\n      this.__execs__.rotate = true;\n      return;\n    } else if (this.autoRotate()) {\n      let tick = selection.selectAll('.tick');\n      let totalW = 0;\n      tick.each(function() {\n        let w = this.getBBox().width;\n        if (select(this).selectAll('text').classed(className('rotated'))) w *= 1.25;\n        totalW += w;\n      })\n      let isOver = totalW >= Math.abs(scale.range()[1] - scale.range()[0]);\n      if (isHorizontal) {\n        if (isOver) {\n          tick.selectAll('text')\n            .classed(className('rotated'), true)\n            .call(_rotateFunc, defaultTickRotate);\n        } else {\n          let rotated = tick.selectAll('text' + className('rotated', true))\n            .classed(className('rotated'), false)\n          if(this.transition()) rotated = rotated.transition().duration(180);\n          rotated.attr('transform', null).attr('text-anchor', 'middle');\n        }\n      } \n    }\n  }\n  _tooltip();\n  _clipPath();\n  _rotate();\n  _hidden();\n}\n\nfunction tickFormatForContinious(domain) {\n  if (typeof domain[0] === 'number' && domain[1] >= 100000 && Math.abs(domain[1] - domain[0]) >= 1000) return SIPrefixFormat; //axis.tickFormat(SIPrefixFormat);\n  else return commaFormat;\n}\n\nfunction _format() { //apply before rendering\n  const axis = this.__execs__.axis;\n  const tickFormat = this.tickFormat();\n  const scale = this.scale();\n  if (tickFormat) { \n    if (typeof tickFormat === 'function')  axis.tickFormat(function(d){\n      if (typeof d === 'string' && isNaN(d)) return d;\n      return tickFormat(d);\n    });\n    else if (scale.domain()[0] instanceof Date || scale._scaleType === 'time') axis.tickFormat(timeFormat(tickFormat));\n    else axis.tickFormat(format(tickFormat));\n  } else if (this.autoTickFormat()) {\n    if (scale.invert && scale.domain()[0] instanceof Date) { return; }\n    let domain = scale.domain();\n    if (scale.invert && !scale.padding) { //apply auto-formatting\n      axis.tickFormat(tickFormatForContinious(domain));\n    } else {\n      axis.tickFormat(d => labelFormat(d));\n    }\n  } \n}\nfunction tickNumber(scale, dist) {\n  let range = scale.range();\n  dist = dist || Math.abs(range[1]- range[0]);\n  let tNumber = scale.ticks().length;\n  if (dist<= smallModeThreshold /2 ) {\n    tNumber = 2;\n  } else if (dist <= smallModeThreshold) {\n    tNumber = 5;\n  } else {\n    tNumber = Math.round(tNumber / 2);\n  }\n  return tNumber;\n}\nfunction _preStyle(selection) { //TODO : tickSize and font-style\n  let axis = this.__execs__.axis;\n  let font = this.font();\n  let scale = this.scale();\n  axis.tickSize(this.tickSize())\n    .tickPadding(this.tickPadding() + (this.isHorizontal() ? 4 : 2));\n  if (this.ticks()) {\n    axis.ticks(this.ticks());\n    axis._tickNumber = this.ticks();\n  } else if (scale.invert) { \n    if (scale._scaleType === 'time' || scale.domain()[0] instanceof Date) { //scale's type is time \n      let intervalType = interval[this.interval()];\n      if (intervalType && !this.autoTickFormat() && this.tickFormat()) { //user interval\n        axis.ticks(intervalType);\n        axis._tickNumber = scale.ticks(intervalType).length;\n      } else { //when has no interval use scale ticks length;\n        let tickFormat = this.tickFormat();\n        if (tickFormat) {\n          axis._tickNumber = set(scale.ticks().map(tickFormat)).values().length;\n          axis.ticks(axis._tickNumber);\n        } else {\n          axis._tickNumber = scale.ticks().length;\n        }\n      }\n    } else {\n      let tNumber = tickNumber(scale);\n      axis.ticks(tNumber);\n      axis._tickNumber = tNumber;\n    }\n  } else {\n    axis._tickNumber = scale.domain().length;\n  }\n  for (var k in font) {\n    selection.style(k, (k === 'font-size' ? font[k] + 'px' : font[k]));\n  }\n}\n\nfunction _render(selection, zoomed) {\n  let axis = this.__execs__.axis;\n  if (selection.selectAll('.domain').size() ===0) {\n    selection.attr('transform', 'translate(' +[this.x(), this.y()] + ')');\n  }\n    \n  if(this.transition() && !zoomed) {\n    selection.transition(this.__execs__.transition).attr('transform', 'translate(' +[this.x(), this.y()] + ')')\n      .call((selection) => {\n        axis(selection);\n      })\n      .on('end', () => {\n        _overflow.call(this, selection);\n      })\n  } else {\n    selection.attr('transform', 'translate(' +[this.x(), this.y()] + ')')\n      .call(axis);\n    _overflow.call(this, selection);\n  }\n}\n\nfunction _renderSubFormat(selection) {\n  const scale = this.scale();\n  if (this.showTicks() && this.tickFormatSub() && scale.invert) {\n    const sf = this.tickFormatSub();\n    const transition = this.__execs__.transition;\n    const updateFunc = (selection) => selection.attr('x', d => scale(d[0]))\n      .attr('y', this.thickness())\n      .attr('dy', '-3em');\n\n    const existing = [];\n    const ticks = scale.ticks(scale._tickNumber);\n    const tickFormats = ticks.map(scale.tickFormat(scale._tickNumber, sf))\n      .map(d => {\n        if (existing.indexOf(d) < 0 ) {\n          existing.push(d);\n          return d;\n        } else {\n          return '';\n        }\n      });\n    const tickData = zip(ticks, tickFormats).filter(d => d[1] !== '');\n    let subTick = selection.selectAll('.tick-sub-text')\n      .data(tickData, d => d[1]);\n    subTick.exit().transition(transition)\n      .attr('opacity', 0)\n      .remove();\n\n    subTick = subTick.enter().append('text')\n      .attr('class', 'tick-sub-text')\n      .text(d => d[1])\n      .attr('opacity', 0)\n      .call(updateFunc)\n      .merge(subTick)\n    \n    subTick.transition(transition)\n      .call(updateFunc)\n      .attr('opacity', 1);\n    \n  } else {\n    selection.selectAll('.tick-sub-text').remove();\n  }\n}\nfunction _style(selection) {\n  const tick = selection.selectAll('.tick');\n  tick.select('line').style('stroke', this.color());\n  tick.select('text').style('fill', this.color());\n  selection.select('.domain').style('stroke', domainColor)\n    .style('shape-rendering', 'crispEdges')\n    .style('stroke-width', '1px')\n    .style('visibility', this.showDomain() ? 'visible' : 'hidden'); //showDomain\n  selection.selectAll('.tick-sub-text')\n    .style('fill', this.color());\n}\n\nfunction _title(selection) {\n  let that = this;\n  let _textTransform = function(selection) {\n    if (that.isHorizontal()) {\n      selection.attr('dy', orient === 'bottom' ? '-1em' : '.71em')\n    } else {\n      if (titleOrient === 'bottom' || titleOrient === 'top') {\n        selection\n          .attr('dy', titleOrient === 'bottom' ? '2em' : '-1em');\n      } \n    }\n  }\n  let _transform = function(selection) {\n    if (that.isHorizontal()) {\n      let padding = 0;\n      selection.attr('transform', 'translate(' +[halfPos, orient === 'bottom' ? that.thickness() - padding : -that.thickness() + padding]+')')\n    } else {\n      if (titleOrient === 'bottom' || titleOrient === 'top') {\n        selection.attr('transform', 'translate(' + [0, titleOrient === 'bottom' ? max(scale.range()) : min(scale.range())] +')');\n      } else {\n        selection.attr('transform', 'translate(' + [that.thickness() * (orient === 'left' ? -1: 1), halfPos] +') ' + (orient === 'left' ? 'rotate(90)' : 'rotate(-90)'));\n      }\n    }\n  }\n  let title =  this.title() || this.field();\n  if (!title) return ;\n  title = title.localeCompare(countMeasure.field) === 0 ? countMeasureTitle : title;\n  if (!this.showTitle()){\n    selection.selectAll('.title').remove();\n    return;\n  } \n  let orient = this.orient();\n  let titleOrient = this.titleOrient() || orient;\n  let scale = this.scale();\n  let halfPos = (scale.range()[0] + scale.range()[1]) /2;\n  \n  let titleSel = selection.selectAll('.title')\n    .data([title]);\n  titleSel.exit().remove();\n  let titleSelEnter = titleSel.enter().append('g')\n    .attr('class', 'title')\n    .call(_transform);\n  titleSelEnter.append('text')\n    .attr('text-anchor', 'middle')\n    .style('font-size', titleSize + 'px')\n    .style('fill', titleColor)\n    .call(_textTransform);\n    \n  titleSel = titleSelEnter.merge(titleSel)\n  titleSel.select('text')\n    .text(title);\n  if (this.transition()) {\n    titleSel.transition(this.__execs__.transition)\n      .call(_transform);\n  }\n}\n\nfunction _zero (selection, zoomed) {\n  let scale = this.scale();\n  if (scale.invert && zeroPoint(scale.domain())) {\n    let gridSize = this.gridSize();\n    let isHorizontal = this.isHorizontal();\n    let orient = this.orient();\n    let target = (isHorizontal ? 'y2' : 'x2');\n    let sign = (orient === 'left' || orient === 'top') ? 1 : -1;\n    let scale = this.scale();\n    let gridLineTransforms = [];\n    selection.selectAll('.tick').filter(d => d === 0)\n      .each(function(d) {\n        gridLineTransforms.push(scale(d));\n      });\n    let gridLine = selection.selectAll('.zero.grid')\n      .data(gridLineTransforms)\n    gridLine.exit().remove();\n    let gridLineEnter = gridLine.enter().append('g')\n      .attr('class', 'grid zero')\n    gridLineEnter.append('line')\n      .style('stroke', zerocolor);\n    gridLine = gridLineEnter.merge(gridLine);\n    if(this.transition() && !zoomed) {\n      gridLine = gridLine.transition(this.__execs__.transition);\n    }\n    gridLine.attr('transform', d => 'translate(' + (isHorizontal? [d+0.5, 0]: [0, d-0.5]) + ')')\n      .select('line')\n      .attr(target, sign * gridSize);\n  }\n}\n\nfunction facet (orient) {\n  if (!arguments.length) return this.__attrs__.facet;\n  if (orients.includes(orient)) this.__attrs__.facet = {orient: orient};\n  else this.__attrs__.facet = {orient: orients[0]};\n  return this;\n}\n\nfunction update() {\n\n}\nfunction render(selection, zoomed = false) {\n  if (selection) {\n    this.__execs__.canvas = selection;\n  } else if(this.__execs__.canvas) {\n    selection = this.__execs__.canvas;\n  } else {\n    return ;\n  }\n  _generator.call(this);\n  _format.call(this);\n  _preStyle.call(this, selection);\n  _render.call(this, selection, zoomed);\n  _renderSubFormat.call(this, selection);\n  _style.call(this, selection);\n  _grid.call(this, selection, zoomed);\n  _zero.call(this,selection, zoomed);\n  _title.call(this, selection);\n}\nAxis.prototype.facet = facet;\nAxis.prototype.render = render;\nAxis.prototype.update = update;\nAxis.prototype.isHorizontal = isHorizontal;\n\nsetMethodsFromAttrs(Axis, _attrs);\n\nexport default _axis;\nexport {\n  defaultFont, \n  verticalAxisThickness, \n  horizontalAxisThickness, \n  offsetThickness, \n  tickFormatForContinious, \n  tickFormatForOrdinal,\n  tickNumber\n};","import {offsetThickness, verticalAxisThickness, horizontalAxisThickness} from '../../modules/axis';\n\nfunction setVal(axis) {\n  let val = Object.assign({},axis);\n  if (val.orient && val.orient === 'x') { //legacy : 기존에는 orient에 값 넘기는 경우 있었음\n    val.target = val.orient;\n    val.orient = 'bottom';\n  } else if (val.orient && val.orient === 'y') {\n    val.target = val.orient;\n    val.orient = 'left';\n  } \n\n  let isHorizontal = val.target === 'x';\n  if (!('showDomain' in val)) val.showDomain = true;\n  if (!('showTicks' in val)) val.showTicks = true;\n  if (!('showTitle' in val)) val.showTitle = true;\n  if (!('orient' in val)) val.orient = (isHorizontal ? 'bottom' : 'left'); // x축일 경우 기본 bottom;\n  if (!('thickness' in val)) {\n    val.thickness = (isHorizontal ? horizontalAxisThickness : verticalAxisThickness);\n    val.thickness += val.tickPadding ? val.tickPadding : 0;\n    val.thickness += val.showTitle ? offsetThickness * 2: 0;\n    val.thickness += val.showTicks ? offsetThickness : 0;\n    val.defaultThickness = val.thickness;\n  }\n  if (!('autoTickFormat' in val)) val.autoTickFormat = true;\n  \n  return val;\n}\n\n/**\n * If axis is specified, append it to axis settings and returns the instance itself. If axis is a string, it refers axis's target(x or y) and will be converted to an object. If axis is an array of objects, replaces existing axis settings. If axis is not specified, returns the current axis settings. \n *  If axis exists and adding is false, it removes the existing axis settign which has the same target of axis.\n * @memberOf RectLinear#\n * @function\n * @example\n * rectLinear.axis('x') // sets X-axis on the bottom side\n *  .axis({target: 'y', orient: 'right', showTicks: false, title: 'Custom Axis Y'}) // sets Y-axis on the right side\n * rectLinear.axis('y', false) // removes existing Y-axis\n * @param {string|object|Object[]} [axis] \n * @param {string} axis.target=x target scale's name\n * @param {string} [axis.orient=bottom] top|right|bottom|left\n * @param {number} [axis.thickness=18]\n * @param {boolean} [axis.showDomain=true]\n * @param {boolean} [axis.showticks=true]\n * @param {boolean} [axis.showTitle=true]\n * @param {string} [axis.title]\n * @param {string} [axis.titleOrient] top|right|bottom|left\n * @param {boolean} [axis.autoTickFormat] if is true, not apply dimension and measure's format.\n * @param {boolean} [adding=true] if adding is false, removes existing the axis specified target.\n * @return {axis|RectLinear}\n */\nfunction axis (axis, adding = true) { \n  //__attrs__.axis{target, orient, thickness} array includes axis settings\n  //__execs__.axis object inclues axis orient\n  let val;\n  if (!arguments.length) return this.__attrs__.axis; //only used in facet charts\n  if (Array.isArray(axis)) { //only used in facet charts\n    this.__attrs__.axis = axis.map(setVal);\n    axis.forEach(d=> this.__execs__.axis[d.target] = {});\n    return this;\n  } else if (typeof axis === 'string') {\n    val = {target: axis};\n    val = setVal(val);\n  } else if (typeof axis === 'object') {\n    val = Object.assign({},axis);\n    val = setVal(val);\n  }\n  let findIndex = this.__attrs__.axis.findIndex(d => d.target === val.target && d.orient === val.orient); //find the axis that has the same target and orient\n  if (adding) {\n    if (findIndex >= 0) {\n      this.__attrs__.axis.splice(findIndex, 1, val);\n    } else {\n      this.__attrs__.axis.push(val);\n    }\n    if (!this.__execs__.axis[val.target]) this.__execs__.axis[val.target] = {}; //enroll axis holder for the target\n  } else {\n    if (findIndex >= 0) {\n      this.__attrs__.axis.splice(findIndex, 1);\n    }\n  }\n  \n  return this;\n}\n\nexport default axis;","import axis from '../../modules/axis';\n\nfunction _axisExec (target, field, axis) {\n  if(!arguments.length) return this.__execs__.axis;\n  this.__execs__.axis[target] = this.__execs__.axis[target] || {}\n  this.__execs__.axis[target][field] = axis; // => axis.x.field \n  return this;\n}\n\nfunction _set(source, target, key) {\n  if (source[key] !== undefined) target[key](source[key]);\n}\n/**\n * generates new Axis instance according from an {@link RectLinear.#axis axis} setting\n * @memberOf Core#\n * @function\n * @private\n * @param {d3Scale} scale \n * @param {object} axisSetting\n * @return {Axis}\n */\nfunction axisDefault(scale, axisSetting) {\n  let axisTitle = this.axisTitles().filter(\n    d => d.target === axisSetting.target && (!d.field || d.field === axisSetting.field) && (!d.shape || d.shape === axisSetting.shape)\n  );\n  if (axisTitle.length > 0) axisTitle = axisTitle[0];\n  else axisTitle = null;\n  let curAxis = axis();\n  curAxis.scale(scale)\n    .target(axisSetting.target)\n    .field(axisSetting.field)\n    .orient(axisSetting.orient)\n    .tickFormatSub(axisSetting.tickFormatSub)\n    .tickFormat(axisSetting.tickFormat)\n    .title(axisTitle ? axisTitle.title : axisSetting.title)\n    .titleOrient(axisSetting.titleOrient)\n    .autoTickFormat(axisSetting.autoTickFormat)\n    .transition(this.transition());\n  if ( scale._field) {\n    let field = scale._field;\n    if (field.interval && field.interval()) curAxis.interval(field.interval());\n    if (field.format && field.format() && !axisSetting.autoTickFormat) curAxis.tickFormat(field.format());\n    else if (axisSetting.autoTickFormat) curAxis.tickFormat(null);\n  }\n  else curAxis.interval(null);\n  ['tickPadding', 'thickness', 'showTitle', 'showDomain', 'showTicks'].forEach(k => _set(axisSetting, curAxis, k));\n  _axisExec.call(this, axisSetting.target, axisSetting.field, curAxis);\n  return curAxis;\n}\n\nexport default axisDefault;","/**\n * @memberOf RectLinear#\n * @private\n */\nexport default function() {\n  return this.axis().find(d => d.target === 'x');\n}","/**\n * @memberOf RectLinear#\n * @private\n */\nexport default function() {\n  return this.axis().find(d => d.target === 'y');\n}","/**\n * sets a custom title of an axis. Filters axes, returning the axis that has the same target and field whith targetAndField, then sets or remove it's title. If title is false the selected axis's custom title will be removed. Actually, .axisTitle method manipulates {@link RectLinear#axisTitles axisTitles}.\n * @memberOf RectLinear#\n * @function\n * @example\n * rectLinear.axisTitle('x', 'custom Axis X')\n * rectLinear.axisTitle('y.Sales', 'custom Axis Y')\n * rectLinear.axisTitle({target:'y', field: 'Sales'}, 'custom Axis X')\n * rectLinear.axisTitle('x', false);\n * @param {string|object} targetAndField\n * @param {string} targetAndField.target\n * @param {string} [targetAndField.field]\n * @param {string} title\n * @return {RectLinear}\n */\nfunction axisTitle(targetAndField, title) {\n  let target;\n  if (typeof targetAndField === 'string') {\n    let splited = targetAndField.split('.');\n    target = {target: splited[0], field: splited.length >= 2 ? splited.slice(1).join('.'): null};\n  } else if (typeof targetAndField === 'object') {\n    target = targetAndField;\n  } else {\n    throw new Error(`.axisTitle: ${targetAndField} is not unavailable`);\n  }\n  \n  let titles = this.axisTitles();\n  let exist = -1;\n  \n  for (let i= 0; i < titles.length; i++) {\n    let t = titles[i];\n    if (t.field === target.field && t.target === target.target) {\n      exist = i;\n      break;\n    }\n  }\n  if (title) {\n    let result = Object.assign({}, target);\n    result.title = title;\n    if (exist >= 0) titles.splice(exist, 1, result);\n    else titles.push(result);\n  } else {\n    titles.splice(exist, 1);\n  }\n  return this;\n}\n\nexport default axisTitle;","import {select} from 'd3';\nimport {className} from '../../modules/util';\n\n/**\n * @memberOf RectLinear#\n * @private\n */\nfunction renderAxis() {\n  let canvas = this.__execs__.canvas;\n  let axisObj = this.__execs__.axis;\n  let _appendAxis = function(selection, axis, targetNum) {\n    let cName = 'axis target-' + axis.target() + ' orient-' + axis.orient() + ' targetNum-' + targetNum ; \n    let axisSel = selection.selectAll(className(cName, true)) \n      .data([targetNum]);\n    axisSel.exit().remove();\n    axisSel = axisSel.enter().insert('g', ':first-child')\n      .attr('class', className(cName)) \n      .merge(axisSel)\n      .classed(className('active'), true);\n    axis.render(axisSel);\n  }\n  let axisG = canvas.selectAll(className('axis', true));\n  axisG.classed(className('active'), false);\n  for (let target in axisObj) {\n    if (axisObj.hasOwnProperty(target)) {\n      let targetNum = 0;\n      for (let field in axisObj[target]) {\n        if(axisObj[target].hasOwnProperty(field)) {\n          let axis = axisObj[target][field];\n          if (axis.facet()) {\n            canvas.selectAll(this.regionName()).call(_appendAxis, axis, targetNum);\n          } else {\n            canvas.call(_appendAxis, axis, targetNum);\n          }\n        }\n        targetNum +=1;\n      }\n      canvas.selectAll(className('axis target-' + target, true))\n        .filter(function(d){\n          return d >= targetNum;\n        }).remove(); //remove > targetNum\n    }\n  }\n  axisG.filter(function() {\n    return !select(this).classed(className('active'));\n  }).remove();\n  \n  return this;\n}\n\n\nexport default renderAxis;","import {defaultFont, offsetThickness, tickFormatForContinious, tickFormatForOrdinal} from '../../modules/axis';\nimport {className} from '../../modules/util';\nimport interval from '../../modules/interval';\n\n/**\n * @memberOf RectLinear#\n * @private\n */\nfunction thickness(axisSetting, scale, isHorizontal = true, isOrdinal = true) {\n  let hidden = this.__execs__.hidden;\n  if (!(axisSetting && axisSetting.showTicks) || (axisSetting && axisSetting.autoTickFormat)) return;\n  \n  let font = axisSetting.font || defaultFont;\n  let tickFormat = axisSetting.tickFormat || (isOrdinal ? tickFormatForOrdinal : (axisSetting.autoTickFormat && tickFormatForContinious(scale.domain())));\n  let ticks = isOrdinal ? scale.domain() : scale.ticks();\n  if (scale._field) {\n    let field = scale._field;\n    if(field.format() && !axisSetting.autoTickFormat) tickFormat = field.format();\n    if(field.interval && field.interval()) ticks = scale.ticks(interval[scale._field.interval()]);\n  }\n  let max = -1;\n  let isOver = false;\n  let innerSize = this.innerSize();\n  let step = isHorizontal ? (innerSize.width / ticks.length ) : 0;\n  let tick = hidden.selectAll(className('tick', true))\n      .data(tickFormat ? ticks.map(tickFormat) : ticks)\n  tick = tick.enter().append('text')\n      .attr('class', className('tick'))\n      .merge(tick)\n      .text(d => d);\n  this.styleFont(tick, font);\n  tick.each(function() {\n    let w = this.getBBox().width;\n    if (w > max) max = w;\n    if (w > step) isOver = true;\n  });\n  max = max+ offsetThickness;\n  \n  if (axisSetting.tickPadding) max += axisSetting.tickPadding;\n  if (axisSetting.showTitle) max += offsetThickness;\n  if (axisSetting.thickness) max += offsetThickness;\n  \n  if (axisSetting.defaultThickness) {\n    if (isOver && max > axisSetting.defaultThickness) {\n      axisSetting.thickness = max;\n    } else if (axisSetting.defaultThickness < axisSetting.thickness) {\n      axisSetting.thickness = axisSetting.defaultThickness;\n    } \n  } \n\n  if (axisSetting.target === 'x') {\n    axisSetting.thickness = Math.min(axisSetting.thickness, this.height() * 0.5);\n  } else {\n    axisSetting.thickness = Math.min(axisSetting.thickness, this.width() * 0.8);\n  }\n  tick.remove();\n  axisSetting.thickness = Math.round(axisSetting.thickness);\n  return axisSetting.thickness;\n}\n\nexport default thickness;","import Core from '../core';\nimport {attrFunc} from '../../modules/util';\nimport axis from './axis';\nimport axisDefault from './axisDefault';\nimport axisX from './axisX';\nimport axisY from './axisY';\nimport axisTitle from './axisTitle';\nimport renderAxis from './renderAxis';\nimport thickness from './thickness';\n\nconst _attrs = {\n  axis: [], \n  axisTitles: [],\n  grid: false,\n  noAxisOffset: false, //assume that no axis offset\n}\n/**\n * @class RectLinear\n * @augments Core\n */\nclass RectLinear extends Core {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n  }\n  /**\n   * @override\n   */\n  offset() {  \n    let offset = super.offset();\n    offset = Object.assign({}, offset);\n    let axisSetting = this.axis();\n    if (!this.noAxisOffset()) {\n      axisSetting.forEach(function(at) {\n        offset[at.orient] += at.thickness;\n      })\n    }\n    return offset;\n  }\n}\n\n/**\n * set axis titles directly.\n * @function\n * @example\n * rectLinear.axisTitles({target:'x', title: 'custom title X'});\n * @param {Object[]} [axisTitles] \n * @param {string} axisTitles[].target target scale name of the axis(x|y)\n * @param {string} axisTitles[].title  title to show\n * @param {string} [axisTitles[].field] target field name of the axis\n * @return {(axisTitles|RectLinear)}\n */\nRectLinear.prototype.axisTitles = attrFunc('axisTitles');\n\n/**\n * set and get all axis settings\n * @function\n * @private \n * @return {axisToggle[]}\n */\nRectLinear.prototype.axisToggle = attrFunc('axisToggle');\n\n/**\n * If grid is specified, sets grid setting and returns the instance itself. If grid is true, shows grids of axes. If grid is not specified, it returns the current grid setting.\n * @function\n * @param {boolean} [grid=false] \n * @return {grid|RectLinear}\n */\nRectLinear.prototype.grid = attrFunc('grid');\n\n/**\n * If noAxisOffset is specified, sets noAxisOffset setting and returns the instance itself. If noAxisOffset is true, it doens not consider axes during calculating {@link RectLinear#offset offset}. If noAxisOffset is not specified, it returns the current noAxisOffset setting.\n * @function\n * @private\n * @param {boolean} noAxisOffset=fasle\n * @return {boolean|RectLinear}\n */\nRectLinear.prototype.noAxisOffset = attrFunc('noAxisOffset');\n\nRectLinear.prototype.axis = axis;\nRectLinear.prototype.axisX = axisX;\nRectLinear.prototype.axisY = axisY;\nRectLinear.prototype.axisDefault = axisDefault;\nRectLinear.prototype.axisTitle = axisTitle;\nRectLinear.prototype.renderAxis = renderAxis;\nRectLinear.prototype.thickness = thickness;\n\n\nexport default RectLinear;","/**\n * sets axes of facet area\n * @memberOf Facet#\n * @function\n * @private\n * \n */\nfunction axisFacet(useRegion = true) {\n  const facet = this.facet();\n  const field = this.__execs__.field;\n  const xAt = this.axisX();\n  const yAt = this.axisY();\n  const scale = this.__execs__.scale;\n  const innerSize = this.innerSize();\n  //horizontal => top d1\n  //vertical => right d1\n  if (facet.orient === 'horizontal' && xAt) {\n    field[useRegion ? 'region' : 'x'].axis(xAt);\n    xAt.orient = 'top';\n    xAt.showDomain = false;\n    this.axisDefault(scale.region, xAt);\n  } else if (facet.orient === 'vertical' && yAt) {\n    field[useRegion ? 'region' : 'x'].axis(yAt);\n    yAt.orient = 'right';\n    yAt.showDomain = false;\n    this.axisDefault(scale.region, yAt).x(innerSize.width);\n  }\n  \n  return this;\n}\n\nexport default axisFacet;","const orients = ['vertical', 'horizontal'];\n/**\n * If facet is specified, sets the facet settings and returns the instance itself. If is true, renders vertical oriented partitions. If is a string or object, it changes the orient of partitions. If is false, renders in the default way. If facet is not specified, returns the instance's current facet setting.\n * @memberOf Facet#\n * @function\n * @example\n * facet.facet(true) // renders vertical partitions\n * facet.facet('horizontal')\n * facet.facet({orient: 'vertical'})\n * facet.facet() // returns the current setting\n * @param {boolean|string|object} [facet=false] (false|true|vertical|horizontal) \n * @param {string} [facet.orient=vertical]\n * @return {facet|Facet}\n */\nfunction facet(facet=false) {\n  if (!arguments.length) return this.__attrs__.facet;\n  if (!facet) this.__attrs__.facet = false;\n  else if (orients.includes(facet)) this.__attrs__.facet = {orient: facet};\n  else this.__attrs__.facet = {orient: orients[0]};\n  return this;\n}\n\nexport default facet;","import RectLinear from '../rectLinear';\nimport axisFacet from './axisFacet';\nimport facet from './facet';\n\nconst _attrs = {\n  facet: false\n}\n/**\n * adds Facet features to RectLinear\n * @class Facet\n * @augments RectLinear\n */\nclass Facet extends RectLinear {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n  }\n}\nFacet.prototype.axisFacet = axisFacet;\nFacet.prototype.facet = facet;\n\nexport default Facet;","import {attrFunc, setMethodsFromAttrs} from '../../modules/util';\n\nconst _attrs = {\n  padding: 0,\n  regionPadding: 0\n}\n\nconst paddingMixin = Base => {\n  /**\n   * @mixin PaddingMixin\n   */\n  let PaddingMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n    }\n  }\n  /**\n   * sets the padding to the same padding value. Depending on the chart type and its scale type, padding will be applied differently. If padding is not specified, returns the instance's current padding value.\n   * @memberOf PaddingMixin\n   * @function\n   * @example\n   * paddingMixin.padding(0.5)\n   * paddingMixin.padding()\n   * @param {number} [padding=0]\n   * @return {padding|PaddingMixin}\n   */\n  PaddingMixin.prototype.padding = attrFunc('padding');\n    /**\n   * sets the regionPadding to the same padding value. Depending on the chart type and its scale type, it will be applied differently. If regionPadding is not specified, returns the instance's current regionPadding value.\n   * @memberOf PaddingMixin\n   * @function\n   * @example\n   * paddingMixin.regionPadding(0.5)\n   * paddingMixin.regionPadding()\n   * @param {number} [regionPadding=0]\n   * @return {regionPadding|PaddingMixin}\n   */\n  PaddingMixin.prototype.regionPadding = attrFunc('regionPadding');\n  setMethodsFromAttrs(PaddingMixin, _attrs);\n  return PaddingMixin;\n}\n\nexport default paddingMixin;","import {orders} from './index';\n\n/**\n * If is true or a comparator string(natural, ascending, descending), sort nodes according to their values. If sortByValue is not specified, returns the current sortByValue setting.\n * @memberOf SortMixin#\n * @function\n * @example \n * bar.sortByValue('ascending') //sort bars in ascending order.\n * @param {boolean|string} [sortByValue=false] (false|natural|ascending|descending)\n * @return {sortByValue|SortMixin}\n */\nfunction sortByValue (sortByValue) {\n  if (!arguments.length) return this.__attrs__.sortByValue;\n  if (sortByValue && (typeof sortByValue !== 'string' || !orders.find(o => o === sortByValue))) {\n    sortByValue = 'natural';\n  }\n  this.__attrs__.sortByValue = sortByValue;\n  return this;\n}\n\nexport default sortByValue;","import sortByValue from './sortByValue';\n\nconst orders = ['natural', 'ascending', 'descending'];\nconst _attrs = {\n  sortByValue: orders[0]\n}\n\nconst sortMixin = Base => {\n  /**\n   * @mixin SortMixin\n   */\n  let SortMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n    }\n  }\n  SortMixin.prototype.sortByValue = sortByValue;\n  return SortMixin;\n}\n\n\n\nexport default sortMixin;\nexport {orders};","import {attrFunc} from '../../modules/util';\n\nconst _attrs = {\n  stacked: false,\n  normalized: false\n}\n\nconst stackMixin = Base => {\n  /**\n   * @mixin StackMixin\n   */\n  let StackMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n    }\n  }\n  /**\n   * If stacked is true, renders stacked marks, such as stacked bar and stacked area chart. If stacked is not specified, returns the current stacked setting.\n   * @memberOf StackMixin\n   * @function\n   * @example\n   * stackMixin.stacked(true)\n   * @param {boolean} [stacked=false]\n   * @return {stacked|StackMixin}\n   */\n  StackMixin.prototype.stacked = attrFunc('stacked');\n  /**\n   * If stacked and normalized are true, renders normalized stacked marks, such as normalized stacked bar and normalized stacked area chart. If normalized is not specified, returns the current normalized setting.\n   * @memberOf StackMixin\n   * @function\n   * @example\n   * stackMixin.normalized(true)\n   * @param {boolean} [normalized=false]\n   * @return {normalized|StackMixin}\n   */\n  StackMixin.prototype.normalized = attrFunc('normalized');\n\n  return StackMixin;\n}\n\n\n\nexport default stackMixin;\n","function distDomain(scale) {\n  return scale(scale.domain()[0]) - scale(scale._lastDomain[0]);\n}\n\nexport default distDomain;\n\n\n","import timeInterval from '../../modules/interval';\n\nfunction limitViewInterval(scale, domain, isKeep=false) {\n  const viewInterval = this.viewInterval();\n  const intervalUnit = viewInterval ? viewInterval.unit : domain.length;\n  const intervalMultiple = viewInterval ? viewInterval.multiple : 1;\n  const intervalType = typeof intervalUnit;\n  scale._defaultDomain = domain;\n  if (isKeep) scale._lastDomain = scale.domain();\n  if (scale.invert) {\n    if (intervalType === 'string' && domain[0] instanceof Date) {\n      if (isKeep) {\n        domain = [\n          timeInterval[intervalUnit].offset(domain[domain.length-1], -1 * intervalMultiple), \n          domain[domain.length-1]\n        ];\n      } else {\n        domain = [\n          domain[0], \n          timeInterval[intervalUnit].offset(domain[0], 1 * intervalMultiple)\n        ];\n      }\n    } else if (intervalType === 'number') {\n      if (isKeep) {\n        domain = [domain[domain.length-1] - intervalUnit * intervalMultiple, domain[domain.length-1]];\n      } else {\n        domain = [domain[0], domain[0] + intervalUnit * intervalMultiple];\n      }\n    }\n  } else {\n    if (intervalType === 'number') {\n      if (isKeep) {\n        const dist = domain.length - intervalUnit* intervalMultiple;\n        domain = domain.slice(dist, dist + intervalUnit * intervalMultiple);\n      } else {\n        domain =  domain.slice(0,intervalUnit * intervalMultiple);\n      }\n    }\n  }\n  return domain;\n}\n\nexport default limitViewInterval;","/**\n * If stream is an object or an array of objects, appends the stream to existing data. If stream is specified, during re-rendering, it will keeps the domain interval limited by {@link StreamMixin#viewInterval viewInterval}. When re-renders chart, should use .render(true).\n * If stream is not specified, returns the existing stream.\n * @memberOf StreamMixin#\n * @function\n * @example\n * stream.stream({category:'A', sales: 100})\n *  .render(true);\n * \n * stream.stream([\n *  {category: 'D', sales: 100}, \n *  {category: 'E', sales: 200}\n * ]).render(true);\n * @param {object|Object[]} [stream=null] \n * @return {zoom|ZoomMixin}\n */\nfunction stream(stream) {\n  if (!arguments.length) return this.__execs__.stream;\n  if (stream) {\n    if (!Array.isArray(stream)) stream = [stream];\n    this.data(this.data().concat(stream));\n  }\n  this.__execs__.stream = stream;\n  return this;\n}\n\nexport default stream;","import { drag, event } from 'd3';\n\nfunction getDistPerPixel(scale) {\n  const to =  + scale.invert(scale.range()[0] + 1);\n  const from =  + scale.invert(scale.range()[0]);\n  return to - from;\n}\n\nfunction streamPanning(scale, renderFunc){\n  let streamPanning = this.__execs__.streamPanning;\n  if (!streamPanning) {\n    streamPanning = drag();\n    const field = this.__execs__.field;\n    const axisObj = this.__execs__.axis;\n    const axisX = axisObj && axisObj.x ? axisObj.x[field.x.field()] : null;\n    const canvas = this.__execs__.canvas;\n    const markProcCall = this.process().find(p => p.type === 'mark').call;\n    const tooltipProcCall = this.process().find(p => p.type === 'tooltip').call;\n    const isContinous = 'invert' in scale;\n    const renderFuncDefault = (domain, duration = 0) => {\n      scale._lastDomain = domain;\n      scale.domain(domain);\n      const transition = this.transition();\n      this.transition({duration: duration, delay: 0})\n      if (renderFunc) renderFunc();\n      markProcCall.call(this);\n      this.resetTooltip();\n      tooltipProcCall.call(this);\n      axisX.render(null, true);\n      this.transition(transition);\n    }\n    this.__execs__.streamPanning = streamPanning;\n    if (isContinous) {\n      const isTime = scale.domain()[0] instanceof Date;\n      streamPanning.on('drag.streamPanning', function() {\n        const curDomain = scale.domain();\n        const distPerPixel = getDistPerPixel(scale);\n        const defaultDomain = scale._defaultDomain;\n        const dx = event.dx * -1;\n        const dist = distPerPixel * dx;\n        const updateCondition = (dx > 0 && +curDomain[curDomain.length-1] + dist <= +defaultDomain[defaultDomain.length-1]) ||  (dx < 0 && +curDomain[0] + dist >= +defaultDomain[0]);\n        if (updateCondition) {\n          renderFuncDefault(curDomain.map(d => isTime? new Date(+d + dist): d + dist));\n        }\n      })\n    } else {\n      let accumDx = 0;\n      streamPanning.on('start.streamPanning end.streamPanning', function() {\n        accumDx = 0;\n      }).on('drag.streamPanning', function() {\n        const step = scale.step();\n        accumDx += event.dx;\n        const absAccumDx = Math.abs(accumDx);\n        if (absAccumDx >= scale.step()) {\n          const curDomain = scale.domain();\n          const defaultDomain = scale._defaultDomain;\n          const initIndex = defaultDomain.findIndex(d => d === curDomain[0]);\n          let dist = Math.floor(absAccumDx / step);\n          dist *= (accumDx > 0 ? -1 : 1);\n          const updateCondition = (dist > 0 && initIndex + curDomain.length + dist < defaultDomain.length) || (dist < 0 && initIndex + dist >= 0);\n          if (updateCondition) {\n            renderFuncDefault(defaultDomain.slice(initIndex + dist, initIndex + curDomain.length + dist), 400);\n          }\n          accumDx = 0;\n        } \n      })\n    }\n    \n    canvas.call(streamPanning);\n  }\n  return this;\n}\nexport default streamPanning;\n\n","function tempPosForOrdinalScale(key, scale) {\n  const initIndex = scale._defaultDomain.findIndex(x => x === scale.domain()[0])\n  const curIndex = scale._defaultDomain.findIndex(x => x === key);\n  let dist = curIndex - initIndex;\n  if (dist >= 0) {\n    dist = dist - scale.domain().length;\n    return scale.range()[1] + dist * scale.step();\n  } else {\n    return scale.range()[0] + dist * scale.step();\n  }\n}\nexport default tempPosForOrdinalScale;","import interval from '../../modules/interval';\n\n/**\n * If unit is number or string, limit the key domain's length or distance within the interval. If the key domain's scale is ordnial, the length of domain will be the same to unit. Also, if the scale is continous, the distance of domain will be fixed as much as unit. If unit is string, it must be a time interval. When multiple exists, it will multiply the unit.\n * If unit is not specified, returns the existing viewInterval. \n * @memberOf StreamMixin#\n * @function\n * @example\n * stream.viewInterval(1000)\n * stream.viewInterval('month', 3)\n * @param {number|string} [unit=null] \n * @param {number} [multiple=1]\n * @return {zoom|ZoomMixin}\n */\nfunction viewInterval(unit, multiple=1) {  \n  if (!arguments.length) return this.__execs__.viewInterval;\n  const type = typeof unit;\n  if (type === 'number') {\n    if (viewInterval <= 0) unit = null;\n  } else if (type === 'string') { //d3-time interval\n    if (!Object.keys(interval).includes(unit)) {\n      unit = null;\n    }\n  }\n  if (unit) this.__execs__.viewInterval = {unit, multiple}\n  else this.__execs__.viewInterval = null;\n  return this;\n}\n\nexport default viewInterval;","import { dispatch } from 'd3';\nimport distDomain from './distDomain';\nimport limitViewInterval from './limitViewInterval';\nimport stream from './stream';\nimport streamPanning from './streamPanning';\nimport tempPosForOrdinalScale from './tempPosForOrdinalScale'\nimport viewInterval from './viewInerval';\nconst _attrs = {\n  viewInterval : null,\n  stream: null\n}\n\nconst streamMixin = Base => {\n  /**\n   * @mixin StreamMixin\n   */\n  let StreamMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n      this.__execs__.viewInterval = null;\n      this.__execs__.stream = null;\n      this.__execs__.streamPanning = null;\n      this.__execs__.streamPanningDispatch = dispatch('streamPanning');\n      this.rebindOnMethod(this.__execs__.streamPanningDispatch);\n    }\n  }\n  StreamMixin.prototype.distDomain = distDomain;\n  StreamMixin.prototype.limitViewInterval = limitViewInterval;\n  StreamMixin.prototype.stream = stream;\n  StreamMixin.prototype.streamPanning = streamPanning;\n  StreamMixin.prototype.tempPosForOrdinalScale = tempPosForOrdinalScale;\n  StreamMixin.prototype.viewInterval = viewInterval;\n\n  return StreamMixin;\n}\n\nexport default streamMixin;\n","import {select, transition} from 'd3';\n\nfunction translate(selection, innerSize, isVertical = true, isInit = false) {\n  selection.attr('transform', d => {\n    if (isVertical) {\n      if (isInit) return 'translate(' + [innerSize.width, innerSize.height]+ ')';\n      return 'translate(' + [innerSize.width, d.y-0.5]+')';\n    } else {\n      if (isInit) return 'translate(' + [0, 0]+ ')';\n      return 'translate(' + [d.w + 0.5, 0]+')';\n    }\n  })\n}\nfunction line(selection, innerSize, isVertical = true) {\n  if (isVertical) {\n    selection.attr('x1', -innerSize.width)\n  } else {\n    selection.attr('y2', innerSize.height);\n  }\n}\n\nfunction _annotation() {\n  if (!this.annotation() || this.isFacet() || this.stacked()) return;\n  const annotation = this.annotation();\n  const that = this;\n  const canvas = this.__execs__.canvas;\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay)\n  const innerSize = this.innerSize();\n  const isVertical = this.isVertical();\n  const isShowDiff = this.showDiff() && !this.isNested();\n\n  if (canvas.select('.annotation-g').empty()) canvas.append('g').attr('class', 'annotation-g')\n  let g = canvas.select('.annotation-g');\n  let anno = g.selectAll('.annotation')\n    .data(this.nodes().data())\n  anno.exit().remove();\n  let annoEnter = anno.enter().append('g')\n    .attr('class', 'annotation')\n    .call(translate, innerSize, isVertical, true)\n    .style('pointer-events', 'none');\n  annoEnter.append('text')\n    .style('fill', annotation.color);\n  annoEnter.append('line')\n    .style('stroke', annotation.color)\n    .style('shape-rendering', 'crispEdges')\n    .call(line, innerSize, isVertical);\n  anno = annoEnter.merge(anno)\n    .transition(trans)\n    .call(translate, innerSize, isVertical)\n  if (isShowDiff) {\n    anno.style('visibility', function(d,i, arr) {\n      if (d.diff) {\n        if (d.diff.value < 0) return 'visible';\n        else if (i < anno.size()-1 && select(arr[i+1]).datum().diff.value > 0) return 'visible'; //when not last one, but next one is  diff > 0\n        if (d.neighbor.diff.value > 0) return 'visible';\n      }\n      return 'hidden';\n    });\n  }\n    \n  anno.select('text')\n    .text(d => d.key)\n    .style('visibility', annotation.showLabel ? 'visible' : 'hidden')\n    .style('fill', annotation.color)\n    .each(function() {\n      that.styleFont(this);\n    })\n  anno.select('line')\n    .transition(trans)\n    .style('stroke', annotation.color)\n    .call(line, innerSize, isVertical);\n    \n}\n\nexport default _annotation;","function _axis() {\n  let that = this;\n  let scale = this.__execs__.scale;\n  let nested = this.isNested();\n  let grid = this.grid();\n  let innerSize = this.innerSize();\n  let fieldObj = this.__execs__.field;\n  let isVertical = this.isVertical();\n\n  let _axisScaleX = function (axisToggle) {\n    let targetField = nested ? fieldObj.region : (isVertical ? fieldObj.x : fieldObj.y);\n    let targetScale = nested ? scale.region : (isVertical ? scale.x : scale.y);\n    targetField.axis(axisToggle);\n    let curAxis = that.axisDefault(targetScale, axisToggle);\n    if (axisToggle.orient === 'bottom') {\n      curAxis.y(isVertical? scale.y.range()[0] : scale.x.range()[1]);\n    }\n    return curAxis;\n  }\n\n  let _axisScaleY = function (axisToggle) {\n    let targetField = isVertical ? fieldObj.y : fieldObj.x;\n    let targetScale = isVertical ? scale.y : scale.x;\n    targetField.axis(axisToggle);\n    let curAxis = that.axisDefault(targetScale, axisToggle);\n    curAxis.grid(grid).gridSize(axisToggle.orient === 'bottom' || axisToggle.orient === 'top' ? innerSize.height : innerSize.width);\n    if (axisToggle.orient === 'right') curAxis.x( (nested ? scale.region : scale.x).range()[1]);\n    return curAxis;\n  }\n\n  let xAt = this.axisX();\n  let yAt = this.axisY();\n  if (this.isFacet()) {\n    this.axisFacet(false);\n  } else {\n    if (xAt) _axisScaleX(xAt);\n    if (yAt) _axisScaleY(yAt);\n  }\n\n  this.renderAxis();\n}\n\nexport default _axis;","import {scaleBand, scaleLinear} from 'd3';\nimport { domainY } from './index';\n\nfunction _domain() { //set scales and domains\n  const keep = this.keep();\n  const scale = this.scale();\n  const munged = this.__execs__.munged;\n  const nested = this.isNested();\n  const stacked = this.stacked();\n  const aggregated = this.aggregated();\n  const field = this.__execs__.field;\n  const isNestedAndSortByValue = this.isNestedAndSortByValue();\n  const viewInterval = this.viewInterval();\n  let yDomain, xDomain;\n  let regionDomain;\n  if (!(keep && scale.x && scale.y)) {\n    scale.x = scaleBand().padding(this.padding());\n    scale.y = scaleLinear();\n  }\n  \n  if (nested) {\n    regionDomain = field.region.level(0).munged(munged).domain();\n    scale.region = scaleBand().domain(regionDomain).padding(this.regionPadding());\n  }\n  if (this.isFacet()) {\n    scale.color = this.updateColorScale(regionDomain, keep);\n    return this;\n  } \n  \n  const level = 1;\n  xDomain = field.x.level(level)\n    .munged(munged)\n    .domain(!isNestedAndSortByValue && this.sortByValue());\n  \n  if (nested || (!nested && (this.mono() === false || stacked))) { //nested\n    scale.color = this.updateColorScale(xDomain, keep); //FIXME: need to update current colors\n  }\n  yDomain = domainY(field.y, munged, level, nested, aggregated, stacked, this.showDiff());\n  \n  if (isNestedAndSortByValue) {\n    xDomain = field.x.domain(this.sortByValue(), null, isNestedAndSortByValue);\n    munged.forEach(d => d.domain = xDomain.find(x => x.key === d.data.key).values);\n  } else if (stacked) {\n    if (!nested) {\n      scale.x.domain([field.x.field()]);\n    } \n  } else { //not stacked\n    if (!keep && viewInterval) {\n      xDomain = this.limitViewInterval(scale.x, xDomain);\n    } else if (keep && this.stream()) { // if uses stream  and keeps the existing scale;\n      xDomain = this.limitViewInterval(scale.x, xDomain, true);\n    }\n    scale.x.domain(xDomain);\n  }\n  this.setCustomDomain('y', yDomain);\n  return this;\n}\n\nexport default _domain;","import bar from './';\nimport {mixedMeasure} from '../../modules/measureField';\nfunction _facet () {\n  let parent = this;\n  let scale = this.__execs__.scale;\n  let facet = this.facet();\n  let canvas = this.__execs__.canvas;\n  let mono = this.mono();\n  let innerSize = this.innerSize();\n  let dimensions = [this.dimensions()[0]];\n  let measures = this.isMixed() ? [mixedMeasure] : this.measures();\n  let width, height;\n  let settings = ['axisTitles','normalized', 'padding', 'orient', 'font', 'label', 'grid', 'tooltip']\n    .map(d => { return {key: d, value:this[d]()};});\n  let hasX = this.axisX();\n  let hasY = this.axisY();\n  let _smallbar = function(d) {\n    let smallBar = bar()\n        .container(this)\n        .data(d)\n        .dimensions(dimensions).measures(measures)\n        .width(width).height(height)\n        .legend(false)\n        .zeroMargin(true) //remove margin\n        .aggregated(true) \n        .parent(parent) \n    settings.forEach(d => {smallBar[d.key](d.value)});\n\n    if (!mono) smallBar.color(scale.color(d.data.key));\n    if (facet.orient === 'vertical') {\n      if (hasX) smallBar.axis({target:'x', orient:'bottom'});//, showTitle: i === arr.length-1});\n      if (hasY) smallBar.axis({target:'y', orient:'left'});\n    } else {\n      if (hasX) smallBar.axis({target:'x', orient:'bottom'});\n      if (hasY) smallBar.axis({target:'y', orient:'left'});//showTitle: i === 0});\n    }\n    smallBar.render();\n  }\n  if (facet.orient === 'horizontal') {\n    width =  scale.region.bandwidth();\n    height = innerSize.height;\n  } else {\n    width = innerSize.width;\n    height = scale.region.bandwidth();\n  }\n\n  canvas.selectAll(this.regionName() + '.facet')\n    .each(_smallbar);\n}\n\nexport default _facet;","function _legend() { \n  let field = this.__execs__.field;\n  if (this.mono() && (!field.region || this.isFacet())) { //mono + dimensions  => no legend\n    return; \n  }\n  this.renderLegend('x');\n}\n\nexport default _legend;","import {local, select, timeFormat, transition} from 'd3';\nimport {className, labelFormat, zeroPoint} from '../../modules/util';\nfunction _mark() {\n  const that = this;\n  const canvas = this.__execs__.canvas;\n  const nested = this.isNested.call(this);\n  const scale = this.__execs__.scale;\n  const stacked = this.stacked();\n  const vertical = this.isVertical();\n  const color = this.color();\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay)\n  const yField = this.measureName();\n  const hasZeroPoint = zeroPoint(scale.y.domain());\n  const label = this.label();\n  const field = this.__execs__.field;\n  const diffColor = this.showDiff();\n  const isShowDiff = !nested && diffColor;\n  const isNestedAndSortByValue = this.isNestedAndSortByValue();\n  \n  let __local = function (selection, monoColor = false, stream = false) {\n    let _fill = d => {\n      if(monoColor) return color[0];\n      else return scale.color(d.data.key);\n    }\n    let tFormat = (key) => {\n      let f = field.x.interval() && field.x.format() ? timeFormat(field.x.format()) : null; \n      return f ? f(key) : key;\n    }\n    \n    selection.each(function(d) { //local에 저장\n      let x,y,w,h;\n      let yValue = d.value//d.data.value[yField];\n      let upward = yValue >=0;\n      if (stacked) {\n        x = 0;\n        y = (vertical ? upward: !upward) ? scale.y(d.data.value[yField + '-end']) : scale.y(d.data.value[yField + '-start']);\n        w = nested ? scale.region.bandwidth() : scale.x.width;\n        h = Math.abs(scale.y(d.data.value[yField + '-start']  ) - scale.y(d.data.value[yField + '-end']));\n      } else {\n        if (isNestedAndSortByValue) {\n          scale.x.domain(d.parent.domain);\n        }\n        x =  scale.x(d.data.key);\n        if (isNaN(x) && scale.x._defaultDomain) {\n          x = that.tempPosForOrdinalScale(d.data.key, scale.x)\n        } \n        if (stream) {\n          d.x0 = that.tempPosForOrdinalScale(d.data.key, scale.x);\n        }\n        y =  (vertical ? upward: !upward) ? scale.y(yValue) : (hasZeroPoint ? scale.y(0) : scale.y.range()[0]);\n        w = scale.x.bandwidth();\n        h = Math.abs((hasZeroPoint ?  scale.y(0): scale.y.range()[0]) - scale.y(yValue));\n      }\n      let result = vertical ? {x,y : y + (upward ? 0 : 0.5),w,h,upward} : {x:y + (upward ? 0.5 : 0), y:x, w:h, h: w,upward};\n      result.key = tFormat(d.data.key);\n      result.color = _fill(d);\n      result.text = labelFormat(yValue);\n      //result.value = yValue;\n      for (let k in result) {\n        if (result.hasOwnProperty(k)) d[k] = result[k];\n      }\n    });\n  }\n  let __barInit = function(selection, vertical=true) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection.style('cursor', 'pointer')\n        .style('fill', function(d) {\n          if (select(this).classed(className('diff'))) return 'none';\n          else return d.color;\n        }); \n      if(vertical) { \n        selection.attr('x', d.x0 || d.x)\n          .attr('y', d.upward ? d.y + d.h : d.y)\n          .attr('width', d.w )\n          .attr('height', 0);\n      } else {\n        selection.attr('x', d.upward ? d.x : d.x + d.w)\n          .attr('y', d.x0 || d.y)\n          .attr('width', 0)\n          .attr('height', d.h);\n      }\n    })\n  }\n  let __labelInit = function (selection, vertical=true) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection.style('pointer-events', 'none').text(d.text);\n      if (vertical) {\n        selection.attr('x', (d.x0 || d.x) + d.w/2).style('text-anchor', 'middle')\n        if (stacked) selection.attr('y', d.y + d.h).attr('dy', '1em');\n        else if(d.upward) selection.attr('y', d.y + d.h).attr('dy', '-.25em');\n        else selection.attr('y', d.y).attr('dy', '1em');\n      } else {\n        selection.attr('y', (d.x0 || d.y) + d.h/2).attr('dy', '.35em');\n        if (stacked) selection.attr('x', d.x + d.w/2).attr('text-anchor', 'middle');\n        else if(d.upward) selection.attr('x', d.x).attr('dx', '.5em');\n        else selection.attr('x', d.x + d.w).attr('text-anchor', 'end').attr('dx', '-.1em')\n      }\n      that.styleFont(selection);\n    })\n  }\n  let __bar = function(selection) {\n    selection.transition(trans).attr('x', d => d.x)\n      .attr('y', d => d.y)\n      .attr('width', d => d.w)\n      .attr('height',d => d.h) \n      .style('fill', function(d) {\n        if (select(this).classed(className('diff'))) return 'none'\n        else return d.color;\n      }); \n  }\n  let __label = function(selection, vertical=true) {\n    selection.each(function(d) {\n      let selection = select(this);\n      if (vertical) {\n        selection.transition(trans).attr('y', d.upward ? d.y : d.y + d.h);\n      } else {\n        if (stacked) selection.transition(trans).attr('x', d.x + d.w/2).attr('text-anchor', 'middle');        \n        else selection.transition(trans).attr('x', d.upward ? d.x + d.w : d.x);\n      }\n      selection.text(d.text)\n        .style('fill', stacked ? '#fff' : d.color)\n        .style('visibility', label && (!diffColor || (diffColor && selection.classed(className('diff')))) ? 'visible' : 'hidden');\n    })\n  }\n \n  let bar;\n  let region = canvas.selectAll(this.regionName());\n  bar = region\n    .selectAll(this.nodeName()) \n    .data(d => {\n      let target = d.children;\n      return stacked ? target.slice().reverse() : target;\n    }, d => d.data.key);\n  bar.exit().remove();\n  let barEnter = bar.enter().append('g')\n    .attr('class', this.nodeName(true))\n    .call(__local, nested ? false : this.mono(), this.stream()); \n  barEnter.append('rect')\n    .attr('class', className('bar'))\n    .call(__barInit, vertical); \n  barEnter.append('text')\n    .attr('class', className('bar'))\n    .call(__labelInit, vertical);\n  if (nested && stacked) {\n    barEnter.append('path')\n      .style('fill', d => d.color)\n      .style('visibility', 'hidden')\n      .attr('opacity', '0.5')\n  }\n  bar.call(__local, nested ? false : this.mono());    \n  bar = barEnter.merge(bar);\n  bar.select('rect' + className('bar', true)).call(__bar, vertical);\n  bar.select('text' + className('bar', true)).call(__label, vertical);\n\n  if (isShowDiff) { \n    let last;\n    let strokeWidth = 1;\n    let halfStrokeWidth = strokeWidth /2;\n    barEnter.append('rect')\n      .attr('class', className('diff'))\n      .attr('stroke-dasharray', '5, 3')\n      .attr('stroke-width', strokeWidth);\n    barEnter.append('text')\n      .attr('class', className('diff'));\n    bar.each(function(d,i,arr) {\n      if (i > 0) {\n        d.neighbor = last;\n        let diff = {value: d.value - last.value, upward: d.upward};\n        if (vertical) {\n          diff.x = d.x; diff.w = d.w; \n          if (diff.value > 0) {\n            diff.y = d.y;\n            diff.h = last.y - d.y;\n          } else {\n            diff.y = last.y;\n            diff.h = d.y - last.y;\n          }\n        } else {\n          diff.y = d.y; diff.h = d.h;\n          if (diff.value > 0) {\n            diff.x = last.w;\n            diff.w = d.w - last.w;\n          } else {\n            diff.x = d.w;\n            diff.w = last.w - d.w;\n          }\n        }\n        diff.x += halfStrokeWidth; diff.y += halfStrokeWidth;\n        diff.h -= strokeWidth; diff.w -= strokeWidth;\n        diff.w = Math.max(strokeWidth*2, diff.w);\n        diff.h = Math.max(strokeWidth*2, diff.h);\n        diff.text = labelFormat(diff.value, true);\n        select(this).select('text' + className('bar', true))\n          .each(function(d) {\n            let selection = select(this).transition(trans);\n            if (diff.value < 0) {\n              if (vertical) {\n                selection.attr('y', (d.upward ? d.y : d.y + d.h) - diff.h);\n              } else {\n                selection.attr('x', (d.upward ? d.x + d.w : d.x) + diff.w);\n              }\n            }  \n          });\n        select(this).select('rect' +  className('bar', true))\n          .transition(trans)\n          .style('fill', d => d.color = diffColor[(diff.value > 0 ? 'inc': 'dec') + 'Fill']);\n        select(this).select('rect'+ className('diff', true))\n          .datum(diff)\n          .attr('x', vertical? diff.x+halfStrokeWidth : 0)\n          .attr('y', vertical? (d.upward ? d.y + d.h : d.y): diff.y + halfStrokeWidth)\n          .attr('width', vertical? d.w - strokeWidth : 0)\n          .attr('height', vertical? 0 : d.h -strokeWidth)\n          .call(__bar)\n          .style('stroke', diffColor[(diff.value > 0 ? 'inc': 'dec') + 'Stroke']);\n        select(this).select('text' +  className('diff', true))\n          .datum(diff)\n          .call(__labelInit, vertical)\n          .call(__label, vertical)\n          .style('fill', diffColor[(diff.value > 0 ? 'inc': 'dec') + 'Fill']);\n        d.diff = diff;\n      } else {\n        d.neighbor = select(arr[i+1]).datum();\n        select(this).select('rect' + className('bar', true))\n          .transition(trans).style(diffColor.neuFill);\n        select(this).select('rect' + className('diff', true)).remove();\n      }\n      last = d;\n    })\n  }\n\n  if (nested && stacked) { //show diff of stacked\n    let pathLocal = local();\n    region.each(function(r,i,arr) {\n      let neighbor = select(i < arr.length-1 ? arr[i+1] : arr[i-1]).datum();\n      let nds = neighbor.children;\n      select(this).selectAll(that.nodeName())\n        .each(function(d) {\n          let nd = nds.find(nd => nd.data.key === d.data.key);\n          d.neighbor = nd; //save neighbor data\n        });\n    });\n    region.filter((d,i,arr) =>  i < arr.length-1)\n      .selectAll(that.nodeName()).select('path')\n      .style('fill', d => d.color)\n      .each(function(d) {\n        d.diff = {value: d.neighbor.value - d.value};\n        let parent = d.parent;\n        let neighbor = d.neighbor;\n        let neighborParent = neighbor.parent;\n        let points = [];\n        if (vertical) { //push in clockwise order\n          points.push([d.x + d.w , d.y]);\n          points.push([neighborParent.x + neighbor.x - parent.x, neighborParent.y - parent.y + neighbor.y]);\n          points.push([points[1][0], points[1][1] + neighbor.h]);\n          points.push([points[0][0], points[0][1] + d.h]);\n        } else { \n          points.push([d.x, d.y + d.h]);\n          points.push([points[0][0] + d.w, points[0][1]]);\n          points.push([neighborParent.x + neighbor.x + neighbor.w - parent.x , points[0][1] + neighborParent.y + neighbor.y - parent.y - d.y - d.h]);\n          points.push([points[2][0] - neighbor.w, points[2][1]]);\n        }\n        let source = (vertical ? [points[0], points[3]] : [points[0], points[1]])\n        source =  'M' + source[0] + 'L' + (vertical? source[0] : source[1]) + 'L' + source[1] + 'L' + (vertical? source[1] : source[0])  + 'z';\n        let target = points.map((point,i) => (i === 0 ? 'M' : 'L') + point).join('') + 'z';\n        pathLocal.set(this, {source, target});  \n      });\n  \n    bar.on('mouseenter.stacked',function(d) {\n      bar.filter(t => t.data.key !== d.data.key)\n        .selectAll('rect' + className('bar', true))\n        .transition()\n        .style('fill', '#b2c0d1');\n      let neighbor = region.selectAll(that.nodeName()).filter(t => t.data.key === d.data.key);\n      if (!label) {\n        select(this).select('text' + className('bar', true)).style('visibility', 'visible');\n        neighbor.select('text' + className('bar', true)).style('visibility', 'visible');\n      }\n      neighbor.select('path').style('visibility', 'visible')\n        .attr('d', function() { \n          let path = pathLocal.get(this);\n          if (path) return path.source;\n        })\n        .interrupt()\n        .transition(trans)\n        .attr('d', function() { \n          let path = pathLocal.get(this);\n          if (path) return path.target;\n        })\n    }).on('mouseleave.stacked',function(d) {\n      bar.filter(t => t.data.key !== d.data.key)\n        .selectAll('rect' + className('bar', true))\n        .transition()\n        .style('fill', d => d.color);\n      let neighbor = region.selectAll(that.nodeName()).filter(t => t.data.key === d.data.key);\n      if (!label) {\n        select(this).select('text' + className('bar', true)).style('visibility', 'hidden');\n        neighbor.select('text' + className('bar', true)).style('visibility', 'hidden');        \n      }\n      neighbor.select('path')\n        .interrupt()\n        .transition(trans)\n        .attr('d', function() { \n          let path = pathLocal.get(this);\n          if (path) return path.source;\n        }).on('end', function(){\n          select(this).style('visibility', 'hidden');\n        })\n    })\n  }\n}\n\nexport default _mark;","import {merge} from 'd3';\nimport Field from './field';\nimport {setAttrs, setMethodsFromAttrs} from './util';\nimport {comparator} from './transform';\n\n\nconst attrs = {\n  interval: null,\n  max: 100,\n  order: 'natural' //natural|ascending|descending\n}\n\nclass DimensionField extends Field {\n  constructor(dimension) {\n    super(dimension);\n    setAttrs(this, attrs);\n    this.setInit(dimension, ['interval', 'max', 'order']);\n  }\n  domain(sortByValue = false, accessor = null, multipleDomain = false) {\n    const munged = this.munged();\n    const level = this.level();\n    const order = this.order();\n    const needMultipleDomain = sortByValue !== 'natural' && multipleDomain;\n    let curLevel = 0;\n    let duplicateDomain = [];\n    function _fill(nodes, setDomain, curLevel) {\n      if (curLevel === level) {\n        const residual = setDomain.filter(d => !nodes.find(n => n === d));\n        return nodes.concat(residual);\n      } else {\n        return nodes.map(d => { \n          d.values = _fill(d.values, setDomain, curLevel + 1)\n          return d;\n        })\n      }\n    }\n    function _keys(nodes, curLevel) {\n      if (curLevel === level) {\n        const domain = nodes.map(accessor ? accessor : d => {return {key: d.data.key, value: d.value};});\n        if (needMultipleDomain) {\n          duplicateDomain = duplicateDomain.concat(domain);\n          return _domain(domain, false);\n        } else {\n          return domain;\n        }\n      } else {\n        if (needMultipleDomain) {\n          return nodes.map(d => {\n           return {key: d.data.key, values: _keys(d.children, curLevel + 1)}\n          })\n        } else {\n          return merge(nodes.map(d => _keys(d.children, curLevel + 1)));\n        }\n      }\n    }\n    function _domain(domain, duplicate = true) {\n      if (duplicate) domain = _set(domain);\n      if ((!sortByValue || sortByValue === 'natural') && order && order !== 'natural') domain.sort(comparator(order, [], true, d => d.key)); \n      if (sortByValue && sortByValue !== 'natural') domain.sort(comparator(sortByValue, [], true, d => d.value)); \n      return domain.map(d => d.key);\n    }\n\n    function _set(domain) {\n      let newDomain = [];\n      domain.forEach(d => {\n        if (!newDomain.find(n => n.key === d.key)) newDomain.push(d);\n      })\n      return newDomain;\n    }\n    let domain = _keys(munged, curLevel);\n    if (needMultipleDomain) {\n      const domainSet = _set(duplicateDomain).map(d => d.key);\n      curLevel = 0;\n      _fill(domain, domainSet, curLevel);\n    } else {\n      domain = _domain(domain);\n    }\n    return domain;\n  }\n\n  isInterval() {\n    return this.interval() && this.format();\n  }\n\n  toObject() {\n    let def = super.toObject();\n    def.interval = this.interval();\n    def.max =  this.max();\n    def.order = this.order()\n    return def;\n  }\n}\n\nfunction dimensionField(dimension) {\n  return new DimensionField(dimension);\n}\n\nsetMethodsFromAttrs(DimensionField, attrs);\n\nexport default dimensionField;","import dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\nimport {countMeasure, mixedMeasure} from '../../modules/measureField';\nimport {ConditionException} from '../../modules/error';\nimport {comparator, stack} from '../../modules/transform';\nimport {conditions} from './';\n\nfunction conditionFunc (dimensions, measures) {\n  let field = this.__execs__.field;\n  if (dimensions.length <= 2 && measures.length <= 1) {\n    if(dimensions.length === 2) {\n      field.region = dimensionField(dimensions[0]);\n      field.x = dimensionField(dimensions[1]);\n    } else {\n      field.x = dimensionField(dimensions[0]);\n    }\n    if (measures.length === 0) {\n      this.measure(countMeasure);\n    }\n    field.y = measureField(measures[0]);\n    return conditions[measures.length === 0 ? 1 : 0];\n  } else if (dimensions.length <=1 && measures.length >= 2) {\n    if(dimensions.length === 1) { //mixed\n      field.region = dimensionField(dimensions[0]);\n    } \n    field.x = dimensionField(this.mixedDimension());\n    field.y = measureField(mixedMeasure).mixed(true).measures(measures);\n    return conditions[2];\n  } \n  else throw new ConditionException();\n}\n\nfunction _munge() {\n  this.condition(conditionFunc);\n  const field = this.__execs__.field;\n  const mixed = this.isMixed();\n  \n  if (this.aggregated()) {\n    this.__execs__.munged = [this.data()];\n  } else {\n    if (mixed) {\n      this.__execs__.munged = this.aggregateMixed(this.facet() && !this.stacked());//use pseudo dimension and measure\n    } else {\n      this.__execs__.munged = this.aggregate(this.facet() && !this.stacked());\n    }\n    if (!this.isNested()) this.__execs__.munged = [this.__execs__.munged[0].parent];\n  } \n\n  if (this.stacked()) { \n    if (!field.region) {\n      stack(this.__execs__.munged, field.y, this.normalized());\n    } else { \n      let domain; \n      this.__execs__.munged.forEach((d,i) => {\n        if (field.x.order() === 'natural') {\n          if (i === 0) domain = d.children.map(d => d.data.key);\n          else d.children.sort(comparator('ascending', domain, true, d => d.data.key))\n        }\n        stack(d.children, field.y, this.normalized());\n      })\n    }\n  }\n}\n\nexport default _munge;","function _panning() {\n  if (this.stream()) {\n    this.streamPanning(this.__execs__.scale.x);\n  }\n}\n\nexport default _panning;","function _range() {\n  const scale = this.scale();\n  const nested = this.isNested();\n  const field = this.__execs__.field;\n  const xAt = this.axisX();\n  const yAt = this.axisY();\n  const targetXField = nested ? field.region : field.x;\n  const facet = this.facet();\n\n  if (this.isFacet()) {\n    const innerSize = this.innerSize();\n    if (facet.orient === 'horizontal' && xAt) {\n      xAt.orient = 'top';\n      xAt.showDomain = false;\n      this.thickness(xAt, scale.region, true, true);\n      if (yAt) yAt.thickness = 0;\n    } else if (facet.orient === 'vertical' && yAt) {\n      yAt.orient = 'right';\n      yAt.showDomain = false;\n      this.thickness(yAt, scale.region, false, true);\n      if (xAt) xAt.thickness = 0;\n    }\n\n    if (facet.orient === 'vertical') {\n      scale.region.rangeRound([0, innerSize.height]);\n    } else {\n      scale.region.rangeRound([0, innerSize.width]);\n    }\n    return this;\n  }\n  if (this.isVertical()) { //vertical\n    targetXField.axis(xAt);\n    this.thickness(yAt, scale.y, false, false);\n    this.thickness(xAt, nested ? scale.region : scale.x, true, true);\n  } else {\n    targetXField.axis(yAt);\n    this.thickness(yAt, nested ? scale.region : scale.x, false, true);\n    this.thickness(xAt, scale.y, true, false);\n  }\n\n  const innerSize = this.innerSize();\n  //range 설정\n  if (this.isVertical()) { //vertical \n    if (nested) {\n      scale.region.range([0, innerSize.width]);\n      scale.x.range([0, scale.region.bandwidth()]);\n    } else {\n      scale.x.range([0, innerSize.width]);\n    }\n    scale.y.range([innerSize.height, 0]); //reverse\n  } else { //horizontal\n    if (nested) {\n      scale.region.range([0, innerSize.height]);\n      scale.x.range([0, scale.region.bandwidth()]);\n    } else {\n      scale.x.range([0, innerSize.height]); //original\n    }\n    scale.y.range([0, innerSize.width]);  \n  }\n  return this;\n}\n\nexport default _range;","function _region() {\n  const aggregated = this.aggregated();\n  const nested = this.isNested.call(this);\n  const scale = this.__execs__.scale;\n  const stacked = this.stacked();\n  const facet = this.facet();\n  const vertical = this.isVertical();\n  const isFacet = this.isFacet();\n  let __regionLocal = function(d) {\n    if (aggregated) return;\n    let xy = nested ? [scale.region(d.data.key), 0] : [0,0];\n    if((facet && !stacked && facet.orient === 'vertical') ) {\n      xy.reverse();\n    } else if (!vertical && facet.orient !== 'horizontal') {\n      xy.reverse();\n    }\n    let x = xy[0];\n    let y = xy[1];\n    d.x = x; d.y = y;\n  };\n  \n  this.renderRegion(__regionLocal, d => d, isFacet);\n}\n\nexport default _region;","function _tooltip() {\n  if(!this.tooltip() || this.isFacet()) return;\n  const parent = this.parent();\n  const mixed = this.isMixed();\n  const field = this.__execs__.field;\n  const isStacked = this.stacked() && this.isNested() && !this.isFacet();\n  const isVertical = this.isVertical();\n  const isShowDiff = this.showDiff() && !this.isNested();\n  let key = function(d, text) {\n    return {name: 'key', value:text};\n  }\n  let value = function(d, text) {\n    let name;\n    if (mixed) {\n      name = d.key;\n    } else if (parent && parent.isMixed()) {\n      name = d.key;\n    } else {\n      name = field.y.field();\n    }\n    return {name, value:text}\n  }\n\n  let valueDiff = function(d) {\n    let nd = d.neighbor;\n    let result = [{name: (isShowDiff ? d : d.parent).data.key, value: d.text} , {name: (isShowDiff ? nd : nd.parent).data.key, value: nd.text}]\n    if (isShowDiff) result.reverse();\n    let diff = d.diff ? d.diff.value : nd.diff.value;\n    result.push({name: '(+/-)', value: diff});\n    return result;\n  }\n  let offset = function(d) {\n    let x = 0, y = 0;\n    if (isStacked) {\n      x = Math.max(-d.x + d.neighbor.x + d.neighbor.w, d.w);\n      if (isVertical) { \n        if (d.neighbor.parent.x > d.parent.x) x += Math.abs(d.neighbor.parent.x - d.parent.x) - d.w;\n      } else {\n        let yDiff = d.neighbor.parent.y - d.parent.y;\n        if (yDiff < 0) { //when it is last\n          x = d.w;\n        } else {\n          y += d.h + (yDiff - d.h) /2;\n        }\n      }\n    } else {\n      x += d.w;\n    }\n    return {x,y}\n  }\n  let toggle = {key, offset};\n  if (isStacked || isShowDiff) {\n    toggle.value = valueDiff;\n    toggle.showDiff = true;\n  } else {\n    toggle.value = value;\n  }\n  this.renderTooltip(toggle);\n}\n\nexport default _tooltip;","import Facet from '../facet/';\nimport paddingMixin from '../paddingMixin';\nimport sortMixin from '../sortMixin/';\nimport stackMixin from '../stackMixin';\nimport streamMixin from '../streamMixin';\nimport {mixedMeasure} from '../../modules/measureField';\nimport {attrFunc, genFunc, mix, setMethodFromDefaultObj} from '../../modules/util';\nimport _annotation from './_annotation';\nimport _axis from './_axis';\nimport _domain from './_domain';\nimport _facet from './_facet';\nimport _legend from './_legend';\nimport _mark from './_mark';\nimport _munge from './_munge';\nimport _padding from './_panning';\nimport _range from './_range';\nimport _region from './_region';\nimport _tooltip from './_tooltip';\n\nconst orients  = ['vertical', 'horizontal'];\nconst conditions = ['normal', 'count', 'mixed'];\nconst _attrs = {\n  annotation: false,\n  mono: true, \n  orient: orients[0],\n  padding: 0.05,\n  showDiff: false,\n  regionPadding: 0.1\n};\n\n/**\n * renders a bar chart\n * @class Bar\n * @augments Core\n * @augments RectLinear\n * @augments Facet\n * @augments SortMixin\n * @augments PaddingMixin\n * @augments StreamMixin\n * @todo write examples\n */\nclass Bar extends mix(Facet).with(sortMixin, paddingMixin, stackMixin, streamMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.process('munge', _munge, {isPre:true})\n      .process('domain', _domain,  {isPre:true})\n      .process('range', _range,  {isPre:true})\n      .process('axis', _axis)\n      .process('region', _region)\n      .process('facet', _facet, {allow: function() {return this.isFacet()}})\n      .process('mark', _mark, {allow: function() {return !this.isFacet()}})\n      .process('legend', _legend)\n      .process('tooltip', _tooltip)\n      .process('padding', _padding)\n      .process('annotation', _annotation);\n  }\n  measureName() {\n    let measures = this.measures();\n    let yField;\n    if (this.condition() === conditions[2]) yField = mixedMeasure.field; \n    else if (this.aggregated() && measures[0].field === mixedMeasure.field) yField = measures[0].field;\n    else yField = measures[0].field + '-' + measures[0].op;\n    return yField;\n  }\n\n  muteToLegend(d) {\n    this.muteLegend(this.isFacet() ? d.parent.data.key : d.data.key);\n  }\n  muteFromLegend(legend) {\n    if (this.isFacet()) this.muteRegions(legend.key);\n    else this.muteNodes(legend.key);\n  }\n\n  demuteToLegend(d) {\n    this.demuteLegend(this.isFacet() ? d.parent.data.key : d.data.key);\n  }\n\n  demuteFromLegend(legend) {\n    if (this.isFacet()) this.demuteRegions(legend.key);\n    this.demuteNodes(legend.key);\n  }\n\n  isCount() {\n    return this.condition() === conditions[1];\n  }\n\n  isFacet() {\n    return this.facet() && this.isNested() && !this.stacked();\n  }\n  \n  isMixed() {\n    return this.condition() === conditions[2] ;\n  }\n  \n  isNested() {\n    let dimensions = this.dimensions();\n    let condition = this.condition();\n    return dimensions.length === 2 || (condition == conditions[2] && dimensions.length === 1);\n  }\n  \n  isVertical() {\n    return this.orient() === orients[0];\n  }\n\n  isNestedAndSortByValue() {\n    return this.isNested() && this.sortByValue() !== 'natural';\n  }\n} \n\n/**\n * If annotation is specified, sets the annotation settings and returns the instance itself. This annotation feature only works in the mono-bar condition and shows differences between bars. If annotation value is true or the it's showLable property is true, shows the label. If annotation is not specified, returns the instance's current annotation setting.\n * @function\n * @example\n * bar.annotation(true); //shows the annotation which shows the difference between bars\n * @param {boolean|object} [annotation=false] It is true or showLabel is true shows annotation label.\n * @param {boolean} annotation.showLabel=true \n * @param {string} [annotation.color=#477cd2] sets the annotation label color\n * @return {annotation|Bar}\n */\nBar.prototype.annotation = setMethodFromDefaultObj('annotation', {showLabel: true, color: '#477cd2'});\n\n/**\n * If showDiff is specified, sets the showDiff settings and returns the instance itself. This showDiff feature only works in the grouped stacked-bar condition and shows differences between bars. If showDiff value is true or object, shows the differences. If showDiff is not specified, returns the instance's current showDiff setting.\n * @function\n * @example\n * bar.showDiff(true); //shows the diffrences between stacked bars\n * @param {boolean|object} [showDiff=false] It is true or showLabel is true shows annotation label.\n * @param {string} showDiff.neuFill=#c0ccda \n * @param {string} showDiff.incStroke=#477cd2 \n * @param {string} showDiff.incFill=#40bbfb \n * @param {string} showDiff.decStroke=#f06292 \n * @param {string} showDiff.decFill=#f06292 \n * @return {showDiff|Bar}\n */\nBar.prototype.showDiff = setMethodFromDefaultObj('showDiff', {neuFill: '#c0ccda', incStroke:'#477cd2', incFill: '#40bbfb', decStroke: '#f06292', decFill: '#f06292'});\n\n/**\n * If annotation is specified, sets the mono settings and returns the instance itself. This mono feature only works in the mono-bar condition. It render bars with different colors when it is false.  If mono is not specified, returns the instance's current annotation setting.\n * @function\n * @example\n * bar.mono(false); // renders bars with different colors according to its color pattern\n * @param {boolean} [mono=true]\n * @return {mono|Bar}\n */\nBar.prototype.mono = attrFunc('mono');\n\n/**\n * If orient is specified, sets theorientmono settings and returns the instance itself. It transforms the bar chart's orient according to the value. If orient is not specified, returns the instance's current orient setting.\n * @function\n * @example\n * bar.orient('horizontal'); // renders the horizontal bar chart\n * @param {string} [orient='vertical'] (vertical|horizontal)\n * @return {orient|Bar}\n */\nBar.prototype.orient = attrFunc('orient');\n\nfunction domainY(yField, munged, level = 0, nested = false, aggregated = false, stacked = false, showDiff = false) {\n  const yDomain = yField.level(level)\n  .munged(munged)\n  .aggregated(aggregated)\n  .domain(0, stacked);\n  \n  if (yDomain[0] > 0) yDomain[0] = 0;\n  else if (yDomain[1] < 0) yDomain[1] = 0;\n\n  if (showDiff && !nested) {\n    if (yDomain[0] === 0) yDomain[1] *= 1.25;\n    else if (yDomain[1] === 0) yDomain[0] *= 1.25;\n  }\n return yDomain;\n}\nexport default genFunc(Bar);\nexport {conditions, domainY};\n","function brushGen(brushGen) {\n  if (!arguments.length) return this.__attrs__.brushGen;\n  this.__attrs__.brushGen = brushGen;\n  let dispatch = this.__execs__.brushDispatch;\n  brushGen.on('start.brushable', function() {\n    dispatch.apply('brushStart', this, arguments);\n  }).on('brush.brushable', function() {\n    dispatch.apply('brushed', this, arguments);\n  }).on('end.brushable', function() {\n    dispatch.apply('brushEnd', this, arguments);\n  })\n  return this;\n}\n\nexport default brushGen;","function brushMove(group, selection) {\n  let brush = this.brushGen();\n  group.call(brush.move, selection);\n  return this;\n}\n\nexport default brushMove;","import {dispatch} from 'd3';\nimport {attrFunc} from '../../modules/util';\n\nimport brushGen from './brushGen';\nimport brushMove from './brushMove';\n\nconst _attrs = {\n  brush : false,\n  brushGen: null\n}\nconst brushMixin = Base => {\n  /**\n   * Adds Brush Features\n   * @mixin BrushMixin\n   */\n  let BrushMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n      this.__execs__.brush = null;\n      this.__execs__.brushDispatch = dispatch('brushStart', 'brushed', 'brushEnd');\n      this.rebindOnMethod(this.__execs__.brushDispatch);\n    }\n  }\n  /**\n   * If brush is specified, sets the brush settings and returns the instance itself. If brush is true, renders its brush. If brush is not specified, returns the instance's current brush setting.\n   * @memberOf BrushMixin\n   * @function\n   * @example\n   * brush.brush(true); //shows brush\n   * @param {boolean} [brush=false]\n   * @return {brush|BrushMixin}\n   */\n  BrushMixin.prototype.brush = attrFunc('brush');\n  /**\n   * @private\n   */\n  BrushMixin.prototype.brushGen= brushGen;\n  /**\n   * @private\n   */\n  BrushMixin.prototype.brushMove= brushMove;\n  return BrushMixin;\n}\n\nexport default brushMixin;","import {attrFunc} from '../../modules/util';\n\nconst _attrs = {\n  fitLine: false\n}\n\nconst fitLineMixin = Base => {\n  /**\n   * adds FitLine features\n   * @mixin FitLineMixin\n   */\n  let FitLineMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n    }\n  }\n  /**\n   * If is true, renders a mean line of serieses or points. If is not specified, returns the current fitLine setting.\n   * @memberOf FitLineMixin\n   * @function\n   * @example\n   * fitLineMixin.fitLine(true)\n   * @param {boolean} [fitLine=false]\n   * @return {fitLine|FitLineMixin}\n   */\n  FitLineMixin.prototype.fitLine = attrFunc('fitLine');\n  return FitLineMixin;\n}\n\nexport default fitLineMixin;","function seriesName(_val) {\n  if (!arguments.length || _val === false) return this.__attrs__.seriesName;\n  else if (typeof _val === 'boolean' && _val) {\n    return this.__attrs__.seriesName.split('.').join(' ').trim();\n  }\n  else if (typeof _val === 'string') {\n    this.__attrs__.seriesName = _val;\n    //this.__attrs__.seriesName.split('.').join(' ').trim();\n  }\n  return this;\n}\n\nexport default seriesName;\n","import seriesName from './seriesName';\nimport {attrFunc, className} from '../../modules/util';\n\nconst curves = ['linear', 'stepped', 'curved'];\nconst _attrs = {\n  curve: curves[0],\n  point: false,\n  pointRatio : 3,\n  seriesName: className('mark series', true)\n}\n\nconst seriesMixin = Base => {\n  /**\n   * @mixin SeriesMixin\n   */\n  let SeriesMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n    }\n  }\n  SeriesMixin.prototype.seriesName = seriesName;\n  \n  /**\n   * sets a curve type. If is not specified, returns the current curve setting.\n   * @memberOf SeriesMixin\n   * @function\n   * @example\n   * series.curve('curved') //renders Catmull-Rom spline curve\n   * series.curve();\n   * @param {string} [curve=linear] (linear|stepped|curved)\n   * @return {curve|SeriesMixin}\n   */\n  SeriesMixin.prototype.curve = attrFunc('curve');\n  /**\n   * If is true, renders a point mark on each data point. If is not specified, returns the current point setting.\n   * @memberOf SeriesMixin\n   * @function\n   * @example\n   * series.point(true)\n   * @param {boolean} [point=false]\n   * @return {point|SeriesMixin}\n   */\n  SeriesMixin.prototype.point = attrFunc('point');\n  /**\n   * sets point radius relative to the line width. If is not specified, returns the current pointRatio setting.\n   * @memberOf SeriesMixin\n   * @function\n   * @example\n   * series.pointRatio(5) // the point radius will be 5 times as large as the line width.\n   * @param {number} [pointRatio=3]\n   * @return {pointRatio|SeriesMixin}\n   */\n  SeriesMixin.prototype.pointRatio = attrFunc('pointRatio');\n  return SeriesMixin;\n}\n\nexport default seriesMixin;\nexport {curves};","import {max} from 'd3';\n\nfunction pointNum(nested = false) {\n  if (nested) {\n    return max(this.__execs__.munged, d=> d.children.length);\n  } else {\n    return this.__execs__.munged.length;\n  }\n}\n\nexport default pointNum;","/**\n * If zoom is string, selects a zoom type. If zoom is true, use the normal zoom type. If zoom is not specified, renders the current zoom Setting.\n * @memberOf ZoomMixin#\n * @function\n * @example\n * zoomMixin.zoom(true) // selects normal zoom type\n * zoomMixin.zoom(false) // disable the zoom feature.\n * zoomMixin.zoom('brush') // selects brushable zoom type.\n * @param {boolean|string} [zoom=false] \n * @return {zoom|ZoomMixin}\n */\nfunction zoom(zoom) {\n  const types = ['normal', 'brush'];\n  if (!arguments.length) return this.__attrs__.zoom;\n  if (typeof zoom === 'boolean') {\n    if (zoom) this.__attrs__.zoom = 'normal';\n    else this.__attrs__.zoom = false;\n  } else if (typeof zoom === 'string') {\n    if (types.findIndex(d => d.localeCompare(zoom) === 0) >= 0) {\n      this.__attrs__.zoom = zoom;\n    }\n  } \n  return this;\n}\n\nexport default zoom;","function zoomExtent(nested = false, isDual = false, unit = 2) {\n  let pointNum = this.pointNum(nested);\n  let scale = this.__execs__.scale;\n  let range = scale.x.range();\n  let rangeDist = Math.abs(range[1] - range[0]);\n  if (isDual) {\n    let yRange = scale.y.range();\n    let yRangeDist = Math.abs(yRange[1] - yRange[0]);\n    if (rangeDist > yRangeDist) rangeDist = yRangeDist;\n  }\n  let max = pointNum*pointNum/rangeDist;\n  return [1, Math.ceil(max * unit)];\n}\n\nexport default zoomExtent;","import {event} from 'd3';\n\nfunction zoomed(renderFunc, isDual = false) {\n  const zoom = this.zoomGen();\n  const that = this;\n  const field = this.__execs__.field;\n  const axisObj = this.__execs__.axis;\n  const axisX = axisObj && axisObj.x ? axisObj.x[field.x.field()] : null;\n  const scaleObj = this.__execs__.scale;\n  const scaleX = scaleObj.x; //stroe original scale\n  const axisY = isDual && axisObj && axisObj.y ? axisObj.y[field.y.field()] : null;\n  const scaleY = isDual ? scaleObj.y : null;\n\n  let _axis = function(transform) {\n    const newScaleX = transform.rescaleX(scaleX);\n    scaleObj.x = newScaleX;\n    if (axisX) {\n      axisX.scale(newScaleX);\n      axisX.render(null, true);\n    }\n    if (isDual) {\n      const newScaleY = transform.rescaleX(scaleY);\n      scaleObj.y = newScaleY;\n      if (axisY) {\n        axisY.scale(newScaleY);\n        axisY.render(null, true);\n      }\n    }\n  }\n\n  zoom.on('zoom.zoomable.zoomed', function() {\n    const transform = event.transform;\n    if(!transform) return;\n    _axis(transform);\n    if (that.__execs__.tooltip) that.__execs__.tooltip.hide(); //reset tooltip\n    renderFunc();\n  })\n  return this;\n}\n\nexport default zoomed;","function zoomGen(_val) {\n  if (!arguments.length) return this.__attrs__.zoomGen;\n  this.__attrs__.zoomGen = _val;\n  const that = this;\n  const dispatch = that.__execs__.zoomDispatch;\n  _val.on('zoom.zoomable', function() {\n    dispatch.apply('zoom', this, arguments);\n  });\n  return this;\n}\n\nexport default zoomGen;","function zoomTransform(group, transform) {\n  group.call(this.zoomGen().transform, transform);\n  return this;\n}\n\nexport default zoomTransform;","import {dispatch} from 'd3';\nimport {setMethodsFromAttrs} from '../../modules/util';\n\nimport pointNum from './pointNum';\nimport zoom from './zoom';\nimport zoomExtent from './zoomExtent';\nimport zoomed from './zoomed';\nimport zoomGen from './zoomGen';\nimport zoomTransform from './zoomTransform';\n\nconst _attrs = {\n  zoom : false,\n  zoomGen: null\n}\n\nconst zoomMixin = Base => {\n  /**\n   * @mixin ZoomMixin\n   */\n  let ZoomMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n      this.__execs__.zoom = null;\n      this.__execs__.zoomDispatch = dispatch('zoom');\n      this.rebindOnMethod(this.__execs__.zoomDispatch);\n    }\n  }\n  ZoomMixin.prototype.pointNum = pointNum;\n  ZoomMixin.prototype.zoom = zoom;\n  ZoomMixin.prototype.zoomed = zoomed;\n  ZoomMixin.prototype.zoomExtent = zoomExtent;\n  ZoomMixin.prototype.zoomGen = zoomGen;\n  ZoomMixin.prototype.zoomTransform = zoomTransform;\n  ZoomMixin.prototype.isBrushZoom = isBrushZoom;\n  setMethodsFromAttrs(ZoomMixin, _attrs);\n  return ZoomMixin;\n}\n\nfunction isBrushZoom() {\n  return this.__attrs__.zoom && this.__attrs__.zoom === 'brush';\n}\n\n\nexport default zoomMixin;","import {attrFunc} from '../../modules/util';\n\nconst _attrs = {\n  shape: null\n}\n\nconst shapeMixin = Base => {\n  /**\n   * @mixin ShapeMixin\n   */\n  let ShapeMixin = class extends Base {\n    constructor() {\n      super();\n      this.setAttrs(_attrs);\n    }\n  }\n  /**\n   * selects a shape type. Available shapes depends on the chart type. If shape is not specified, returns the current shape setting.\n   * @memberOf ShapeMixin\n   * @function\n   * @example\n   * line.shape('area')\n   * parCoords.shape('scatter-matrix')\n   * treemap.shape('pack')\n   * @param {string} [shape]\n   * @return {shape|ShapeMixin}\n   */\n  ShapeMixin.prototype.shape = attrFunc('shape');\n  return ShapeMixin;\n}\n\nexport default shapeMixin;","import {brushX} from 'd3';\n\nfunction _brush() {\n  if (!this.brush()) return;\n  const canvas = this.__execs__.canvas;\n  const innerSize = this.innerSize();\n  const brushGen = brushX().extent([[0,0], [innerSize.width, innerSize.height]]);\n  let brushG = canvas.selectAll('.brush.x')\n    .data([innerSize]);\n  brushG.exit().remove();\n  brushG.enter().append('g')\n    .attr('class', 'brush x')\n    .merge(brushG)\n    .attr('transform', 'translate(' + [0, 0] +')')\n    .call(brushGen);\n\n  this.brushGen(brushGen);\n}\n\nexport default _brush;","function _legend() { \n  let field = this.__execs__.field;\n  if (!field.region) { \n    return; \n  }\n  this.renderLegend();\n}\n\nexport default _legend;","import {event, zoomIdentity, scaleOrdinal} from 'd3';\nimport _legend from './_legend';\nimport line from './';\n\nfunction _brushZoom(ratio = 0.75) {\n  this.noAxisOffset(true); \n  this.renderCanvas();\n  const that = this;\n  const innerSize = this.innerSize();\n  const bigHeight = Math.round(innerSize.height * ratio);\n  const smallHeight = innerSize.height - bigHeight;\n  const settings = ['axis', 'axisTitles', 'color', 'curve', 'multiTooltip', 'normalized', 'padding' ,'point', 'pointRatio', 'regionPadding', 'shape', 'size', 'stacked', 'grid', 'font', 'label', 'tooltip']\n    .map(d => { return {key: d, value:this[d]()};});\n  const lines = [];\n  let __regionLocal = (d,i) => {\n    d.x = 0; \n    d.y =  i === 0 ? 0 : bigHeight\n  }\n  let region = this.renderRegion(__regionLocal, [{h: bigHeight}, {h: smallHeight}], true);\n  region.each(function(d,i) {\n    let l = line().container(this)  \n      .data(that.data())\n      .dimensions(that.dimensions()).measures(that.measures())\n      .width(innerSize.width).height(d.h)\n      .legend(false)\n      .zeroMargin(true)\n      .parent(that);\n    settings.forEach(d => l[d.key](d.value));\n    if (i == 0) { //big\n      let xAt = l.axis().find(d=>d.target==='x');\n      if (xAt) xAt.showTitle = false;\n      l.brush(false).zoom('normal');\n    } else {\n      l.multiTooltip(false).tooltip(false).brush(true).point(false);\n    }\n    l.render();\n    lines.push(l);\n  })\n  //legend\n  if (this.isNested()) {\n    let regionDomain = this.__execs__.field.region.munged(this.__execs__.munged).level(0).domain();\n    this.scale().color = scaleOrdinal().domain(regionDomain).range(this.color());\n    _legend.call(this);\n  }\n  \n  //control brush+zoom\n  const brushScale = lines[1].__execs__.scale.x\n  const brushGroup = lines[1].__execs__.canvas.select('.brush.x');\n  const zoomScale = lines[0].__execs__.scale.x; //maintain inital scale\n  const zoomGroup = this.__execs__.canvas;\n  lines[0].on('zoom.line', function() {\n    if (event.sourceEvent && (event.sourceEvent.type === 'zoom' || event.sourceEvent.type === \"end\" || event.sourceEvent.type === \"brush\")) return; // ignore brush-by-zoom\n    let newDomain = event.transform.rescaleX(brushScale).domain();\n    lines[1].brushMove(brushGroup, newDomain.map(brushScale));\n  });\n  lines[1].on('brushed.line brushEnd.line', function() {\n    if (event.sourceEvent && event.sourceEvent.type === 'brush') return; // ignore brush-by-zoom\n    let range = event.selection|| brushScale.range();\n    let domain = range.map(brushScale.invert);\n    range = domain.map(zoomScale);\n    lines[0].zoomTransform(zoomGroup, zoomIdentity\n      .scale((zoomScale.range()[1] - zoomScale.range()[0]) / (range[1] - range[0]))\n      .translate(-range[0], 0)); \n  })\n}\n\nexport default _brushZoom;","import {timeFormat, area, curveCatmullRom, curveLinear, curveStep, line, max, select, transition} from 'd3';\nimport {curves} from '../seriesMixin'\nimport {shapes} from './';\nimport {className, labelFormat} from '../../modules/util';\n\nfunction _mark(zoomed = false) {\n  const that = this;\n  const canvas = this.__execs__.canvas;\n  const field = this.__execs__.field;\n  const nested = this.isNested.call(this);\n  const scale = this.__execs__.scale;\n  const stacked = this.isStacked();\n  const color = this.color();\n  const label = this.label();\n  const individualScale = this.isIndividualScale();\n  const size = this.size();\n  const showPoint = this.point();\n  const pointRatio = this.pointRatio();\n  const trans = zoomed ? transition().duration(0).delay(0) : transition().duration(this.transition().duration).delay(this.transition().delay);  \n  const isArea = this.shape() === shapes[1];\n  const yField = this.measureName();\n  const curve = this.curve() === curves[0] ? curveLinear : (this.curve() === curves[1] ? curveStep : curveCatmullRom);\n  const scaleBandMode = this.scaleBandMode();\n  const multiTooltip = this.multiTooltip();\n  const stream = this.stream();\n  const xKey = d => field.x.interval() ? new Date(d.data.key) : d.data.key;\n  const xValue = d => scale.x( xKey(d)) + (scaleBandMode ? scale.x.bandwidth()/2 : 0);\n  const yValueFunc = (s) => {\n    return d => {\n      return stacked ? s(d.data.value[yField + '-end']) : s(d.data.value[yField])\n    }\n  }\n  const lineInitGen = line().x(xValue).y(max(scale.y.range())).curve(curve);\n  const lineGenFunc = (ys) => {\n    return line().x(xValue).y(yValueFunc(ys)).curve(curve);\n  }\n  const areaInitGen = area().x(xValue)\n    .y(max(scale.y.range())).curve(curve);\n  const areaGenFunc = (ys) =>  {\n    return area().x(xValue)\n    .y0(d => stacked ? scale.y(d.data.value[yField + '-start' ]): max(scale.y.range()))\n    .y1(yValueFunc(ys)).curve(curve);\n  }\n  let __local = function (selection) {\n    let tFormat = (key) => {\n      let f = field.x.isInterval() ? timeFormat(field.x.format()) : null; \n      return f ? f(key) : key;\n    }\n\n    selection.each(function(d, i, arr) {\n      d.value = stacked ? d.data.value[yField + '-end'] : d.data.value[yField];\n      d.x = xValue(d);\n      if (isNaN(d.x) && scale.x._defaultDomain) {\n        d.x = that.tempPosForOrdinalScale(xKey(d), scale.x);\n      }\n      if (stream) {\n        const curX = xKey(d);\n        if (scale.x.invert) {\n          const dist = that.distDomain(scale.x);\n          if (curX > scale.x._lastDomain[scale.x._lastDomain.length-1]) {\n            d.x0 = d.x + dist;\n          }\n        } else {\n          d.x0 = that.tempPosForOrdinalScale(xKey(d), scale.x);\n        }\n      }\n      d.y = yValueFunc(individualScale ? d.parent.scale : scale.y)(d);\n      d.anchor = i === 0 ? 'start' : (i === arr.length-1 ? 'end' : 'middle'); \n      d.text = labelFormat(d.value);\n      d.color = d.parent.color;\n      d.key = tFormat(d.data.key);\n    })\n  }\n\n  let __upward = function (selection) {\n    selection.each(function(d,i,arr) {\n      let upward = true;\n      //let result = mark.get(this);\n      if(i < arr.length -1 && arr[i+1]) {\n        let nextResult = arr[i+1];\n        upward = (nextResult.y <= d.y);\n      }\n      d.upward = upward;\n    });\n  }\n\n  let __seriesInit = function (selection, area = false) {\n    if(area) {\n      selection.each(function(d) {\n        let target = d.children;\n        select(this).attr('d', areaInitGen(target)).attr('fill-opacity', 0.4)\n          .style('stroke', 'none');\n      })\n    }\n    else {\n      selection.each(function(d) {\n        let target = d.children;\n        select(this).attr('d', lineInitGen(target))\n          .style('fill', 'none');\n      })\n    }\n  }\n  let __series = function (selection, area = false, stream = false) {\n    const c = d => nested ? scale.color(d.data.key) : color[0];\n    const dist = stream && that.distDomain(scale.x);\n    selection.each(function(d) {\n      let target =  d.children;\n      let thisSelect = select(this);\n      if (stream) {\n        thisSelect\n          .attr('d', (area ? areaGenFunc : lineGenFunc)(individualScale ? d.scale : scale.y)(target))\n          .attr('transform', `translate(${dist},0)`)\n          .transition(trans)\n            .attr('transform', `translate(0,0)`)\n      } else {\n        thisSelect.transition(trans)\n          .attr('d', (area ? areaGenFunc : lineGenFunc)(individualScale ? d.scale : scale.y)(target));\n      }\n      \n    })\n    if (area) {\n      selection\n        .attr('fill', c).attr('stroke', 'none')\n    } else {\n      selection.attr('stroke', c)\n        .attr('stroke-width', size.range[0] + 'px')\n    }\n  }\n  let __pointInit = function (selection) {\n    selection\n      .attr('r', (size.range[0] - size.range[0] / 4) * pointRatio)\n      .attr('stroke-width', size.range[0] / 4 * pointRatio)\n      .style('fill', '#fff')\n      .attr('opacity',  showPoint ? 1 : 0)\n      .style('cursor', 'pointer')\n      .attr('cx', d => d.x0 || d.x)\n      .attr('cy', d => stream ? d.y : max(scale.y.range()))\n  }\n  let __point = function (selection) {\n    selection\n      .transition(trans)\n      .attr('r', (size.range[0] - size.range[0] / 4) * pointRatio)\n      .attr('stroke-width', size.range[0] / 4 * pointRatio)\n      .attr('opacity',  showPoint ? 1 : 0)\n      .attr('cx', d => d.x)\n      .attr('cy', d => d.y)\n  }\n  let __labelInit = function (selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection.attr('x', d => d.x0 || d.x)\n        .attr('y', d => stream ? d.y : max(scale.y.range()))\n        .attr('stroke', 'none')\n        .style('visibility', label ? 'visible' : 'hidden')\n        .text(d.text)\n      that.styleFont(selection);\n    })\n  }\n  let __label = function(selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection.attr('text-anchor', d.anchor)\n        .style('pointer-events', multiTooltip ? 'none' : 'all')\n        .transition(trans)\n        .attr('y', d.y  + (size.range[0] / 2 * pointRatio + 1) * (d.upward ? 1 : -1))\n        .attr('x', d.x)\n        .attr('dy', d.upward ? '.71em' : 0)\n        .style('visibility', label ? 'visible' : 'hidden')\n        .text(d.text);\n      that.styleFont(selection);\n    })\n  }\n\n  let __appendSeries = function (selection) {\n    let series = selection.select(that.seriesName());\n    if (series.empty()) {\n      series = selection.append('g').attr('class', that.seriesName(true));\n    }\n    let ___append = function(selection, area) {\n      let path = selection.selectAll('path' + className((area ? 'area' : 'line'), true))\n      .data(d => [d], (d,i) => d.data ? d.data.key : i)\n      path.exit().remove();\n      path.enter().append('path')\n        .attr('class', className((area ? 'area' : 'line')))\n        .call(__seriesInit, area)\n        .merge(path)\n        .call(__series, area, stream)\n        .style('pointer-events', 'none');\n    }\n    if(isArea) {\n      series.call(___append, true);\n    } else { // remove area\n      series.selectAll('path' + className('area', true)).remove();\n    }\n    series.call(___append, false);\n  }\n\n  let __appendPoints = function (selection) {\n    selection.attr('fill', d => d.color)\n      .attr('stroke', d => d.color);\n    let point = selection.selectAll(that.nodeName())\n      .data(d =>  d.children , d => d.data.key)\n    point.exit().remove();\n    let pointEnter = point.enter().append('g')\n      .attr('class', that.nodeName(true))\n      .call(__local);\n    pointEnter.append('circle')\n      .call(__pointInit);\n    pointEnter.append('text')\n     .call(__labelInit);\n    point.call(__local);\n    point = pointEnter.merge(point)\n      .call(__upward);\n    point.select('circle')\n     .call(__point);\n    point.select('text')\n      .call(__label)\n  }\n  let region = canvas.selectAll(this.regionName());\n  region.each(function() {\n    select(this).each(function(d) {\n      d.children.sort((a,b) => xValue(a) - xValue(b));\n    }).call(__appendSeries)\n      .call(__appendPoints);\n  });\n}\n\nexport default _mark;","import {zip} from 'd3';\nimport dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\nimport {countMeasure, mixedMeasure} from '../../modules/measureField';\nimport {conditions} from './';\nimport {ConditionException} from '../../modules/error';\nimport {comparator, stack} from '../../modules/transform';\n\nfunction _munge() { \n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (dimensions.length <= 2 && measures.length < 2) {\n      if(dimensions[1]) field.region = dimensionField(dimensions[1]);\n      field.x = dimensionField(dimensions[0]);\n      if (measures.length === 0) this.measure(countMeasure); //use fake-measure for counting\n      field.y = measureField(measures[0]);\n      if (measures.length === 0) return conditions[1];\n      else if (measures.length === 1) return conditions[0];\n    } else if (dimensions.length === 1 && measures.length >= 2) {\n      field.region = dimensionField(this.mixedDimension());\n      field.x = dimensionField(dimensions[0]);\n      field.y = measureField(mixedMeasure).mixed(true).measures(measures);\n      return conditions[2];\n    }\n    else throw new ConditionException();\n  };\n  this.condition(conditionFunc); \n  const field = this.__execs__.field;\n  const mixed = this.isMixed();\n  \n  if (this.aggregated()) {\n    this.__execs__.munged = [this.data()];\n  } else if (mixed) { \n    this.__execs__.munged = this.aggregateMixed(true); \n  } else {\n    this.__execs__.munged = this.aggregate(true);\n    if (!this.isNested()) {\n      this.__execs__.munged = [this.__execs__.munged[0].parent];\n    } \n  }\n  if (this.isStacked()) {\n    let munged = this.__execs__.munged;\n    let orderList = munged[0].children.map(d => d.data.key);\n    //use temporary structure using zip\n    munged.forEach( (m,i) => {\n      if (i > 0) {\n        m.children.sort(comparator('ascending', orderList, true, d => d.data.key));\n      }\n    }) //sort zipped\n    let valuesZipped = munged.map(d => d.children);\n    valuesZipped = zip.apply(null, valuesZipped);\n    valuesZipped.forEach(d => {\n      stack(d, field.y, this.normalized());\n    })\n  }\n}\n\nexport default _munge;","function _panning() {\n  if (this.stream()) {\n    this.streamPanning(this.__execs__.scale.x);\n  }\n}\n\nexport default _panning;","import {extent, scaleBand, scalePoint, scaleLinear} from 'd3';\nimport {continousScale} from '../../modules/transform';\nimport {domainY} from './index';\n\nfunction individualDomain (target, measureField, padding = 0) {\n  let field = measureField.field();\n  let domain = target.children.map(function(d) {\n    return d.data.value[field];\n  });\n  domain = extent(domain);\n  if (padding <= 0) return domain;\n  let dist = Math.abs(domain[0] - domain[1]);\n  dist *= padding * 0.5;\n  return [domain[0] - dist, domain[1] + dist];\n}\n\n\nfunction _domain() {\n  const keep = this.keep();\n  const scale = this.scale();\n  const munged = this.__execs__.munged;\n  const nested = this.isNested();\n  const stacked = this.isStacked();\n  const aggregated = this.aggregated();\n  const field = this.__execs__.field;\n  const level = 1;\n  const isMixed = this.isMixed();\n  const individualScale = this.isIndividualScale();\n  const viewInterval = this.viewInterval();\n  let yDomain, xDomain;\n  let regionDomain;\n  \n  scale.y = scaleLinear();\n  if (nested) {\n    regionDomain = field.region.level(0).munged(munged).domain(); \n    scale.color = this.updateColorScale(regionDomain, keep);\n  }\n\n  if (this.isFacet()) { \n    scale.region  = scaleBand().domain(regionDomain).padding(this.regionPadding());\n    return;\n  } \n  \n  xDomain = field.x.munged(munged).level(level).domain();\n  yDomain = domainY(field.y, munged, level, aggregated, stacked);\n  //use scaleLinear when domain is number\n  let isNumberDomain = true;\n  for (let i = 0; i < xDomain.length; i++) {\n    let d = xDomain[i];\n    if(isNaN(d)) {\n      isNumberDomain = false;\n      break;\n    } else if (typeof d === 'string') {\n      xDomain[i] = +d;\n    }\n  }\n  \n  if (this.scaleBandMode()) {\n    if (!keep) scale.x = scaleBand().padding(this.padding());\n  } else if (field.x.interval() || isNumberDomain) { \n    if (field.x.order() === 'natural') {\n      if (xDomain[0] instanceof Date) xDomain = extent(xDomain); \n      else xDomain = extent(xDomain.map(d => +d)); \n    } else {\n      xDomain = [xDomain[0], xDomain[xDomain.length-1]]\n    }\n    if (!keep) scale.x = continousScale(xDomain, null, field.x);\n  } else {\n    if (!keep) scale.x = scalePoint().padding(this.padding());\n  }\n  \n  \n  if (!keep && viewInterval) {\n    xDomain = this.limitViewInterval(scale.x, xDomain);\n  } else if (keep && this.stream()) {\n    xDomain = this.limitViewInterval(scale.x, xDomain, true);\n  }\n  scale.x.domain(xDomain);\n  this.setCustomDomain('y', yDomain);\n\n  if (isMixed && individualScale) {\n    munged.forEach(m => {\n      let domain = individualDomain(m, field.y, this.padding());\n      m.scale = scaleLinear().domain(domain).nice();\n      m.scale._defaultDomain = domain;\n      if (this.isMixed()) {\n        let measure = this.measures().find(d => d.field === m.data.key);\n        if (measure && measure.customDomain) {\n          m.scale._defaultDomain = domain;\n          m.scale.domain(measure.customDomain);\n        }\n      }\n    });\n  }\n  return this;\n}\n\nexport default _domain;","function _range() {\n  const scale = this.scale();\n  const munged = this.__execs__.munged;\n  const individualScale = this.isIndividualScale();\n  const facet = this.facet();\n  const isMixed = this.isMixed();\n  const xAt = this.axisX();\n  const yAt = this.axisY();\n  \n  if (this.isFacet()) { \n    if (facet.orient === 'horizontal' && xAt) {\n      xAt.orient = 'top';\n      xAt.showDomain = false;\n      this.thickness(xAt, scale.region, true, true);\n      if (yAt) yAt.thickness = 0;\n    } else if (facet.orient === 'vertical' && yAt) {\n      yAt.orient = 'right';\n      yAt.showDomain = false;\n      this.thickness(yAt, scale.region, false, true);\n      if (xAt) xAt.thickness = 0;\n    }\n    const innerSize = this.innerSize();\n    if (facet.orient === 'vertical') {\n      scale.region.rangeRound([0, innerSize.height]);\n    } else {\n      scale.region.rangeRound([0, innerSize.width]);\n    }\n    return;\n  } \n\n  if (isMixed && individualScale && yAt) {\n    yAt.orient = 'left';\n    this.thickness(yAt, munged[0].scale, false, false);\n    let tempAt = Object.assign({}, yAt)\n    tempAt.orient = 'right';\n    this.axis(tempAt);\n    this.thickness(tempAt, munged[munged.length-1].scale, false, false);\n   } else if (yAt) {\n    let right = this.axis().find(d => d.target === 'y' && d.orient !== yAt.orient) \n    if (right) this.axis(right, false);\n    this.thickness(yAt, scale.y, false, false);\n  }\n \n  this.thickness(xAt, scale.x, true, scale.x.invert ? false : true);\n  const innerSize = this.innerSize();\n  scale.x.range([0, innerSize.width]); \n  if (scale.x.invert && !this.scaleBandMode()) {\n    const xDomain = scale.x.domain();\n    let d0 = this.padding();\n    d0 = innerSize.height * d0 /2;\n    let d1 = innerSize.width - d0;\n    if (xDomain[0] === xDomain[1] || xDomain[1] - xDomain[0] === 0) { // if no domain, using center\n      let center = (d0+d1)/2;\n      scale.x.range([center, center]) ;\n    } else {\n      scale.x.range([d0, d1]); \n    }\n  } \n  scale.y.range([innerSize.height, 0]); //reverse\n  \n  if (individualScale) { //individual scale \n    munged.forEach(m => {\n      m.scale.range([innerSize.height, 0])\n    });\n  }\n  return this;\n}\n\nexport default _range;","function _axis() {\n  const that = this;\n  const munged = this.__execs__.munged;\n  const scale = this.__execs__.scale;\n  const grid = this.grid();\n  const individualScale = this.isIndividualScale();\n  const innerSize = this.innerSize();\n  const fieldObj = this.__execs__.field;\n \n  let _axisScaleX = function (axisToggle) {\n    fieldObj.x.axis(axisToggle);\n    let curAxis = that.axisDefault(scale.x, axisToggle);\n    if (scale.x.invert) curAxis.grid(grid).gridSize(innerSize.height);\n    if (axisToggle.orient === 'bottom') curAxis.y(scale.y.range()[0]);\n    return curAxis;\n  }\n\n  let _axisScaleY = function (axisToggle, scaleY = scale.y, field) {\n    if (!field) {\n      fieldObj.y.axis(axisToggle);\n    } else {\n      axisToggle.field = field;\n    }\n    let curAxis = that.axisDefault(scaleY, axisToggle);\n    curAxis.grid(grid).gridSize(innerSize.width);\n    if (axisToggle.orient === 'right') curAxis.x(scale.x.range()[1]);\n    return curAxis;\n  }\n\n  let xAt = this.axisX();\n  let yAt = this.axisY();\n  if (this.isFacet()) {\n    this.axisFacet();\n  } else {\n    if (xAt) {\n      _axisScaleX(xAt);\n    } \n    if (yAt) { \n      if (individualScale) { \n        let ats = this.axis().filter(d => d.target === 'y');\n        if (munged.length <= 2) {\n          ats.forEach((d,i) => _axisScaleY(d, munged[i].scale, munged[i].data.key));\n        } \n      } else {\n        _axisScaleY(yAt);\n      }\n    }\n  }\n  this.renderAxis();\n}\n\nexport default _axis;","import {mean, transition} from 'd3';\n\nconst stroke = '#aaa';\n\nfunction _meanLine() {\n  const canvas = this.__execs__.canvas;  \n  let meanLineG = canvas.select('.mean-line-g')\n  if (!(typeof this.meanLine() === 'number') && (!this.meanLine() || this.isFacet())) {\n    meanLineG.remove();\n    return;\n  }\n  const meanLineVal = this.meanLine();\n  const ms = [];\n  const scale = this.__execs__.scale;\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay); \n  if (typeof meanLineVal === 'number' ) {\n    let domain = scale.y.domain();\n    if (meanLineVal >= domain[0] && meanLineVal <= domain[1]) {\n      ms.push({value: meanLineVal, y: scale.y(meanLineVal)});\n    }\n  } else {\n    this.regions().filter(d => {\n      if (typeof meanLineVal === 'string') {\n        return d.data.key === meanLineVal;\n      } else {\n        return true;\n      }\n    }).each(d => {\n      let result = {value: mean(d.children, d => d.value)};\n      result.y = scale.y(result.value);\n      ms.push(result);\n    })\n  }\n  \n  if (meanLineG.empty) {\n    meanLineG = canvas.append('g').attr('class', 'mean-line-g')\n  }\n  let meanLine =meanLineG.selectAll('.mean-line')\n    .data(ms)\n  meanLine.exit().remove();\n\n  let meanLineEnter = meanLine.enter().append('g')\n    .attr('class', 'mean-line')\n    .attr('transform', 'translate(' + [0, scale.y.range()[0]]+')')\n    .style('pointer-events', 'none');\n  meanLineEnter.append('line')\n    .attr('stroke', stroke)\n    .attr('shape-rendering', 'crispEdges')\n    .attr('stroke-width', '2px')\n    .attr('x2', scale.x.range()[1]);\n    \n  meanLine = meanLineEnter.merge(meanLine)\n    .transition(trans)\n    .attr('transform', d => 'translate(' + [0, d.y]+')');\n  meanLine.select('line')\n    .transition(trans)\n    .attr('x2', scale.x.range()[1]);\n}\n\nexport default _meanLine;","function _region() {\n  const aggregated = this.aggregated();\n  const canvas = this.__execs__.canvas;\n  const nested = this.isNested();\n  const scale = this.__execs__.scale;\n  const stacked = this.stacked();\n  const facet = this.facet();\n  const isFacet = this.isFacet();\n  const color = this.color();\n  let __regionLocal = d => {\n    if (aggregated) return;\n    let xy;\n    if(!nested) {\n      xy = [0,0];\n    } else if(facet && !stacked) {\n      xy = [scale.region(d.data.key), 0];\n      if (facet.orient === 'vertical') {\n        xy.reverse();\n      }\n    } else {\n      xy = [0,0];\n    }\n    d.x = xy[0]; d.y = xy[1];\n    d.color = nested ? scale.color(d.data.key) : color[0];\n  };\n  \n  //create multiTooltip area\n  if (!isFacet && this.multiTooltip()) {\n    let multiTooltipG = canvas.select('.multi-tooltip-g');\n    if (multiTooltipG.empty()) multiTooltipG = canvas.append('g').attr('class', 'multi-tooltip-g');\n  }\n  \n  this.renderRegion(__regionLocal, d => {\n      let target = stacked ? d.slice().reverse() : d;\n      return target;\n    }, isFacet);\n}\n\nexport default _region;","import line from './';\nimport {mixedMeasure} from '../../modules/measureField';\n\nfunction _facet () {\n  const parent = this;\n  const scale = this.__execs__.scale;\n  const facet = this.facet();\n  const canvas = this.__execs__.canvas;\n  const innerSize = this.innerSize();\n  const dimensions = [this.dimensions()[0]];\n  const measures = this.isMixed() ? [mixedMeasure] : this.measures();\n  let width, height;\n  let settings = ['axisTitles', 'curve', 'meanLine', 'multiTooltip', 'normalized', 'padding' ,'point', 'pointRatio', 'regionPadding', 'shape', 'size', 'grid', 'font', 'label']\n    .map(d => { return {key: d, value:this[d]()};});\n  let hasX = this.axisX();\n  let hasY = this.axisY();\n  let smallLines = []; //stroe sub-charts\n  let _smallLine = function(d) {\n    let smallLine = line()\n        .container(this)\n        .data(d)\n        .dimensions(dimensions).measures(measures)\n        .width(width).height(height)\n        .legend(false)\n        .tooltip(false)\n        .parent(parent) \n        .zeroMargin(true) \n        .aggregated(true) \n        .color(scale.color(d.data.key));\n    settings.forEach(d => smallLine[d.key](d.value));\n    if (hasY) smallLine.axis({target:'y', orient:'left'});//showTitle: facet.orient === 'horizontal' ? i === 0 : true});\n    if (hasX) smallLine.axis({target:'x', orient:'bottom'});//showTitle: facet.orient === 'horizontal' ? true : i === arr.length-1});\n    smallLine.render();\n    smallLines.push(smallLine);\n  }\n  if (facet.orient === 'horizontal') {\n    width =  scale.region.bandwidth();\n    height = innerSize.height;\n  } else {\n    width = innerSize.width;\n    height = scale.region.bandwidth();\n  }\n\n  canvas.selectAll('.facet')\n    .each(_smallLine);\n  smallLines.forEach(sm => { //deal sub-chart's event\n    sm.on('selectStart.facet selectMove.facet selectEnd.facet', function(tick) { //propgate events to other sub-chart\n      //let start = event.type === 'mouseenter';\n      smallLines.forEach(osm => {\n        if(osm !== sm) {\n          osm.showMultiTooltip(tick);\n        }\n      });\n    })\n  });\n}\n\nexport default _facet;","import {transition} from 'd3';\nimport {className} from '../../modules/util';\nconst fitLineColor = '#c0ccda';\nexport default function() {\n  const canvas = this.__execs__.canvas;  \n  const scale = this.__execs__.scale;\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay);\n  const fitLineVal = this.fitLine() ;\n  let fitLineG = canvas.selectAll(className('fit-line-g', true));\n  if (!fitLineVal || !scale.x.invert) {\n    if (!fitLineG.empty()) canvas.select(className('fit-line-g', true)).remove();\n    return;\n  } \n  let leastSquares = this.leastSquare(fitLineVal);\n  let xValues = scale.x.domain();\n  let yValues = leastSquares.map(l => {\n    return xValues.map(d => l.slope * d + l.intercept);\n  });\n  \n  if (fitLineG.empty()) {\n    fitLineG = canvas.append('g').attr('class',  className('fit-line-g'))\n      .attr('clip-path', `url(#${canvas.selectAll(className('canvas-g-clip-path', true)).attr('id')}`);\n  }\n  fitLineG.datum(yValues);\n\n  let fitLine = fitLineG.selectAll(className('fit-line', true))\n    .data(d => d);\n  fitLine.exit().remove();\n  let fitLineEnter = fitLine.enter().append('line')\n    .attr('class', className('fit-line'))\n    .style('fill', 'none').style('stroke', fitLineColor)\n    .style('stroke-width', 1)\n    .attr('x1', scale.x(xValues[0]))\n    .attr('x2', scale.x(xValues[1]))\n    .attr('y1', d => (d.scale ? d.scale : scale.y).range()[0])\n    .attr('y2', d => (d.scale ? d.scale : scale.y).range()[0]);\n  fitLine = fitLineEnter.merge(fitLine);\n  fitLine.transition(trans)\n    .attr('x1', scale.x.range()[0], scale.x(xValues[0]))\n    .attr('x2', scale.x(xValues[1]))\n    .attr('y1', d => (d.scale ? d.scale : scale.y)(d[0])) \n    .attr('y2', d => (d.scale ? d.scale : scale.y)(d[1]));\n}","import {bisector, mean, dispatch, event, select, selectAll, transition, ascending, descending} from 'd3';\nimport {rebindOnMethod, setMethodsFromAttrs} from './util';\nimport {className, labelFormat} from './util';\n\nconst defaultFont = {\n  'font-family': 'sans-serif',\n  'font-size': 12,\n  'font-weight': 'normal',\n  'font-style': 'normal'\n};\nconst pointOriginColor = '#fff';\nconst baseColor = '#b0bec5';\nconst _attrs = {\n  anchor: {x:'left', y:'top'}, \n  color: baseColor,\n  dx: 0,\n  dy: 0,\n  height: null,\n  font: defaultFont,\n  nodeName: className('mark node', true), \n  tooltip: null,\n  target: null,\n  keyFormat: null,\n  valueFormat: null,\n  width: null,\n  sortByValue: {type:'natural'},\n  x: 0, \n  y: 0\n}\n\nclass MultiTooltip {\n  constructor() {\n    this.__attrs__ = JSON.parse(JSON.stringify(_attrs));\n    this.__execs__ = {tooltip:null, domain:null, dispatch: dispatch('start', 'move', 'end')};\n    this.valueFormat(labelFormat);\n    rebindOnMethod(this, this.__execs__.dispatch); \n  }\n}\n\nfunction _multiTooltip () {\n  return new MultiTooltip();\n}\n\nfunction _event(selection) {\n  const that = this;\n  const domain = this.__execs__.domain;\n  const dispatch = this.__execs__.dispatch;\n  let bisectDomain = bisector(d => d.x).right;\n  let lastTick = null;\n\n  let _tick = function(start = false) {\n    const clientRectLeft = selection.node().getBoundingClientRect().left;    \n    let x = event.x - clientRectLeft;\n    let i = bisectDomain(domain, x); \n    if (i > 0 && i < domain.length) {\n      let d1 = Math.abs(x - domain[i-1].x);\n      let d2 = Math.abs(domain[i].x - x);\n      if (d1 < d2) i = i-1;\n    } \n    i = Math.max(0, Math.min(domain.length-1, i));\n    let tick = domain[i];\n    if (!lastTick || tick.x !== lastTick.x || start) {\n      _show.call(that, selection, tick);\n      dispatch.call(start ? 'start': 'move', this, tick);\n      lastTick = tick;\n    }\n  }\n\n  selection.on('mouseenter.multi-tooltip', function() {\n    _tick(true);\n  }).on('mousemove.multi-tooltip', function() {\n    _tick(false);\n  }).on('mouseleave.multi-tooltip', function() {\n    _hide.call(that, selection);\n    dispatch.call('end', this);\n    lastTick = null;\n  });\n  \n}\n\nfunction _domain() {\n  const target = this.target();\n  const points = target.__execs__.canvas.selectAll(this.nodeName());\n  const domain = [];\n  points.each(function(d) {\n    //const result = mark.get(this);\n    let find = domain.find(dd => dd.x === d.x);\n    if (find) {\n      find.points.push(this);\n    } else {\n      domain.push({x:d.x, points:[this], value: d.key});\n    }\n  })\n  this.__execs__.domain = domain.sort((a,b) => a.x-b.x);\n}\n\nfunction _hide(selection) {\n  const trans = transition().duration(180);\n  selection.select(className('baseline', true)).transition(trans).attr('opacity', 0);\n\n  let target = this.target();\n  let circle = target.nodes().filter(function() {\n    return select(this).classed(className('show'));\n  }).classed(className('show'), false).selectAll('circle');\n  if (!target.point()) circle.attr('opacity', 0);\n  else circle.style('fill', pointOriginColor);\n  if (this.tooltip()) this.tooltip().hide();\n}\n\nfunction _render(selection) {\n  const innerSize = this.target().innerSize();\n  selection.style('fill', 'none');\n  let overlay = selection.select(className('overlay', true))\n  if(overlay.empty()) {\n    overlay = selection.append('rect').attr('class', className('overlay'))\n      .style('cursor', 'crosshair');\n    selection.append('line')\n      .attr('class', className('baseline'))\n      .attr('opacity', 0)\n      .attr('shape-rendering', 'crispEdges')\n      .attr('pointer-events', 'none');\n  }\n  selection.select(className('baseline', true))\n    .attr('y1', 0).attr('y2', this.height() ? this.height() : innerSize.height)\n    .attr('stroke', baseColor);\n  overlay.attr('width', this.width() ? this.width() : innerSize.width)\n    .attr('height', this.height() ? this.height() : innerSize.height);\n  _domain.call(this);\n  _event.call(this, selection);\n  this.__execs__.tooltip = selection;\n}\n\nfunction _show(selection, tick) {\n  const showTrans = transition().duration(140);\n  const target = this.target();\n  const filtered = [];\n  if (!target.point()) { //remove existing points\n    target.__execs__.canvas.selectAll(this.nodeName()).selectAll('circle').transition(showTrans).attr('opacity', 0);\n  } else {\n    target.__execs__.canvas.selectAll(this.nodeName()).selectAll('circle').transition(showTrans).style('fill', pointOriginColor);\n  }\n  let points = selectAll(tick.points)\n    .each(function(d) {\n      let x = d.x;\n      if (x === tick.x) {\n        filtered.push({key:d.key, x:d.x, y: d.y, text: d.text});\n      }\n    })\n  \n  points.classed(className('show'), true).selectAll('circle').transition(showTrans)\n    .attr('opacity', 1)\n    .style('fill', function(d){\n      return d.color;\n    })\n  \n  \n  let baseline = selection.select(className('baseline', true));\n  baseline.transition(showTrans).attr('opacity', 1)\n    .attr('x1', tick.x + 0.5).attr('x2', tick.x + 0.5);  \n  let tooltip = this.tooltip();\n  let x, y= [];\n  let values = [];\n  selectAll(tick.points).each(function(d) {\n    let pos = tooltip.__execs__.mark.get(this);\n    x = pos.x;\n    y.push(pos.y);\n    values.push(d);\n  });\n  _sortByValue(values, this.sortByValue())\n  values = values.map(d => {return {name: d.parent.data.key || d.data.key, value: d.text}})\n  if (this.keyFormat()) {\n    const f = this.keyFormat();\n    values.forEach(d => d.name = f(d.name));\n  }\n  y = mean(y);\n  y = Math.round(y);\n  if (x && y) {\n    tooltip.x(x).y(y)\n    .key({name:'key', value:tick.value})\n    .value(values)\n    .show();\n  } else {\n    tooltip.hide();\n  }\n  \n}\n\nfunction hide() {\n  _hide.call(this, this.__execs__.tooltip);\n  dispatch.call('end', this);\n}\n\nfunction render(selection) {\n  selection = select(selection);\n  _render.call(this, selection);\n}\n\nfunction tick(tick) { //react to external dispatches\n  const selection = this.__execs__.tooltip;\n  const domain = this.__execs__.domain;\n  if(tick !== undefined && tick !== null) {\n    let find = domain.find(d => d.value == tick.value);\n    _show.call(this, selection, {x: find ? find.x : tick.x, points: find ? find.points : null, value: find? find.value : null}); \n  } else { \n    _hide.call(this, selection);\n  }\n}\n\nfunction _sortByValue(values, type = 'natural') {\n  const types = ['natural', 'ascending', 'descending'];\n  if (types.find(d => d === type)) {\n    if (values.length > 0) {\n      if (type === types[1]) {\n        values.sort((a,b) => ascending(a.value,b.value));\n      } else if (type === types[2]) {\n        values.sort((a,b) => descending(a.value,b.value));\n      }\n    }\n  }\n}\n\nMultiTooltip.prototype.hide = hide;\nMultiTooltip.prototype.render = render;\nMultiTooltip.prototype.tick = tick;\n\nsetMethodsFromAttrs(MultiTooltip, _attrs);\n\nexport default _multiTooltip;","import multiTooltip from '../../modules/multi-tooltip';\nimport {className} from '../../modules/util';\n\nfunction _single(fromMulti = false) {\n  const parent = this.parent();\n  const field = this.__execs__.field;\n  const mixed = this.isMixed();\n  let key = (d, text) => {\n    return {name: 'key', value:text};\n  }\n  let value = (d, text) => {\n    let name;\n    if (mixed) {\n      name = d.key;\n    } else if (parent && parent.isMixed()) {\n      name = d.key;\n    } else {\n      name = field.y.field();\n    }\n    return {name, value:text}\n  }\n  return this.renderTooltip({dx: (this.size().range[0] + 4), value, key}, fromMulti);\n}\n\nfunction _multi() { //multi-tooltip \n  const canvas = this.__execs__.canvas;\n  const field = this.__execs__.field;\n  let multiTooltipG = canvas.select(className('multi-tooltip-g', true));\n  if (multiTooltipG.empty()) multiTooltipG = canvas.append('g').attr('class', className('multi-tooltip-g'));\n  let tooltipObj = _single.call(this, true);\n  let multiTooltipObj = multiTooltip()\n    .target(this)\n    .dx(this.size().range[0])\n    .dy(this.size().range[0])\n    .color(this.color()[0])\n    .tooltip(tooltipObj)\n    .sortByValue(this.multiTooltip().sortByValue)\n    .keyFormat(field.x.format());\n  \n  multiTooltipObj.render(multiTooltipG.node());\n  this.__execs__.tooltip = multiTooltipObj;\n\n  const dispatch = this.__execs__.multiTooltipDispatch;\n  multiTooltipObj.on('start', function(tick) { // dispatch events to commute with sub-charts\n    dispatch.call('selectStart', this, tick);\n    dispatch.call('multiTooltip', this, tick);\n  }).on('move', function(tick) {\n    dispatch.call('selectMove', this, tick);\n    dispatch.call('multiTooltip', this, tick);\n  }).on('end', function() {\n    dispatch.call('selectEnd', this);\n    dispatch.call('multiTooltip', this);\n  });\n  \n  return multiTooltipObj;\n}\nfunction _tooltip() {\n  if (!this.isFacet() && this.multiTooltip()) _multi.call(this);\n  else if(this.tooltip() && !this.multiTooltip()) _single.call(this, false);\n}\n\nexport default _tooltip;","import {zoom} from 'd3';\n\nimport _mark from './_mark';\nimport _tooltip from './_tooltip';\n\nfunction normal() {\n  const scaleX = this.__execs__.scale.x;\n  if (!scaleX.invert) return;\n  const canvas = this.__execs__.canvas;\n  const zoomExtent = this.zoomExtent(this.isNested());\n  const parent = this.parent();\n  const zoomGen = zoom()\n    .scaleExtent(zoomExtent)\n    .translateExtent([[0, 0], [(parent ? parent : this).width(), (parent ? parent : this).height()]]);\n  canvas.call(zoomGen);   \n  this.zoomGen(zoomGen)\n    .zoomed(() => {\n      _mark.call(this, true); //reset marks\n      this.resetTooltip();\n      _tooltip.call(this); //reset tooltips\n    });\n}\n\nfunction _zoom() {\n  if (this.stream()) {\n    this.streamPanning(this.__execs__.scale.x);\n  }\n  if (!this.zoom()) return;\n  if (this.zoom() === 'normal') normal.call(this);\n}\n\nexport default _zoom;","import {dispatch} from 'd3';\nimport Facet from '../facet/';\nimport brushMixin from '../brushMixin';\nimport fitLineMixin from '../fitLineMixin';\nimport seriesMixin from '../seriesMixin';\nimport zoomMixin from '../zoomMixin';\nimport paddingMixin from '../paddingMixin';\nimport shapeMixin from '../shapeMixin';\nimport stackMixin from '../stackMixin';\nimport streamMixin from '../streamMixin';\nimport {mixedMeasure} from '../../modules/measureField';\nimport {attrFunc, genFunc, mix} from '../../modules/util';\nimport _brush from './_brush';\nimport _brushZoom from './_brushZoom';\nimport _mark from './_mark';\nimport _munge from './_munge';\nimport _panning from './_panning';\nimport _domain from './_domain';\nimport _range from './_range';\nimport _axis from './_axis';\nimport _meanLine from './_meanLine';\nimport _legend from './_legend';\nimport _region from './_region';\nimport _facet from './_facet';\nimport _fitLine from './_fitLine';\nimport _tooltip from './_tooltip';\nimport _zoom from './_zoom';\nimport {leastSquare as lsFunc} from '../../modules/transform';\n\nconst size = {range: [2, 2], scale: 'linear', reverse: false};\nconst shapes = ['line', 'area'];\nconst conditions = ['normal', 'count', 'mixed'];\nconst _attrs = {\n  meanLine : false,\n  multiTooltip: false,\n  padding: 0,\n  pointRatio : 2,\n  regionPadding: 0.1,\n  shape: shapes[0],\n  scaleBandMode : false,\n  size: size,\n  individualScale: false\n};\n\n/**\n * renders a line chart\n * @class Line\n * @augments Core\n * @augments RectLinear\n * @augments Facet\n * @augments FitLineMixin\n * @augments SeriesMixin\n * @augments BrushMixin\n * @augments ZoomMixin\n * @augments PaddingMixin\n * @augments ShapeMixin\n * @augments StreamMixin\n */\nclass Line extends mix(Facet).with(fitLineMixin, seriesMixin, brushMixin, zoomMixin, paddingMixin, shapeMixin, stackMixin, streamMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.__execs__.multiTooltipDispatch = dispatch('selectStart', 'selectMove', 'selectEnd', 'multiTooltip');\n    this.rebindOnMethod(this.__execs__.multiTooltipDispatch);\n    this.process('munge', _munge, {isPre: true})\n      .process('brushZoom', _brushZoom, {isPre: true, allow: function() {return this.isBrushZoom()}})\n      .process('domain', _domain, {isPre: true, allow: function() {return !this.isBrushZoom()}})\n      .process('range', _range, {isPre: true, allow: function() {return !this.isBrushZoom()}})\n      .process('axis', _axis, {allow: function() {return !this.isBrushZoom()}})\n      .process('region', _region, {allow: function() {return !this.isBrushZoom()}})\n      .process('facet', _facet, {allow: function() {return !this.isBrushZoom() && this.isFacet()}})\n      .process('mark', _mark, {allow: function() {return !this.isBrushZoom() && !this.isFacet()}})\n      .process('meanLine', _meanLine, {allow: function() {return !this.isBrushZoom()}})\n      .process('fitLine', _fitLine, {allow: function() {return !this.isBrushZoom()}})\n      .process('tooltip', _tooltip, {allow: function() {return !this.isBrushZoom()}})\n      .process('panning', _panning, {allow: function() {return !this.isBrushZoom()}})\n      .process('zoom', _zoom, {allow: function() {return !this.isBrushZoom()}})\n      .process('brush', _brush, {allow: function() {return !this.isBrushZoom()}})\n      .process('legend', _legend, {allow: function() {return !this.isBrushZoom()}})\n  }\n  /**\n   * @override\n   */\n  renderCanvas() {\n    return super.renderCanvas(this.point() ? this.size().range[0]*2 : 0);\n  }\n  /**\n   * If is true, renders the tooltip showing multiple points on the same horizontal position. If is a string or object, sets sorting order of items by each value. If multiTooltip is not specified, returns the instance's multiTooltip setting.\n   * @example\n   * line.multiTooltip(true) // show multiple points on the same horizontal position on a tooltip\n   * line.multiTooltip('ascending') //sort items in ascending order by their each value\n   * line.multiTooltip(false) \n   * line.multiTooltip() \n   * @param {boolean|string|object} [multiTooltip=false]\n   * @param {string} [multiTooltip.sortByValue=natural] (natural|ascending|descending)\n   * @return {multiTooltip|Line}\n   */\n  multiTooltip(multiTooltip) {\n    if (!arguments.length) return this.__attrs__.multiTooltip;\n    if (typeof multiTooltip === 'boolean') {\n      if (multiTooltip) {\n        multiTooltip = {sortByValue: 'natural'};\n      } \n    } \n    if (typeof multiTooltip === 'object') {\n      if (!multiTooltip.sortByValue) multiTooltip.sortByValue = 'natural';\n    }\n    this.__attrs__.multiTooltip = multiTooltip;\n    return this;\n  }\n\n  /**\n   * gets a result of linear least squres from serieses. If key is specified, returns the value only froma specific series. It is used for draw fit-lines.\n   * @param {string} [key] a name of a series \n   * @example\n   * let l = line.data([\n   *  {name: 'A', sales: 10, profit: 5},\n   *  {name: 'B', sales: 20, profit: 10},\n   *  {name: 'C', sales: 30, profit: 3},\n   *  ...\n   *  ]) //sets data\n   *  .dimensions(['name'])\n   *  .measures(['sales', 'profit'])\n   *  .render();\n   * l.leastSquare('A') // returns a result of the series A\n   * l.leastSquare() // returns from all serieses\n   * @return {object[]} returns [{key: fitLineVal, slope, intercept, rSquare}...] \n   */\n  leastSquare(key) {\n    const measureName = this.measureName();\n    const individualScale = this.isIndividualScale();\n    return this.__execs__.munged.filter(series => {\n      if (typeof key === 'string') {\n        return series.data.key === key;\n      } else {\n        return true;\n      }\n    }).map(series => {\n      let targets = series.children.map(d => {return {x: d.data.key, y:d.data.value[measureName]}});\n      let ls = lsFunc(targets);\n      if (individualScale && series.scale) {\n        ls.scale = series.scale;\n      }\n      ls.key = series.data.key;\n      return ls;\n    });\n  }\n\n  measureName() {\n    let measures = this.measures();\n    let yField;\n    if (this.condition() === conditions[2]) yField = mixedMeasure.field; \n    else if (this.aggregated() && measures[0].field === mixedMeasure.field) yField = measures[0].field;\n    else yField = measures[0].field + '-' + measures[0].op;\n    return yField;\n  }\n\n  isCount() {\n    return this.condition() === conditions[1];\n  }\n\n  isFacet() {\n    return this.facet() && this.isNested() && !this.stacked();\n  }\n\n  isIndividualScale() {\n    return this.individualScale() && this.isNested() && !this.stacked();\n  }\n\n  isMixed() {\n    return this.condition() == conditions[2] ;\n  }\n\n  isNested() {\n    let dimensions = this.dimensions();\n    let condition = this.condition();\n    return dimensions.length === 2 || (condition == conditions[2] && dimensions.length === 1);\n  }\n\n  isStacked() {\n    return this.stacked() && this.isNested();\n  }\n\n  muteFromLegend(legend) {\n    this.muteRegions(legend.key);\n  }\n  \n  muteToLegend(d) {\n    this.muteLegend(d.parent.data.key);\n  }\n  \n  demuteFromLegend(legend) {\n    this.demuteRegions(legend.key);\n  }\n  \n  demuteToLegend(d) {\n    this.demuteLegend(d.parent.data.key);\n  }\n  \n  showMultiTooltip(tick, start) { //for the facet condition\n    if (this.multiTooltip()) {\n      let mt = this.__execs__.tooltip;\n      mt.tick(tick, start);\n    }\n  }\n} \n/**\n * If meanLine is specified sets the meanLine setting and returns the Line instance itself. If meanLine is true renders a mean-line on each series. If meanLine is not specified, returns the current meanLine setting.\n * @function\n * @example\n * line.meanLine(true)\n * @param {boolean} [meanLine=false] If is true, renders a mean-line.\n * @return {meanLine|Line}\n */\nLine.prototype.meanLine = attrFunc('meanLine');\nLine.prototype.scaleBandMode = attrFunc('scaleBandMode');\n/**\n * If individualScale is specified sets the individualScale setting and returns the Line instance itself. When a line chart has multiple measures, each measure will be a series. If individualScale is true, when has multiple measures, each series will be drawn based on an individual scale of itself.\n * @function\n * @example\n * line.individualScale(true)\n * @param {boolean} [individualScale=false] If is true, renders a mean-line.\n * @return {individualScale|Line}\n */\nLine.prototype.individualScale = attrFunc('individualScale');\n\nfunction domainY(fieldY, munged, level=0, aggregated=false, stacked=false) {\n  return fieldY.munged(munged).level(level).aggregated(aggregated).domain(0, stacked);\n}\nexport default genFunc(Line);\nexport {conditions, domainY, shapes};\n","function _axis() {\n  let that = this;\n  let scale = this.__execs__.scale;\n  let grid = this.grid();\n  let innerSize = this.innerSize();\n  let field = this.__execs__.field;\n\n  let _axisScaleX = function (axisToggle) {\n    field.x.axis(axisToggle);\n    let curAxis = that.axisDefault(scale.x, axisToggle);\n    if (axisToggle.orient === 'bottom') curAxis.y(scale.y.range()[0]);\n    curAxis.grid(grid).gridSize(innerSize.height);\n    return curAxis;\n  }\n\n  let _axisScaleY = function (axisToggle) {\n    field.y.axis(axisToggle);\n    let curAxis = that.axisDefault(scale.y, axisToggle);\n    if (axisToggle.orient === 'right') curAxis.x(scale.x.range()[1]);\n    curAxis.grid(grid).gridSize(innerSize.width);\n    return curAxis;\n  }\n\n  let xAt = this.axisX();\n  let yAt = this.axisY();\n  if (this.isFacet()) { \n    this.axisFacet();\n  } else {\n    if (xAt) {\n      _axisScaleX(xAt);\n    } \n    if (yAt) {\n      _axisScaleY(yAt);\n    }\n  }\n\n  this.renderAxis();\n}\n\nexport default _axis;","import {extent, scaleBand, scaleLinear} from 'd3';\nimport {continousScale} from '../../modules/transform';\n\nfunction _domain() {\n  const keep = this.keep();\n  const scale = this.scale();\n  const munged = this.__execs__.munged;\n  const field = this.__execs__.field;\n  const aggregated = this.aggregated();\n  const viewInterval = this.viewInterval();\n\n  let regionDomain, rDomain;\n  \n  if (this.isColor()) {\n    regionDomain = field.region.munged(munged).domain();\n    scale.color = this.updateColorScale(regionDomain, keep);\n  }\n  if (this.isFacet()) {\n    scale.region = scaleBand().domain(regionDomain).padding(this.regionPadding());\n    return;\n  }\n\n  const data = aggregated ? this.data().children : this.data();\n  let xDomain = extent(data, d => (aggregated ? d.data : d)[field.x.field()]);\n  let yDomain = extent(data, d => (aggregated ? d.data : d)[field.y.field()]);\n  if (!keep) {\n    scale.x = continousScale(xDomain, undefined, field.x);\n    scale.y = continousScale(yDomain, undefined, field.y);\n  }\n\n  if (this.isSized()) {\n    rDomain = extent(data, d => d[field.radius.field()]);\n    scale.r = scaleLinear().domain(rDomain);\n  }\n  if (!keep && viewInterval) {\n    xDomain = this.limitViewInterval(scale.x, xDomain);\n    scale.x.domain(xDomain);\n  } else if (keep && this.stream()) {\n    xDomain = this.limitViewInterval(scale.x, xDomain, true);\n    scale.x.domain(xDomain);\n  } else {\n    this.setCustomDomain('x', xDomain);\n  }\n\n  this.setCustomDomain('y', yDomain);\n\n  return this;\n}\n\nexport default _domain;","import scatter from './';\n\nfunction _facet () {\n  const parent = this;\n  const scale = this.__execs__.scale;\n  const facet = this.facet();\n  const canvas = this.__execs__.canvas;\n  const innerSize = this.innerSize();\n  const measures =  this.measures();\n  let width, height;\n  let settings = ['axisTitles', 'size', 'grid', 'font', 'label', 'tooltip']\n    .map(d => { return {key: d, value:this[d]()};});\n  let hasX = this.axisX();\n  let hasY = this.axisY();\n  let _small = function(d) {\n    let small = scatter()\n        .container(this)\n        .data(d)\n        .measures(measures)\n        .width(width).height(height)\n        .legend(false)\n        .zeroMargin(true) \n        .aggregated(true) \n        .parent(parent) \n        .color(scale.color(d.data.key));\n    settings.forEach(d => small[d.key](d.value));\n    if (hasY) small.axis({target:'y', orient:'left'});\n    if (hasX) small.axis({target:'x', orient:'bottom'});//, showTitle: i === arr.length-1});\n    small.render();\n  }\n  if (facet.orient === 'horizontal') {\n    width =  scale.region.bandwidth();\n    height = innerSize.height;\n  } else {\n    width = innerSize.width;\n    height = scale.region.bandwidth();\n  }\n\n  canvas.selectAll('.facet')\n    .each(_small);\n}\n\nexport default _facet;","import {transition} from 'd3';\nimport {className} from '../../modules/util';\nimport {leastSquare} from '../../modules/transform';\nconst fitLineColor = '#c0ccda';\nfunction _fitLine() {\n  const canvas = this.__execs__.canvas;\n  let fitLineG = canvas.select(className('fit-line-g', true));\n  \n  if (!this.fitLine()) {\n    if (!fitLineG.empty()) canvas.select(className('fit-line-g', true)).remove();\n    return;\n  }\n  const field = this.__execs__.field;\n  const {slope, intercept} = leastSquare(this.data(), field.x.field(), field.y.field());\n  const scale = this.scale();\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay);\n  let xValues = scale.x.domain();\n  let yValues = xValues.map(d => slope * d + intercept);\n  \n  if (fitLineG.empty()) {\n    fitLineG = canvas.append('g').attr('class', className('fit-line-g'))\n      .attr('clip-path', `url(#${canvas.selectAll(className('canvas-g-clip-path', true)).attr('id')}`);\n    fitLineG.append('line')\n      .attr('class', className('fit-line'))\n      .style('fill', 'none').style('stroke', fitLineColor)\n      .style('stroke-width', 1)\n      .attr('x1', scale.x(xValues[0]))\n      .attr('y1', scale.y.range()[0])\n      .attr('x2', scale.x(xValues[1]))\n      .attr('y2', scale.y.range()[0]);  \n  }\n  fitLineG.select('line')\n    .transition(trans)\n    .attr('x1', scale.x(xValues[0]))\n    .attr('y1', scale.y(yValues[0]))\n    .attr('x2', scale.x(xValues[1]))\n    .attr('y2', scale.y(yValues[1]));\n}\n\nexport default _fitLine;","function _legend() { \n  let legendToggle = this.legend();\n  if (!legendToggle) return;\n  if (!this.isColor()) {\n    return; \n  }\n  this.renderLegend();\n}\n\nexport default _legend;","function _range() {\n  const scale = this.scale();\n  const facet = this.facet();\n  const xAt = this.axisX();\n  const yAt = this.axisY();\n\n  if (this.isFacet()) {\n    scale.region.padding(this.regionPadding());\n    if (facet.orient === 'horizontal' && xAt) {\n      xAt.orient = 'top';\n      xAt.showDomain = false;\n      this.thickness(xAt, scale.region, true, true);\n      if (yAt) yAt.thickness = 0;\n    } else if (facet.orient === 'vertical' && yAt) {\n      yAt.orient = 'right';\n      yAt.showDomain = false;\n      this.thickness(yAt, scale.region, false, true);\n      if (xAt) xAt.thickness = 0;\n    }\n    const innerSize = this.innerSize();\n    if (facet.orient === 'vertical') {\n      scale.region.rangeRound([0, innerSize.height]);\n    } else {\n      scale.region.rangeRound([0, innerSize.width]);\n    }\n    return;\n  }\n  \n  if (this.isSized()) {\n    scale.r.range(this.size().range);\n  }\n\n  this.thickness(yAt, scale.y, false, false);\n  if(!this.stream()) this.thickness(xAt, scale.x, true, false);\n  \n  const innerSize = this.innerSize();\n  scale.x.rangeRound([0, innerSize.width]);\n  scale.y.rangeRound([innerSize.height, 0]); //reverse\n}\n\nexport default _range;\n","import {select, transition} from 'd3';\n\nimport {labelFormat} from '../../modules/util';\n\nfunction _mark(zoomed = false) {\n  const that = this;\n  const canvas = this.__execs__.canvas;\n  const scale = this.__execs__.scale;\n  const color = this.color();\n  const size = this.size();\n  const label = this.label();\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay); \n  const field = this.__execs__.field;\n  const aggregated = this.aggregated();\n  const nested = this.isColor();\n  const stream = this.stream();\n  \n  const xValue = d => scale.x(d.data[field.x.field()]);\n  const yValue = d => scale.y(d.data[field.y.field()]);\n  const rValue = d => this.isSized() ? scale.r(d.data[field.radius.field()]) : size.range[0];\n  const colorValue =  function() {\n    let d = select(this.parentNode).datum();\n    return nested ? scale.color(d.data.key) : color[0];\n  }\n  let __local = function (selection) {\n    selection.each(function(d) {\n      d.x = xValue(d);\n      if (stream) {\n        const curX = d.data[field.x.field()];\n        const dist = that.distDomain(scale.x);\n          if (curX > scale.x._lastDomain[scale.x._lastDomain.length-1]) {\n            d.x0 = d.x + dist;\n          }\n      }\n      d.y = yValue(d);\n      d.color = colorValue.call(this);\n      d.r = rValue(d);\n      d.text = labelFormat(d.x) + ', '+ labelFormat(d.y); \n    })\n  }\n\n  let __pointInit = function (selection) {\n    selection.attr('r', 0)\n      .attr('stroke', d => d.color)\n      .attr('stroke-width', '1px')\n      .attr('fill-opacity',  0.5)\n      .style('cursor', 'pointer');\n  }\n  let __point = function (selection) {\n    selection\n      .transition(trans)\n      .attr('r', d => d.r)\n      .attr('stroke', d => d.color);\n  }\n  let __labelInit = function (selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection\n        .style('pointer-events', 'none')\n        .text(d.text)\n      that.styleFont(selection);\n    })\n  }\n  let __label = function(selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection.attr('text-anchor', d.anchor)\n        .style('visibility', label ? 'visible' : 'hidden')\n        .transition(trans)\n        .attr('y', size.range[0])\n        .text(d.text);\n      that.styleFont(selection);\n    })\n  }\n\n  let __appendPoints = function (selection) {\n    let point = selection.selectAll(that.nodeName())\n      .data(d => nested || aggregated ? d.children : d)\n    point.exit().remove();\n    let pointEnter = point.enter().append('g')\n      .attr('class', that.nodeName(true) + ' point')\n      .call(__local)\n      .attr('transform', d => `translate(${[d.x0 || d.x, d.y]})`);\n    pointEnter.append('circle')\n      .call(__pointInit);\n    pointEnter.append('text')\n      .call(__labelInit);\n    point = pointEnter.merge(point)\n      .call(__local)\n    \n    point.selectAll('circle')\n      .call(__point);\n    point.selectAll('text')\n      .call(__label);\n    point.each(function(d) {\n      let selection =  select(this);\n      if (!zoomed) selection = selection.transition(trans);\n      selection.attr('transform', `translate(${[d.x, d.y]})`)\n        .style('fill',  d.color)\n    })\n    that.__execs__.nodes = point;\n  }\n\n  canvas.selectAll(this.regionName())\n    .call(__appendPoints);\n}\n\nexport default _mark;","import {conditions} from './';\nimport {ConditionException} from '../../modules/error';\nimport dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\n\nfunction _munge() { \n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (measures.length < 2) throw new ConditionException();\n    field.x = measureField(measures[0]);\n    field.y = measureField(measures[1]);\n    if (dimensions.length === 0 && measures.length === 2) return conditions[0];\n    else if (dimensions.length === 1 && measures.length === 2) {\n      field.region = dimensionField(dimensions[0]);\n      return conditions[1];\n    } else if (dimensions.length === 0 && measures.length === 3) {\n      field.radius = measureField(measures[2]);\n      return conditions[2];\n    } else if (dimensions.length == 1 && measures.length === 3) {\n      field.radius = measureField(measures[2]);\n      field.region = dimensionField(dimensions[0]);\n      return conditions[3];\n    }\n    else throw new ConditionException();\n  };\n  this.condition(conditionFunc);\n  this.limitRows();\n  if (this.aggregated()) {\n    this.__execs__.munged = [this.data()];\n  } else if (this.isColor()) {\n    this.__execs__.munged = this.aggregate(false, false)\n    .map(d => {\n      d.key = d.data.key\n      return d;\n    });\n  } else {\n    this.__execs__.munged = [this.data().map(d => {return {data:d}})];\n  }\n}\n\nexport default _munge;","function _panning() {\n  if (this.stream()) {\n    this.streamPanning(this.__execs__.scale.x);\n  }\n}\n\nexport default _panning;","function _region() {\n  const aggregated = this.aggregated();\n  const scale = this.__execs__.scale;\n  const isFacet = this.isFacet();\n  const facet = this.facet();\n  this.renderRegion(d => {\n    if (aggregated) return;\n    let xy = [isFacet ? scale.region(d.key) : 0, 0];\n    if (facet.orient === 'vertical') xy.reverse();\n    d.x = xy[0]; d.y = xy[1];\n  }, d => d, isFacet);\n}\n\nexport default _region;","function _tooltip() {\n  if(!this.tooltip() || this.isFacet()) return;\n\n  const measures = this.measures();\n  let value = function(d) {\n    return measures.map(m => {\n      return {name:m.field, value: m.format ? m.format(d.data[m.field]) : d.data[m.field]}\n    })\n  }\n  this.renderTooltip({dx: this.size().range[0] + 4, value, key:null});\n}\n\nexport default _tooltip;","import {brush, event, zoom} from 'd3';\nimport _mark from './_mark';\n\nfunction _brushZoom() {\n\n  const canvas = this.__execs__.canvas;\n  const field = this.__execs__.field;\n  const innerSize = this.innerSize();\n  const scale = this.__execs__.scale;\n  const axis = this.__execs__.axis;\n  const axisX = axis && axis.x ? axis.x[field.x.field()] : null;\n  const axisY = axis && axis.y ? axis.y[field.y.field()] : null;\n\n  const brushGen = brush().extent([[0,0], [innerSize.width, innerSize.height]])\n  let brushG = canvas.selectAll('.brush.x')\n    .data([innerSize]);\n  brushG.exit().remove();\n  brushG = brushG.enter().append('g')\n    .attr('class', 'brush x')\n    .merge(brushG)\n    .attr('transform', 'translate(' + [0, 0] +')')\n    .call(brushGen);\n  this.brushGen(brushGen);\n  const zoomExtent = this.zoomExtent(this.isColor(), true);\n  const zoomGen = zoom()\n    .scaleExtent(zoomExtent)\n    .translateExtent([[0, 0], [this.width(), this.height()]]);\n  canvas.call(zoomGen); \n  this.zoomGen(zoomGen)\n  const xDomainOrigin = scale.x.domain();\n  const yDomainOrigin = scale.y.domain();\n  let idleTimeout;\n  brushGen.on('end.scatter', () => {\n    if (event.sourceEvent && event.sourceEvent.type === 'end') return;\n    let selection = event.selection;\n    if (!selection) { //init\n      if (!idleTimeout) return idleTimeout = setTimeout(()=> {idleTimeout=null}, 300);\n      scale.x.domain(xDomainOrigin);\n      scale.y.domain(yDomainOrigin);\n    } else {\n      scale.x.domain([selection[0][0], selection[1][0]].map(scale.x.invert, scale.x));\n      scale.y.domain([selection[1][1], selection[0][1]].map(scale.y.invert, scale.y));\n    }\n    \n    if (axisX) {\n      axisX.render(null);\n    }\n    if (axisY) {\n      axisY.render(null);\n    }\n    _mark.call(this);\n    this.brushMove(brushG, null);    \n  })\n}\n\nexport default _brushZoom;","import {zoom} from 'd3';\n\nimport _mark from './_mark';\nimport _brushZoom from './_brushZoom';\nimport _tooltip from './_tooltip';\n\nfunction normal() {\n  const zoomExtent = this.zoomExtent(this.isColor(), true);\n  const zoomGen = zoom()\n    .scaleExtent(zoomExtent)\n    .translateExtent([[0, 0], [this.width(), this.height()]]);\n  this.__execs__.canvas.call(zoomGen); \n\n  this.zoomGen(zoomGen).zoomed(() => {\n    _mark.call(this, true); //re-render mark\n    this.resetTooltip();\n    _tooltip.call(this); //re-render tooltip\n  }, true);\n}\n\nfunction _zoom() {\n  if (!this.zoom()) return;\n  if (this.zoom() === 'normal') normal.call(this);\n  else if (this.zoom() === 'brush') _brushZoom.call(this);\n}\n\nexport default _zoom;","import Facet from '../facet/';\nimport zoomMixin from '../zoomMixin';\nimport brushMixin from '../brushMixin';\nimport fitLineMixin from '../fitLineMixin';\nimport paddingMixin from '../paddingMixin';\nimport streamMixin from '../streamMixin';\nimport {genFunc, mix} from '../../modules/util';\nimport _axis from './_axis';\nimport _domain from './_domain';\nimport _facet from './_facet';\nimport _fitLine from './_fitLine';\nimport _legend from './_legend';\nimport _range from './_range';\nimport _mark from './_mark';\nimport _munge from './_munge';\nimport _panning from './_panning';\nimport _region from './_region';\nimport _tooltip from './_tooltip';\nimport _zoom from './_zoom';\n\nconst size = {range: [3, 12], scale: 'linear', reverse: false};\nconst conditions = ['normal', 'color', 'bubble', 'mixed'];\nconst _attrs = {\n  regionPadding: 0.1,\n  size: size\n};\n\n/**\n * rendes a scatter chart\n * @class Scatter\n * @augments Facet\n * @augments FintLineMixin\n * @augments BrushMixin\n * @augments ZoomMixin\n * @augments PaddingMixin\n * @augments StreamMixin\n */\nclass Scatter extends mix(Facet).with(fitLineMixin, brushMixin, zoomMixin, paddingMixin, streamMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.process('munge', _munge, {isPre: true})\n      .process('domain', _domain, {isPre: true})\n      .process('range', _range, {isPre: true})\n      .process('axis', _axis)\n      .process('fitLine', _fitLine)\n      .process('region', _region)\n      .process('facet', _facet, {allow: function() {return this.isFacet();}})\n      .process('mark', _mark, {allow: function() {return !this.isFacet();}})\n      .process('legend', _legend)\n      .process('tooltip', _tooltip)\n      .process('panning', _panning)\n      .process('zoom', _zoom)\n  }\n\n  /**\n   * @override\n   */\n  renderCanvas() {\n    return super.renderCanvas(this.size().range[this.isSized() ? 1 : 0]*1.25)\n  }\n\n  isColor() {\n    return this.condition() === conditions[1] || this.condition() === conditions[3];\n  }\n  \n  isSized() {\n    return this.condition() === conditions[2] || this.condition() === conditions[3];\n  }\n  \n  isFacet() {\n    return this.facet() && this.isColor();\n  }\n  \n  muteFromLegend(legion) {\n    this.muteRegions(legion.key);\n  }\n  \n  \n  demuteFromLegend(legion) {\n    this.demuteRegions(legion.key);\n  }\n  \n  muteToLegend(d) {\n    this.muteLegend(d.parent.data.key);\n  }\n  \n  demuteToLegend(d) {\n    this.demuteLegend(d.parent.data.key);\n  }\n  \n  \n}\n\nexport default genFunc(Scatter);\nexport {conditions};\n","import {countMeasure} from '../../modules/measureField';\nimport {conditions} from './';\nimport {ConditionException} from '../../modules/error';\nimport dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\n\nfunction _munge() {\n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (dimensions.length !== 2) throw new ConditionException();\n    let d0 = dimensionField(dimensions[0]);\n    let d1 = dimensionField(dimensions[1]);\n    if (this.reverse()) {\n      field.x = d1;\n      field.y = d0;\n    } else {\n      field.x = d0;\n      field.y = d1;\n    }\n    if (dimensions.length === 2) {\n      if (measures.length === 0) this.measure(countMeasure);\n      field.color = measureField(measures[0]);\n      if (measures.length === 0) return conditions[1];\n      else if (measures.length === 1) return conditions[0];\n    } else throw new ConditionException();\n  };\n  this.condition(conditionFunc); \n  this.__execs__.munged = this.aggregate(this.reverse(), true);\n  this.limitKeys();\n}\n\nexport default _munge;","import {scaleBand, scaleLinear} from 'd3';\nimport {zeroPoint} from '../../modules/util';\nfunction _domain() {\n  const scale = this.scale();\n  const munged = this.__execs__.munged;\n  const field = this.__execs__.field;\n  \n  const xDomain = field.x.munged(munged).level(0).domain(this.sortByValue());\n  const yDomain = field.y.munged(munged).level(1).domain(this.sortByValue());\n  const colorDomain = field.color.munged(munged).level(1).domain();\n\n  scale.x = scaleBand().domain(xDomain);\n  scale.y = scaleBand().domain(yDomain);\n  scale.color = scaleLinear();\n  if (zeroPoint(colorDomain)) {\n    scale.color.domain([colorDomain[0], 0, colorDomain[colorDomain.length-1]])\n  } else {\n    scale.color.domain(colorDomain);\n  }\n  return this;\n}\n\nexport default _domain;","function _range() {\n  const scale = this.scale();\n  const field = this.__execs__.field;\n  const xAt = this.axisX();\n  const yAt = this.axisY();\n\n  field.x.axis(xAt);\n  field.y.axis(yAt);\n  this.thickness(yAt, scale.y, false, true);\n  this.thickness(xAt, scale.x, true, true);\n\n  const innerSize = this.innerSize();  \n  scale.x.rangeRound([0, innerSize.width]).padding(this.padding());\n  scale.y.rangeRound([0, innerSize.height]).padding(this.padding());\n\n  scale.color.range(this.color());\n  return this;\n}\n\nexport default _range;","import {select, transition} from 'd3';\nimport {labelFormat} from '../../modules/util';\n\nfunction _mark() {\n  const that = this;\n  const canvas = this.__execs__.canvas;\n  const scale = this.__execs__.scale;\n  const label = this.label();\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay); \n  const yValue = d => scale.y(d.data.key);\n  const colorValue =  d => scale.color(d.value);\n  const textValue = d => labelFormat(d.value);\n  let __local = function (selection) {\n    let width = scale.x.bandwidth();\n    let height = scale.y.bandwidth();\n    selection.each(function(d) {    \n      d.x = 0;  \n      d.y = yValue(d);\n      d.value = d.value;\n      d.color = colorValue(d);\n      d.text = textValue(d);\n      d.w = width;\n      d.h = height;\n    })\n  }\n\n  let __pointInit = function (selection) {\n    selection.attr('width', d => d.w)\n      .attr('height', d => d.h)\n      .style('stroke', 'none')\n      .style('fill', d => d.color)\n      .style('cursor', 'pointer');\n  }\n  let __point = function (selection) {\n    selection.transition(trans)\n      .attr('width', d => d.w)\n      .attr('height', d => d.h)\n      .style('fill', d => d.color)\n  }\n  let __labelInit = function (selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dx', '0.29em')\n        .attr('dy', '1em')\n        .style('pointer-events', 'none')\n        .style('fill', '#111')\n        .text(d.text)\n      that.styleFont(selection);\n    })\n  }\n  let __label = function(selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection.attr('text-anchor', d.anchor)\n        .style('visibility', label ? 'visible' : 'hidden')\n        .transition(trans)\n        .text(d.text);\n      that.styleFont(selection);\n    })\n  }\n\n  let __appendPoints = function (selection) {\n    let point = selection.selectAll(that.nodeName())\n      .data(d => d.children, d => d.data.key)\n    point.exit().remove();\n    let pointEnter = point.enter().append('g')\n      .attr('class', that.nodeName(true) + ' point')\n      .call(__local);\n    pointEnter.append('rect')\n      .call(__pointInit);\n    pointEnter.append('text')\n      .call(__labelInit);\n    point = pointEnter.merge(point)\n      .call(__local);\n    point.selectAll('rect')\n      .call(__point);\n    point.selectAll('text')\n      .call(__label);\n    point.attr('transform', d => 'translate(' + [d.x, d.y] +')')\n        .style('fill', d => d.color);\n    that.__execs__.nodes = point;\n  }\n  \n  let region = canvas.selectAll(this.regionName());\n  region.call(__appendPoints);\n}\n\nexport default _mark;","function _axis() {\n  let that = this;\n  let scale = this.__execs__.scale;\n  let field = this.__execs__.field;\n\n  let _axisScaleX = function (axisToggle) {\n    field.x.axis(axisToggle);\n    let curAxis = that.axisDefault(scale.x, axisToggle);\n    if (axisToggle.orient === 'bottom') curAxis.y(scale.y.range()[1]);\n    \n    return curAxis;\n  }\n\n  let _axisScaleY = function (axisToggle) {\n    field.y.axis(axisToggle);\n    let curAxis = that.axisDefault(scale.y, axisToggle);\n    if (axisToggle.orient === 'right') curAxis.x(scale.x.range()[1]);\n    return curAxis;\n  }\n\n  let xAt = this.axisX();\n  let yAt = this.axisY();\n  if (xAt) {\n    _axisScaleX(xAt);\n  } \n  if (yAt) {\n    _axisScaleY(yAt);\n  }\n  \n\n  this.renderAxis();\n}\n\nexport default _axis;","function _legend() { \n  this.renderSpectrum();\n}\n\nexport default _legend;","function _region() {\n  const scale = this.__execs__.scale;\n  let __regionLocal = d => {\n      d.x = scale.x(d.data.key); \n      d.y = 0;\n  };\n\n  this.renderRegion(__regionLocal);\n}\n\nexport default _region;","function _tooltip() {\n  if(!this.tooltip()) return;\n  const field = this.__execs__.field;\n  \n  let value = function(d, text) {\n    return {name: field.color.field(), value: text};\n  }\n  let offset = function(d) {\n    return {x:d.w, y:0};\n  }\n  this.renderTooltip({offset, value, color: '#111'});\n}\n\nexport default _tooltip;","import {continousColorScheme} from '../core';\nimport RectLinear from '../rectLinear/';\nimport paddingMixin from '../paddingMixin';\nimport sortMixin from '../sortMixin';\nimport {attrFunc, genFunc, mix} from '../../modules/util';\nimport _munge from './_munge';\nimport _domain from './_domain';\nimport _range from './_range';\nimport _mark from './_mark';\nimport _axis from './_axis';\nimport _spectrum from './_spectrum';\nimport _region from './_region';\nimport _tooltip from './_tooltip';\n\nconst conditions = ['normal', 'count'];\nconst _attrs = {\n  color: continousColorScheme,\n  padding: 0.05,\n  reverse: false\n};\n\n/**\n * @class XYHeatmap\n * @augments RectLinear\n * @augments PaddingMixin\n */\nclass XYHeatmap extends mix(RectLinear).with(paddingMixin, sortMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.process('munge', _munge, {isPre:true})\n      .process('domain', _domain, {isPre: true})\n      .process('range', _range, {isPre: true})\n      .process('region', _region)\n      .process('axis', _axis)\n      .process('mark', _mark)\n      .process('spectrum', _spectrum)\n      .process('tooltip', _tooltip);\n  }\n\n  isCount() {\n    return this.condition() === conditions[1];\n  }\n}\n\nXYHeatmap.prototype.reverse = attrFunc('reverse');\n\nexport default genFunc(XYHeatmap);\nexport {conditions};\n","import {pack, treemap,hierarchy} from 'd3';\nimport {countMeasure} from '../../modules/measureField';\nimport {conditions} from './';\nimport {ConditionException} from '../../modules/error';\nimport dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\n\nfunction _munge() {\n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (dimensions.length === 0) throw new ConditionException();\n    if (this.shape() === 'word' && dimensions.length > 1) throw new ConditionException();\n    field.root = dimensionField(dimensions[0]);\n    field.leaf = dimensionField(dimensions[dimensions.length-1]);\n    if (measures.length === 1) {\n      field.color = measureField(measures[0]);\n      return conditions[0];\n    } else if (measures.length === 0) {\n      this.measure(countMeasure);\n      field.color = measureField(measures[0]);\n      return conditions[1];\n    } else throw new ConditionException();\n  };\n  this.condition(conditionFunc); \n  this.__execs__.munged = this.aggregate(false, true, true, false);\n  let root = hierarchy({key:'root', values:this.__execs__.munged}, d => d.values)\n    .sum(d => {\n      return d.value ? d.value[this.measureName()] : 0;\n    });\n\n  if (this.sortByValue() === 'ascending') {\n    root.sort(function(a, b) { return a.value - b.value; });\n  } else if (this.sortByValue() === 'descending') {\n    root.sort(function(a, b) { return b.value - a.value; });\n  }\n  let size = this.size() ? this.size().range : this.innerSize(true);\n  if (this.shape() === 'pack') {\n    let packGen = pack().size(size);\n    root = packGen(root);\n  } else {\n    let treemapGen = treemap().size(size)\n      .paddingTop(this.font()['font-size'] + 4)\n    root = treemapGen(root);\n  }\n  this.__execs__.munged = root;\n}\n\nexport default _munge;","import {extent, scaleLinear} from 'd3';\nimport {zeroPoint} from '../../modules/util';\n\nfunction _domain() {\n  const scale = this.scale();\n  const munged = this.__execs__.munged;\n  let colorDomain = extent(munged.leaves(), d => d.value);\n  scale.color = scaleLinear()\n\n  if (zeroPoint(colorDomain)) {\n    scale.color.domain([colorDomain[0], 0, colorDomain[colorDomain.length-1]])\n  } else {\n    scale.color.domain(colorDomain);\n  }\n  return this;\n}\n\nexport default _domain;","function _range() {\n  const scale = this.scale();\n  scale.color.range(this.color());\n  return this;\n}\n\nexport default _range;","import {select, transition} from 'd3';\nimport {className, labelFormat, getUniqueId} from '../../modules/util';\n\nconst stemColor = '#eee';\nfunction _mark() {\n  const clipIdPrefix = 'treemap-node-clip-path-';\n  const that = this;\n  const mark = this.__execs__.mark;\n  const scale = this.__execs__.scale;\n  const label = this.label();\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay); \n  const size = this.size();\n  const shape = this.shape();\n  const innerSize = this.innerSize();\n  const nodeType = shape === 'pack' ? 'circle' : 'rect';\n  let nodeAttr = function(selection) {\n    if(nodeType === 'rect') {\n      selection.attr('width', d => d.w)\n        .attr('height', d => d.h);\n    } else {\n      selection.attr('r', d => d.r);\n    }\n  }\n  let nameAttr = function(selection) {\n      if(shape === 'treemap') {\n        selection.attr('dx', '0.29em')\n          .attr('dy', '1em');\n      } else if (shape === 'word'){\n        let result = selection.datum();\n        let vertical = result.w < result.h;\n        selection.attr('dy', vertical ? '-.35em' : '.8em')\n          .attr('textLength', vertical? result.h : result.w)\n          .attr('lengthAdjust', 'spacingAndGlyphs')\n          .attr('transform', vertical ? 'rotate(90)' : '')\n          .style('font-size', (vertical ? result.w : result.h) -1 + 'px')\n          .style('fill', result.color)\n          .style('pointer-events', 'all')\n          .style('cursor', 'pointer')\n      } else {\n        let result = selection.datum();\n        selection.attr('visibility', result.children ? 'hidden' : 'visible')\n          .attr('text-anchor', 'middle')\n          .attr('dy', '.35em');\n      }\n  }\n  let colorValue =  d => d.children ? stemColor : scale.color(d.value);\n  let textValue = d => labelFormat(d.value);\n  let __local = function (selection) {\n    let dx = 0;\n    let dy = 0;\n    if (size || shape === 'pack') {\n      dx = (innerSize.width - size.range[0])/2;\n      dy = (innerSize.height - size.range[1])/2;\n    }\n    selection.each(function(d) {\n      d.color = colorValue(d);\n      d.text = textValue(d);\n      if (shape !== 'pack') {\n        d.x = d.x0 + dx;\n        d.y = d.y0 + dy;\n        d.w = d.x1 - d.x0;\n        d.h = d.y1 - d.y0;\n      } else {\n        d.x += dx/2;\n        d.y += dy/2;\n      }\n    })\n  }\n  let __clipInit = function (selection) {\n    selection.each(function(d) {\n       select(this)\n        .attr('id', getUniqueId(clipIdPrefix))\n        .append(nodeType)\n        .call(nodeAttr, d);\n      })\n  }\n  let __clip = function (selection) {\n    selection.each(function(d) {\n      select(this).select(nodeType)\n        .transition(trans)\n        .call(nodeAttr, d);\n    })\n  }\n  let __nodeInit = function (selection) {\n    selection.style('visibility', shape === 'word' ? 'hidden' : 'visible')\n      .style('stroke', 'none')\n      .style('fill', d => d.color)\n      .style('cursor', 'pointer')\n      .call(nodeAttr);\n  }\n  let __node = function (selection) {\n    selection\n        .style('visibility', shape === 'word' ? 'hidden' : 'visible')\n        .transition(trans)\n        .style('fill', d => d.color)\n        .style('stroke', d => d.children ? '#ddd' : 'none')\n        .call(nodeAttr);\n  }\n  let __nameInit = function (selection) {\n    selection.each(function() {\n      let result = mark.get(this);\n      let selection = select(this);\n     selection\n        .attr('x', 0)\n        .attr('y', 0)\n        .style('pointer-events', 'none')\n        .style('fill', '#000')\n        .text(d => d.data.key);\n      that.styleFont(selection);\n      selection.call(nameAttr, result);\n      \n      selection.style('font-weight', 'bold');\n    })\n  }\n  let __name = function (selection) {\n    selection.each(function() {\n      let selection = select(this);\n      selection.text(d => d.data.key);\n      that.styleFont(selection);\n      selection.style('font-weight', 'bold');\n      selection.call(nameAttr, mark.get(this));\n    })\n  }\n  let __labelInit = function (selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      let label = selection\n        .attr('x', 0)\n        .attr('y', 0)\n        .style('pointer-events', 'none')\n        .style('fill', '#111')\n        .text(d.text)\n      if(nodeType === 'rect') {\n        label.attr('dx', '0.29em')\n          .attr('dy', '2em');\n      } else {\n        label.attr('visibility', d.children ? 'hidden' : 'visible')\n          .attr('text-anchor', 'middle')\n          .attr('dy', '1.35em');\n      }\n      that.styleFont(selection);\n    })\n  }\n  let __label = function(selection) {\n    selection.each(function(d) {\n      let selection = select(this);\n      selection\n        .style('visibility', label && shape !== 'word' ? 'visible' : 'hidden')\n        .transition(trans)\n        .text(d.text);\n      that.styleFont(selection);\n    })\n  }\n\n  let __appendNodes = function (selection) {\n    let node = selection.selectAll(that.nodeName())\n      .data(d => d.descendants().slice(1), d => d.data.key) //exclude the root\n    node.exit().remove();\n    let nodeEnter = node.enter().append('g')\n      .attr('class', d => that.nodeName(true) + ' ' + className(d.children ? 'stem' : 'leaf' ))\n      .call(__local);\n    \n    nodeEnter.append('defs')\n      .append('clipPath')\n      .call(__clipInit);\n    nodeEnter.append(nodeType)\n      .attr('class', 'shape')\n      .call(__nodeInit);\n    nodeEnter.append('text')\n      .attr('class', 'name')\n      .call(__nameInit);\n    nodeEnter.filter(d => !d.children).append('text')\n      .attr('class', 'label')\n      .call(__labelInit);\n    nodeEnter.attr('clip-path', function() {\n      return 'url(#' + select(this).select('clipPath').attr('id') + ')';\n    });\n    \n    node = nodeEnter.merge(node)\n      .call(__local)\n    node.select('defs')\n      .select('clipPath')\n      .call(__clip);\n    node.selectAll('.shape')\n      .call(__node);\n    node.selectAll('.name')\n      .call(__name);\n    node.selectAll('.label')\n      .call(__label);\n    \n    node.attr('transform', function(d) {\n      return 'translate(' + [d.x, d.y] + ')';\n    })\n    that.__execs__.nodes = node;\n  }\n  \n  this.renderRegion( d => {\n    d.x = 0; d.y=0;\n  }, d => [d]).call(__appendNodes);\n}\n\nexport default _mark;","function _legend() { \n  this.renderSpectrum();\n}\n\nexport default _legend;","import {countMeasureTitle} from '../../modules/measureField';\n\nfunction _tooltip() {\n  if(!this.tooltip()) return;\n  const field = this.__execs__.field;\n  const count = this.isCount();\n  const shape = this.shape();\n  let key = d => {\n    return {name: 'key', value: d.data.key};\n  }\n  let value = (d, text) => {\n    let name;\n     if (count) {\n      name = countMeasureTitle;\n    } else {\n      name = field.color.field();\n    }\n    return {name, value:text}\n  }\n  let offset = d => {\n    return {x: (shape === 'pack') ? d.r : d.w, y:0}\n  }\n  this.renderTooltip({offset, value, key, color: '#111'}, false, true);\n}\n\nexport default _tooltip;","import shapeMixin from '../shapeMixin';\nimport sortMixin from '../sortMixin';\nimport Default, {continousColorScheme} from '../core';\nimport {attrFunc, genFunc, mix} from '../../modules/util';\nimport _munge from './_munge';\nimport _domain from './_domain';\nimport _range from './_range';\nimport _mark from './_mark';\nimport _spectrum from './_spectrum';\nimport _tooltip from './_tooltip';\n\nconst shapes = ['treemap', 'pack', 'word'];\nconst conditions = ['normal', 'count'];\nconst _attrs = {\n  autoResizeSkip: ['domain'], //treemap needs to re-munge beacuase of using .treemap method\n  color: continousColorScheme,\n  reverse: false,\n  shape: shapes[0],\n  size : null,\n  sortByValue: 'natural'\n};\n\n/**\n * @class Treemap\n * @augments Default\n * @augments ShapeMixin\n * @augments SortMixin\n */\nclass Treemap extends mix(Default).with(shapeMixin, sortMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.process('munge', _munge, {isPre:true})\n      .process('domain', _domain, {isPre: true})\n      .process('range', _range, {isPre: true})\n      .process('mark', _mark)\n      .process('spectrum', _spectrum)\n      .process('tooltip', _tooltip);\n  }\n  axis() {\n    if(!arguments.length) return [];\n    return this;\n  }\n  \n  isCount() {\n    return this.condition() === conditions[1];\n  }\n}\n\nTreemap.prototype.reverse = attrFunc('reverse');\n\nexport default genFunc(Treemap);\nexport {conditions, shapes};\n","import {conditions, xMeasureName, yMeasureName, shapes} from './';\nimport {ConditionException} from '../../modules/error';\nimport dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\n\nfunction _series(target, measures, isColor = false) {\n  return target.map(d => measures.map(m => {\n   return {data: {x:m.field, y: (isColor ? d.data: d)[m.field]}}\n  }));\n}\nfunction _munge() {\n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (measures.length < 2) throw new ConditionException();\n    field.x = dimensionField(this.mixedDimension());\n    measures.forEach(m => {\n      field[yMeasureName(m)] = measureField(m);\n      if(this.shape() === shapes[1]) field[xMeasureName(m)] = measureField(m);\n    })\n    if (dimensions.length === 0 ) return conditions[0];\n    else if (dimensions.length === 1 ) {\n      field.region = dimensionField(dimensions[0]);\n      return conditions[1];\n    } \n    else throw new ConditionException();\n  };\n  this.condition(conditionFunc); \n  \n  let result;\n  let measures = this.measures();\n  \n  this.limitRows();\n\n  if (this.shape() === shapes[0]) {\n    if (this.isColor()) { //nest\n      result = this.aggregate(false, false);\n      result.forEach(d => { //series structure\n        d.key = d.data.key;\n        d.children = _series(d.children, measures, true);\n      });\n    } else {\n      result = [{parent: null, children: _series(this.data(), measures)}];\n    }\n  } else {\n    result = [];\n    measures.forEach(x => {\n      measures.forEach(y => {\n        result.push({xField:x,yField:y,children:this.data()});\n      });\n    });\n  }\n  \n  this.__execs__.munged = result;\n}\n\nexport default _munge;","import {extent, scaleBand, scalePoint} from 'd3';\nimport {xMeasureName, yMeasureName} from './';\nimport {continousScale, comparator} from '../../modules/transform';\nimport interval from '../../modules/interval';\n\nfunction ordinalDomainFlatten (target, dimensionField) {\n  let domain = [];\n  target.forEach(d => { \n    d = d[dimensionField.field()];\n    if (dimensionField.interval()) { //using interval\n      d = interval[dimensionField.interval()](d);\n    } \n    if (d instanceof Date && domain.findIndex(m => (m - d) === 0) < 0) domain.push(d);\n    else if(!domain.includes(d)) domain.push(d);\n  });\n  domain.sort(comparator(dimensionField.order()));\n  return domain;\n}\n\nfunction parCoords(keep) {\n  this.axis('x', false);\n  const scale = this.scale();\n  const measures = this.measures();\n  const munged = this.__execs__.munged;\n  const field = this.__execs__.field;\n  if (this.isColor()) {\n    let colorDomain = field.region.munged(munged).domain(); \n    scale.color = this.updateColorScale(colorDomain, keep);\n  }\n  scale.x = scalePoint().domain(measures.map(d => d.field))\n  measures.forEach(m => {\n    let domain = extent(this.data(), d => d[m.field]);\n    let scaleName = yMeasureName(m);\n    scale[scaleName] = continousScale(domain, null, field[scaleName])\n    this.setCustomDomain(scaleName, domain);\n  });\n  return this;\n}\n\nfunction matrix(keep) {\n  const scale = this.scale();\n  const measures = this.measures();\n  const field = this.__execs__.field;\n  if (this.isColor()) {\n    let colorDomain = ordinalDomainFlatten(this.data(), field.region);\n    scale.color = this.updateColorScale(colorDomain, keep);\n  }\n  scale.region = scaleBand().domain(measures.map(d=> d.field))\n  measures.forEach(m => {\n    let domain = extent(this.data(), d => d[m.field]);\n    let yScaleName = yMeasureName(m);\n    scale[yScaleName] = continousScale(domain);\n    this.setCustomDomain(yScaleName, domain);\n    let xScaleName = xMeasureName(m);\n    scale[xScaleName] = continousScale(domain);\n    this.setCustomDomain(xScaleName, domain);\n  });\n}\n\nfunction _domain(keep) {\n  if (this.isParcoords()) parCoords.call(this, keep);\n  else matrix.call(this, keep);\n}\n\nexport default _domain;\n","import {xMeasureName, yMeasureName} from './';\n\nfunction parCoords() {\n  const scale = this.scale();\n  const innerSize = this.innerSize();\n  const measures = this.measures();\n  scale.x.rangeRound([0,innerSize.width]);\n  measures.forEach(m => {\n    let scaleName = yMeasureName(m);\n    scale[scaleName].rangeRound([innerSize.height, 0])\n  });\n}\n\nfunction matrix() {\n  const scale = this.scale();\n  const innerSize = this.innerSize();\n  const measures = this.measures();\n  let regionWidth = Math.min(innerSize.width, innerSize.height);\n  scale.region.rangeRound([0, regionWidth]).padding(this.regionPadding());\n  measures.forEach(m => {\n    let yScaleName = yMeasureName(m);\n    scale[yScaleName].rangeRound([scale.region.bandwidth(), 0]);\n    let xScaleName = xMeasureName(m);\n    scale[xScaleName].rangeRound([0, scale.region.bandwidth()]);\n  });\n}\n\n\nfunction _range(keep) {\n  if (this.isParcoords()) parCoords.call(this, keep);\n  else matrix.call(this, keep);\n}\n\nexport default _range;","import {line, transition} from 'd3';\nimport {yMeasureName} from './';\nimport {className} from '../../modules/util';\n\nfunction _mark() {\n  const that = this;\n  const canvas = this.__execs__.canvas;\n  const scale = this.__execs__.scale;\n  const size = this.size();\n  const innserSize = this.innerSize();\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay);\n  const lineGenInit = line().x(d => scale.x(d.data.x)).y(innserSize.height);\n  const lineGen = line().x(d => scale.x(d.data.x))\n    .y(d => scale[yMeasureName(d.data.x)](d.data.y));\n  \n  let __seriesInit = function(selection) {\n    selection.attr('d', lineGenInit)\n      .attr('fill', 'none')\n      .attr('stroke-width', size.range[0]);\n  }\n\n  let __series = function(selection) {\n    selection.transition(trans)\n      .attr('d', lineGen)\n      .attr('stroke-width', size.range[0]);\n  }  \n\n  let __appendSeries = function (selection) {\n    let series = selection.selectAll(that.seriesName())\n      .data(d => d.children, (d,i) => d.key ? d.key : i)\n    \n    series = series.enter().append('g')\n      .attr('class', that.seriesName(true))\n      .merge(series);\n    \n    let path = series.selectAll('path' + className('line', true))\n      .data(d => [d])\n    \n    path.enter().append('path')\n      .attr('class', className('line'))\n      .call(__seriesInit)\n      .merge(path)\n      .call(__series);\n  }\n\n  let region = canvas.selectAll(this.regionName());\n  region.call(__appendSeries)\n}\n\nexport default _mark;","import {yMeasureName, shapes} from './';\n\nfunction _parCoords() {\n  let that = this;\n  let measures = this.measures();\n  let scale = this.__execs__.scale;\n\n  let _axisScaleY = function (yScale, axisToggle) {\n    let curAxis = that.axisDefault(yScale, axisToggle);\n    if (axisToggle.orient === 'right') curAxis.x(scale.x.range()[1]);\n    curAxis.x(scale.x(axisToggle.field));\n    return curAxis;\n  }\n\n  let yAt = this.axisY();\n  if (yAt) {\n    measures.forEach(m => {\n      let name = yMeasureName(m);\n      let yScale = scale[name];\n      let at = {target: yAt.target, field: m.field, orient: yAt.orient, showDomain: true, titleOrient: 'bottom', showTitle: true};\n      _axisScaleY(yScale, at);\n    })\n  }\n}\n\n\nfunction _axis() {\n  if (this.shape() === shapes[0]) {\n    _parCoords.call(this);\n  } \n  this.renderAxis();\n}\n\nexport default _axis;","function _legend() { \n  if (!this.isColor()) {\n    return; \n  }\n  this.renderLegend();\n}\n\nexport default _legend;","import {shapes} from './';\n\nfunction _region() {\n  const isColor = this.isColor();\n  const color = this.color();\n  const shape = this.shape();\n  const scale = this.__execs__.scale;\n\n  let __regionLocal = d => {\n    if (shape === shapes[0]) {\n      d.x = 0; d.y = 0;\n      d.color = isColor ? scale.color(d.data.key) : color[0];\n    } else {\n      d.x = scale.region(d.xField.field);\n      d.y = scale.region.range()[1] - scale.region(d.yField.field) - scale.region.bandwidth();\n    }\n  };\n\n  this.renderRegion(__regionLocal, d => d, shape === shapes[1], (shape === shapes[1] ? '.matrix': '' ))\n    .style('stroke', d => d.color);\n}\n\nexport default _region;","import scatter from '../scatter/';\n\nfunction _facet () {\n  let parent = this;\n  let scale = this.__execs__.scale;\n  let canvas = this.__execs__.canvas;\n  let measures = this.measures();\n  let dimensions = this.dimensions();\n  let width = scale.region.bandwidth();\n  let settings = ['axisTitles','color', 'size', 'grid', 'font', 'label']\n    .map(d => { return {key: d, value:this[d]()};});\n\n  let _small = function(d,i) {\n    let small = scatter()\n        .container(this)\n        .data(d.children)\n        .dimensions(dimensions).measures([d.xField, d.yField])\n        .width(width).height(width)\n        .legend(false)\n        .tooltip(false)\n        .parent(parent) \n        .zeroOffset(true)\n        .noAxisOffset(true); \n\n    let showX = (i % measures.length === 0);\n    let showY = i < measures.length;\n    settings.forEach(d => small[d.key](d.value));\n    small.axis({target:'y', orient:'left', showTitle: showY, showTicks: showY});\n    small.axis({target:'x', orient:'bottom', showTitle: showX, showTicks: showX});\n    small.render();\n  }\n \n  canvas.selectAll('.facet')\n    .each(_small);\n}\n\nexport default _facet;","import {brush, brushY, event, select} from 'd3';\nimport {xMeasureName, yMeasureName, shapes} from './';\n\nfunction _parcoords() {\n  const canvas = this.__execs__.canvas;\n  const scale = this.__execs__.scale;\n  const innerSize = this.innerSize();\n  const measures = this.measures();\n  const conditions = {};\n  const brushW = this.font()['font-size'];\n  const brushGen = brushY().extent([[-brushW,0], [brushW, innerSize.height]]);\n  const series = canvas.selectAll(this.seriesName());\n  let hide = function() {\n    series.attr('opacity', '1')\n      .filter(d => {\n        for (let k in conditions) { //hide excluded\n          let domain = conditions[k];\n          let target = d.filter(dd => dd.data.x === k)[0];\n          let result = (target.data.y < domain[1]  || target.data.y > domain[0])\n          if (result) return true;\n        }\n        return false;\n      }).attr('opacity', 0.1);\n  }\n  let brushG = canvas.selectAll('.brush.y')\n    .data(measures, d => d.field);\n  brushG.exit().remove();\n  brushG.enter().append('g')\n    .attr('class', 'brush y')\n    .merge(brushG)\n    .attr('transform', d => 'translate(' + [scale.x(d.field), 0] +')')\n    .call(brushGen);\n  brushGen.on('brush.parCoords', function(d) {\n    conditions[d.field] = event.selection.map(scale[yMeasureName(d.field)].invert);\n    hide();\n  }).on('end.parCoords', function(d) {\n    if(event.selection === null) {\n      delete conditions[d.field];\n      hide();\n    }\n  });\n\n  this.brushGen(brushGen);\n}\n\nfunction _matrix () {\n  const canvas = this.__execs__.canvas;\n  const scale = this.__execs__.scale;\n  const brushW = scale.region.bandwidth();\n  const brushGen = brush().extent([[0,0], [brushW, brushW]]);  \n  const nodes = canvas.selectAll(this.nodeName());\n  let brushCell;\n  let brushG = canvas.selectAll('.brush.matrix')\n    .data(d => d);\n  brushG.exit().remove();\n  brushG.enter().append('g')\n    .attr('class', 'brush matrix')\n    .merge(brushG)\n    .attr('transform', d => 'translate(' + [scale.region(d.xField.field), scale.region.range()[1] - scale.region(d.yField.field) - scale.region.bandwidth()] + ')')\n    .call(brushGen);\n  \n  brushGen.on('start.matrix', function() {\n    if(brushCell !== this) {\n      select(brushCell).call(brushGen.move, null);\n      brushCell = this;\n    }\n  }).on('brush.matrix', function(d) {\n     if(event.selection === null) return;\n     const xName = d.xField.field\n     const yName = d.yField.field;\n     const scaleX = scale[xMeasureName(xName)];\n     const scaleY = scale[yMeasureName(yName)];\n     const domain = event.selection.map(d => [scaleX.invert(d[0]), scaleY.invert(d[1])]);\n     nodes.attr('opacity', 1).filter(function(d) {\n       d = d.data;\n       return d[xName] < domain[0][0] || d[xName] > domain[1][0] || d[yName] > domain[0][1] || d[yName] < domain[1][1];\n     }).attr('opacity', 0.1);\n  }).on('end.matrix', function() {\n    if(event.selection === null) { // if no selection, recover\n     nodes.attr('opacity', 1);\n    }\n  })\n  this.brushGen(brushGen);\n}\n\nfunction _brush () {\n  if (this.shape() === shapes[0]) {\n    _parcoords.call(this);\n  } else {\n    _matrix.call(this);\n  }\n}\n\nexport default _brush;","import RectLinear from '../rectLinear/';\nimport seriesMixin from '../seriesMixin';\nimport brushMixin from '../brushMixin';\nimport paddingMixin from '../paddingMixin';\nimport shapeMixin from '../shapeMixin';\nimport {genFunc, mix} from '../../modules/util';\nimport conditionForMute from '../core/_condtionForMute';\nimport _munge from './_munge';\nimport _domain from './_domain';\nimport _range from './_range';\nimport _mark from './_mark';\nimport _axis from './_axis';\nimport _legend from './_legend';\nimport _region from './_region';\nimport _facet from './_facet';\nimport _brush from './_brush';\n\nconst size = {range: [1,1], scale: 'linear', reverse: false};\nconst shapes = ['par-coords', 'scatter-matrix'];\nconst conditions = ['normal', 'color'];\nconst _attrs = {\n  regionPadding: 0.1,\n  size: size,\n  shape: shapes[0]\n};\n\n/**\n * renders a parallel coordinates\n * @class ParCoords\n * @augments Core\n * @augments RectLinear\n * @augments SeriesMixin\n * @augments BrushMixin\n * @augments PaddingMixin\n * @augments ShapeMixin\n */\nclass ParCoords extends mix(RectLinear).with(seriesMixin, brushMixin, paddingMixin, shapeMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.brush(true);\n    this.process('munge', _munge, {isPre: true})\n      .process('domain', _domain, {isPre: true})\n      .process('range', _range, {isPre: true})\n      .process('axis', _axis)\n      .process('region', _region) \n      .process('mark', _mark, {allow: function() {return this.isParcoords()}})\n      .process('facet', _facet, {allow: function() {return !this.isParcoords()}})\n      .process('legend', _legend)\n      .process('brush', _brush);\n  }\n\n  isColor() {\n    return this.condition() === conditions[1];\n  }\n\n  isParcoords() {\n    return this.shape() === shapes[0];\n  }\n  \n  muteRegions(callback) { \n    let _parCoords = region => {\n      this.mute(region, this.muteIntensity());\n    }\n    let _matrix = region => {\n      let nodes = region.selectAll(this.nodeName()).classed('mute', true);\n      this.mute(nodes, this.muteIntensity());\n    }\n    if (!arguments.length) {\n      if (this.isParcoords()) {\n        return this.filterRegions().call(_parCoords);\n      } else {  \n        return this.regions().selectAll(this.regionName())  \n          .call(_matrix);\n      }\n    } \n    if (this.isParcoords()) {\n      return this.filterRegions(conditionForMute(callback), true).call(_parCoords);\n    } else {\n      return this.regions().selectAll(this.regionName()).filter(conditionForMute(callback)).call(_matrix);\n    }\n  }\n  \n  demuteRegions(callback) {\n    let _parCoords = region => {\n      this.demute(region);\n    }\n    let _matrix = region => {\n      let nodes = region.selectAll(this.nodeName());\n      this.demute(nodes);\n    }\n    if (!arguments.length) {\n      if (this.shape() === shapes[0]) {\n        return this.filterRegions().call(_parCoords);\n      } else {  \n        return this.regions().selectAll(this.regionName())  \n          .call(_matrix);\n      }\n    }\n    if (this.isParcoords()) {\n      return this.filterRegions(conditionForMute(callback), true).call(_parCoords);\n    } else {\n      return this.regions().selectAll(this.regionName()).filter(conditionForMute(callback)).call(_matrix);\n    }\n  }\n  \n  muteFromLegend(legend) {\n    this.muteRegions(legend.key);\n  }\n  \n  demuteFromLegend(legend) {\n    this.demuteRegions(legend.key);\n  }\n}\n\nfunction xMeasureName (measure) {\n  return 'x-' + (measure.field ? measure.field : measure);\n}\n\nfunction yMeasureName (measure) {\n  return 'y-' + (measure.field ? measure.field : measure);\n}\n\nexport default genFunc(ParCoords);\nexport {xMeasureName, yMeasureName, conditions, shapes};\n","import {pie} from 'd3';\nimport dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\nimport {countMeasure} from '../../modules/measureField';\nimport {conditions} from './';\nimport {ConditionException} from '../../modules/error';\n\nfunction _munge() {\n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (dimensions.length === 1) {\n      if (measures.length === 0) this.measure(countMeasure);\n      field.r = measureField(measures[0]);\n      field.region = dimensionField(dimensions[0]);\n      if (measures.length === 0) return conditions[0];\n      else if (measures.length === 1) return conditions[1];\n    }\n    else throw new ConditionException();\n  };\n  this.condition(conditionFunc);\n  this.__execs__.munged = this.aggregate(false, true, false, false);\n  this.limitKeys();\n  const field = this.__execs__.field;\n  const pieGen = pie().value(d => d.value[field.r.valueName()])\n    .padAngle(this.padding())\n  if (this.sortByValue()) {\n    pieGen.sortValues(this.sortByValue() === 'ascending' ? (a,b) => a-b : (a,b) => b-a);\n  }\n  const result = pieGen(this.__execs__.munged)\n  result.forEach(d => d.key = d.data.key);\n  if (field.region.interval()) { \n    result.forEach(d => { d.data.key = new Date(d.data.key)});\n  }\n  this.__execs__.munged = result;\n}\n\nexport default _munge;","function _domain(keep) {\n  const scale = this.scale();\n  const munged = this.__execs__.munged;\n  const field = this.__execs__.field;\n  let regionDomain = field.region.munged(munged).domain();\n  scale.color = this.updateColorScale(regionDomain, keep);\n}\n\nexport default _domain;","import {arc, interpolate, mean, select, transition} from 'd3';\nimport {labelFormat} from '../../modules/util';\nfunction _mark() {\n  const that = this;\n  const scale = this.__execs__.scale;\n  const label = this.label();\n  const trans = transition().duration(this.transition().duration).delay(this.transition().delay);\n  const innerSize = this.innerSize();\n  const size = this.size();\n  const arcGen = arc().innerRadius(size.range[0])\n    .outerRadius(size.range[1])\n    .startAngle(d => d.startAngle)\n    .endAngle(d => d.endAngle)\n    .padAngle(d => d.padAngle);\n  const tweenArc = function(d) {\n    let i = interpolate({endAngle:0}, d);\n    return function(t) {return arcGen(i(t));};\n  }\n\n  let __local = function (selection) {\n    let sizeMean = mean(size.range);\n    selection.each(function(d) {\n      d.mid = (d.endAngle + d.startAngle) /2;\n      d.dx = Math.sin(d.mid) * sizeMean;\n      d.dy =  - Math.cos(d.mid) * sizeMean;\n      d.x = innerSize.width/2 + d.dx;\n      d.y = innerSize.height/2 + d.dy;\n      d.color = scale.color(d.key);\n      d.text = labelFormat(d.value);\n    })\n  }\n\n  let __nodeInit = function (selection) {\n    selection\n      .style('fill', d => d.color)\n      .style('cursor', 'pointer');\n  } \n  let __node = function (selection) {\n    selection.style('fill', d => d.color)\n      .transition(trans)\n      .attrTween('d', tweenArc);\n  }\n  \n  let __labelInit = function (selection) {\n    selection.each(function(d) {\n      select(this).attr('x', d.dx)\n        .attr('dy', '.35em')\n        .attr('y', d.dy)\n        .attr('text-anchor', 'middle')\n        .style('pointer-events', 'none')\n        .text(d.text);\n      that.styleFont(select(this));\n    })\n  }\n\n  let __label = function (selection) {\n    selection.each(function(d) {\n      select(this).style('visibility',label ? 'visible' : 'hidden')\n        .text(d.text)\n        .transition(trans).attr('x', d.dx)\n        .attr('y', d.dy);\n      that.styleFont(select(this));\n    })\n  }\n\n  let __appendNodes = function (selection) {\n    let node = selection.selectAll(that.nodeName())\n      .data(d => d, d => d.data.key);\n    node.exit().remove();\n    let nodeEnter = node.enter().append('g')\n      .attr('class', that.nodeName(true)  + ' pie')\n      .call(__local)\n    nodeEnter.append('path')\n      .call(__nodeInit);\n    nodeEnter.append('text')\n      .call(__labelInit);\n    node.call(__local);\n    node = nodeEnter.merge(node)\n      .attr('transform', 'translate(' + [innerSize.width/2, innerSize.height/2] +')');\n    node.select('path')\n      .call(__node);\n    node.select('text')\n      .call(__label);\n    that.__execs__.nodes = node;\n  }\n  \n  this.renderRegion(d => {\n    d.x = 0; d.y = 0;\n  }, d => [d])\n  .call(__appendNodes);\n}\n\nexport default _mark;","function _legend() { \n  if (!this.legend()) return ;\n  this.renderLegend();\n}\n\nexport default _legend;","import {countMeasureTitle} from '../../modules/measureField';\n\nfunction _tooltip() {\n  if(!this.tooltip()) return;\n  const count = this.isCount();\n  const field = this.__execs__.field;\n  const tFormat = d => {\n    let f = field.region.isInterval() ? field.region.format(): null;\n    return f ? f(d) : d;\n  }\n\n  let key = d => {\n    return {name: 'key', value: tFormat(d.data.key)};\n  }\n  let value = (d, text) => {\n    let name;\n     if (count) {\n      name = countMeasureTitle;\n    } else {\n      name = field.region.field();\n    }\n    return {name, value:text}\n  }\n\n  this.renderTooltip({value, key});\n}\n\nexport default _tooltip;","import Core from '../core';\nimport paddingMixin from '../paddingMixin';\nimport sortMixin from '../sortMixin';\nimport {genFunc, mix} from '../../modules/util';\nimport _munge from './_munge';\nimport _domain from './_domain';\nimport _mark from './_mark';\nimport _legend from './_legend';\nimport _tooltip from './_tooltip';\n\nconst size = {range: [0, 150], scale: 'linear', reverse: false}; \nconst conditions = ['normal', 'count'];\nconst _attrs = {\n  limitKeys: 20,\n  padding: 0,\n  size: size\n};\n\n/**\n * renders a pie chart.\n * @class Pie\n * @augments Core\n * @augments PaddingMixin\n * @augments SortMixin\n */\nclass Pie extends mix(Core).with(paddingMixin, sortMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.process('munge', _munge, {isPre:true})\n      .process('domain', _domain, {isPre: true})\n      .process('mark', _mark)\n      .process('legend', _legend)\n      .process('tooltip', _tooltip);\n  }\n  \n  axis() {\n    if(!arguments.length) return [];\n    return this;\n  }\n  \n  muteFromLegend(legend) {\n    this.muteNodes(legend.key);\n  }\n  \n  demuteFromLegend(legend) {\n    this.demuteNodes(legend.key);\n  }\n  \n  muteToLegend(d) {\n    this.muteLegend(d.data.key);\n  }\n  \n  demuteToLegend(d) {\n    this.demuteLegend(d.data.key);\n  }\n  \n  isCount() {\n    return this.condition() === conditions[1];\n  }\n}\n\nexport default genFunc(Pie);\nexport {conditions};\n","import {ConditionException} from '../../modules/error';\nimport {conditions, latMeasure, lngMeasure} from './';\n\nfunction _munge() {\n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (this.addr()) {\n      if (measures.length < 1) throw new ConditionException();\n      field.addr = measures[0];\n      field.lat = latMeasure;\n      field.lng = lngMeasure;\n      if (measures.length === 2) {\n        field.radius = measures[1];\n        return conditions[0];\n      } else if (measures.length === 1) {\n        return conditions[1];\n      } \n    } else {\n      if (measures.length < 2) throw new ConditionException()\n      if (measures.length === 3) {\n        field.lat = measures[0]\n        field.lng = measures[1]\n        field.radius = measures[2];\n        return conditions[0];\n      } else if (measures.length === 2) {\n        field.lat = measures[0]\n        field.lng = measures[1]\n        return conditions[1];\n      } \n    }\n    if (dimensions.length === 1) {\n      field.name = dimensions[0];\n    }\n    throw new ConditionException();\n  };\n  this.condition(conditionFunc);\n  this.limitRows();\n  const field = this.__execs__.field;\n  if (this.isSized()) this.data().sort(function (a, b) { return b[field.radius.field] - a[field.radius.field]; });\n  this.__execs__.munged = this.data();\n}\n\nexport default _munge;","import {select} from 'd3';\nfunction _map() {\n  const selection = select(this.container());\n  let frame = selection.select('.frame.layer');\n  if (frame.empty()) {\n    frame = selection.append('div')\n      .attr('class', 'frame layer');\n  }\n  frame.style('width', this.width() + 'px')\n    .style('height', this.height()  + 'px');\n  const options = {\n      center: new daum.maps.LatLng(33.450701, 126.570667),\n      level: 3\n    }; // defaut zoom option\n  let map = new daum.maps.Map(frame.node(), options);\n  map.setMapTypeId(daum.maps.MapTypeId[this.mapBaseType()]);\n  if (this.overlayMapType()) map.addOverlayMapTypeId(daum.maps.MapTypeId[this.overlayMapType()]);\n  let zoomControl = new daum.maps.ZoomControl();\n  map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);\n  map.setZoomable(false);\n  this.__execs__.map = map;\n}\n\nexport default _map;","import {extent, scaleLinear} from 'd3';\n\nfunction _domain() {\n  const scale = this.scale();\n  const field = this.__execs__.field;\n\n  if (this.isSized()) {\n    let rDomain = extent(this.data(), d => d[field.radius.field]);\n    scale.r = scaleLinear().domain(rDomain.map(d => Math.sqrt(d)));\n  }\n}\n\nexport default _domain;","import {latMeasure, lngMeasure} from './';\nimport {labelFormat} from '../../modules/util';\n\nfunction _addr2coord (addr, geocoder, callback) { \n  geocoder.addr2coord(addr, function (status, result) {\n    if (status === daum.maps.services.Status.OK) {\n      return callback(null, result.addr[0]);\n    } else {\n      return callback(status); \n    }\n  });\n}\n\nfunction _rScaleRange (scale, level, size) {\n  let magVal = Math.pow(2, level); \n  scale.range([size.range[0] * magVal, size.range[1] * magVal]); \n}\nfunction _mark() {\n  const map = this.__execs__.map;\n  const field = this.__execs__.field;\n  const scale = this.__execs__.scale;\n  const dispatch = this.__execs__.dispatch;\n  const isAddr = this.addr();\n  const label = this.label();\n  const target = this.data();\n  const isSized = this.isSized();\n  const size = this.size();\n  const color = this.color();\n  const geocoder = new daum.maps.services.Geocoder();\n  const circles = [];\n  \n  let __set = function() {\n    const latlng = target.map(d => new daum.maps.LatLng(d[field.lat.field], d[field.lng.field]));\n    const bounds = new daum.maps.LatLngBounds();\n    latlng.forEach(function (d) {\n      bounds.extend(d);\n    });\n    map.setBounds(bounds);\n    const level = map.getLevel();\n    if(isSized) _rScaleRange(scale.r, level, size);\n  }\n  let __nodes = function() {\n    const level = map.getLevel();\n    const earthR = 111111; // earth radius\n    target.forEach(d => {\n      const latLng = new daum.maps.LatLng(d[field.lat.field], d[field.lng.field]);\n      const radius = isSized ? scale.r(Math.sqrt(d[field.radius.field])) : size.range[0] * Math.pow(2, level);\n      const option = {\n        clickable: true,\n        zIndex: 10,\n        center: latLng,  \n        radius: radius,\n        strokeColor: color[0],\n        strokeWeight: 1.5,\n        strokeOpacity: 1,\n        strokeStyle: 'solid',\n        fillColor :  color[0],\n        fillOpacity: 0.5\n      };\n      const circle = new daum.maps.Circle(option);\n      circle.setMap(map);\n      circles.push(circle);\n\n      const keyVal = field.name ? d[field.name.field] : isAddr ? d[field.addr.field] : 'Y: ' + labelFormat(d[field.lat.field]) + '</br> X: ' + labelFormat(d[field.lng.field]);\n      const tooltipText = '<div class=\"jelly-chart-tooltip\" style=\"padding:4px;font-size:12px;font-family:sans-serif;\">' +\n      '<div class=\"jelly-chart-key\" style=\"font-weight:bold;\">' + keyVal + '</div>' +\n      (isSized  ? '<div class=\"jelly-chart-value\">' + field.radius.field + ': ' + labelFormat(d[field.radius.field]) + '</div>' : '') +\n      '</div>';\n      const tooltip = new daum.maps.InfoWindow({\n        position: new daum.maps.LatLng(d[field.lat.field] + radius / earthR, d[field.lng.field]),\n        content: tooltipText\n      });\n      \n      daum.maps.event.addListener(circle, 'mouseover', function () {\n        tooltip.open(map);\n      });\n      daum.maps.event.addListener(circle, 'mouseout', function () {\n        tooltip.close();\n      });\n      \n\n      if (isSized && label) {\n        const value = labelFormat(d[field.radius.field]);\n        const label = new daum.maps.CustomOverlay({\n          position: latLng,\n          clickable: true,\n          zIndex: -1,\n          content: '<div class=\"label\" style=\"pointer-events:none;padding:4px;font-size:12px;font-family:sans-serif;\">' + value + '</div>'\n        });\n        label.setMap(map);\n      }\n    })\n  }\n\n  if(isAddr) {\n    let count = 0;\n    \n    target.forEach(function(d) {\n      let addr = d[field.addr.field];\n      let callback = function(err, coord) {\n        if(!err) {\n          d[latMeasure.field] = coord.lat;\n          d[lngMeasure.field] = coord.lng;\n        }\n        count += 1;\n        dispatch.call('loading', this, count);\n        if(count === target.length) {\n          __set();\n          __nodes();\n          dispatch.call('end');\n        }\n      }\n      try {\n        _addr2coord(addr, geocoder, callback)\n      } catch (e) {\n        callback(e);\n      }\n    })\n  } else {\n    __set();\n    __nodes();\n  }\n  if(!isSized) {\n    daum.maps.event.addListener(map, 'zoom_changed', function() {\n      const radius = size.range[0] * Math.pow(2, map.getLevel());\n      circles.forEach(function(circle) {\n        circle.setRadius(radius);\n      })\n    });\n  }\n}\n\nexport default _mark;","import {dispatch} from 'd3';\nimport Default from '../core';\nimport {attrFunc, genFunc, rebindOnMethod} from '../../modules/util';\nimport _munge from './_munge';\nimport _map from './_map';\nimport _domain from './_domain';\nimport _mark from './_mark';\n\nconst latMeasure = {field: '__--jelly-lat--__'};\nconst lngMeasure = {field: '__--jelly-lng--__'};\n\nconst size = {range: [0.5, 4], scale: 'linear', reverse: false};\nconst conditions = ['normal', 'point'];\nconst _attrs = {\n  addr: false,\n  mapBaseType: 'ROADMAP',// ROADMAP SKYVIEW HYBRID\n  needCanvas: false,\n  overlayMapType: null, // OVERLAY TERRAIN TRAFFIC BICYCLE BICYCLE_HYBRID USE_DISTRICT\n  size: size,\n};\n\n/**\n * @class MarkerMap\n * @augments Default\n */\nclass MarkerMap extends Default {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.__execs__.dispatch = dispatch('loading', 'end');\n    rebindOnMethod(this, this.__execs__.dispatch);\n    this.process('munge', _munge, {isPre: true})\n      .process('domain', _domain, {isPre: true})\n      .process('map', _map)\n      .process('mark', _mark);\n  }\n  isSized() {\n    return this.condition() === conditions[0];\n  }\n}\n\n/**\n * If addr is specified sets the addr setting and returns the MarkerMap instance itself. If addr is true, use addresses to find coordinates from data. The field possessing address type data, should be the first arguments of .measures method. If is not specified, returns the current addr setting.\n * @function\n * @example\n * markerMap.addr(true)\n * @param {boolean} [addr=false]\n * @return {addr|MarkerMap}\n */\nMarkerMap.prototype.addr = attrFunc('addr');\nMarkerMap.prototype.mapBaseType = attrFunc('mapBaseType');\nMarkerMap.prototype.overlayMapType = attrFunc('overlayMapType');\n\nexport default genFunc(MarkerMap);\nexport {conditions, latMeasure, lngMeasure};\n","function _axis() {\n  const scale = this.__execs__.scale;\n  const {yBar, yLine} = this.__execs__.field;\n  const xAt = this.axisX();\n  const yAtLeft = this.axis().find(a => a.target === 'y' && a.orient === 'left');\n  const yAtRight = this.axis().find(a => a.target === 'y' && a.orient === 'right');\n  const fieldObj = this.__execs__.field;\n  \n  let _axisScaleX = (axisToggle) => {\n    axisToggle.field = fieldObj.x.field();\n    let curAxis = this.axisDefault(scale.x, axisToggle);\n    if (axisToggle.orient === 'bottom') curAxis.y(scale.yBar.range()[0]);\n    return curAxis;\n  }\n  let _axisScaleY =  (yScale, axisToggle) => {\n    let curAxis = this.axisDefault(yScale, axisToggle);\n    if (axisToggle.orient === 'right') curAxis.x(scale.x.range()[1]);\n    return curAxis;\n  }\n  if (xAt) {\n    _axisScaleX(xAt);\n  }\n  if (yAtLeft) {\n    yAtLeft.field = yBar.field();\n    yAtRight.field = yLine.field();\n    _axisScaleY(scale.yBar, yAtLeft);\n    _axisScaleY(scale.yLine, yAtRight);\n  }\n  \n  this.renderAxis();\n}\n\nexport default _axis;","import {conditions} from './index';\nimport {ConditionException} from '../../modules/error';\nimport dimensionField from '../../modules/dimensionField';\nimport measureField from '../../modules/measureField';\n\nfunction _munge() { \n  let conditionFunc = function (dimensions, measures) {\n    const field = this.__execs__.field;\n    if (dimensions.length === 1 && measures.length === 2) {\n      field.x = dimensionField(dimensions[0]);\n      field.yBar = measureField(measures[0]);\n      field.yLine = measureField(measures[1]);\n      field.region = dimensionField(this.mixedDimension());\n      return conditions[0];\n    } else throw new ConditionException();\n  };\n  this.condition(conditionFunc);\n  //TODO: yBar munged, yLine munged;\n  /*\n  this.__execs__.munged = this.aggregate(this.facet() && !this.stacked());\n    }\n    if (!this.isNested()) this.__execs__.munged = [this.__execs__.munged[0].parent];\n\n  aggregate (reverse = false, rollup = true, preFormat = false, useHierarchy = true, sum = true, dimensions, measures) {\n  */\n  \n  this.__execs__.munged = this.aggregate();\n}\n\nexport default _munge;","import {domainY as domainYBar} from '../bar';\nimport {domainY as domainYLine} from '../line';\nimport {scaleBand, scaleLinear} from 'd3';\n\nfunction _domain(keep) {\n  const munged = this.__execs__.munged;\n  const {x, yBar, yLine} = this.__execs__.field;\n  const yAt = this.axisY();\n  \n  if (yAt && yAt.orient === 'left') { //add the right axis directly\n    const yAtRight = Object.assign({}, yAt);\n    yAtRight.orient = 'right';\n    this.axis(yAtRight);\n  }\n  const xDomain = x.level(0).munged(munged).domain(this.sortByValue());\n  const scale = this.scale();\n  scale.x = scaleBand().padding(this.padding()).domain(xDomain);\n  scale.yBar = scaleLinear();\n  scale.yLine = scaleLinear();\n\n  this.setCustomDomain('yBar', domainYBar(yBar, munged));\n  this.setCustomDomain('yLine', domainYLine(yLine, munged));\n  scale.color = this.updateColorScale(this.measures().map(d => d.field), keep);\n}\n\n\n\nexport default _domain;","function _range() {\n  const { x, yBar, yLine} = this.scale();\n  const xAt = this.axisX();\n  const yAtLeft = this.axis().find(a => a.target === 'y' && a.orient === 'left');\n  const yAtRight = this.axis().find(a => a.target === 'y' && a.orient === 'right');\n  \n  if (yAtLeft) {\n    this.thickness(yAtLeft, yBar, false, false);\n    this.thickness(yAtRight, yLine, false, false);\n  }\n  if (xAt) {\n    this.thickness(xAt, x, true, true);\n  }\n  const {width, height} = this.innerSize();\n  yBar.range([height, 0]);\n  yLine.range([height, 0]);\n  x.range([0, width]);\n  return this;\n}\n\nexport default _range;","/**\n * thickness -> margin에 반영 하기\n */\nfunction _region() {\n  const scale = this.__execs__.scale;\n  \n  this.renderRegion(d => d.x = d.y = 0, scale.color.domain().map(d => {return {key: d}})); \n}\n\nexport default _region;","function _legend() { \n  let legendToggle = this.legend();\n  if (!legendToggle) return;\n\n  this.renderLegend();\n}\n\nexport default _legend;","import {select} from 'd3';\nimport bar from '../bar/';\nimport line from '../line/';\n\nfunction _facet () {\n  let parent = this;\n  let data = this.data();\n  let field = this.__execs__.field;\n  let color = this.color();\n  let innerSize = this.innerSize();\n  let width = innerSize.width, height = innerSize.height;\n  let padding = this.padding();\n  let dimensions =  this.dimensions();\n  let barMeasures = [field.yBar.toObject()];\n  let barSettings =   ['axisTitles', 'padding', 'font', 'label', 'grid']\n    .map(d => { return {key: d, value:this[d]()};});\n  let lineMeasures = [field.yLine.toObject()];\n  let lineSettings = ['axisTitles', 'curve', 'point', 'pointRatio', 'regionPadding', 'size', 'grid', 'font', 'label']\n    .map(d => { return {key: d, value:parent[d]()};});\n  let _smallLine = function() {\n    let smallLine = line()\n        .container(this)\n        .data(data)\n        .dimensions(dimensions).measures(lineMeasures)\n        .width(width).height(height)\n        .legend(false)\n        .tooltip(false)\n        .padding(padding)\n        .parent(parent) \n        .zeroOffset(true) \n        .color(color[1])\n        .scaleBandMode(true);\n    lineSettings.forEach(d => smallLine[d.key](d.value));\n    smallLine.render();\n  }\n  let _smallbar = function() {\n    let smallBar = bar()\n        .container(this)\n        .data(data)\n        .dimensions(dimensions).measures(barMeasures)\n        .width(width).height(height)\n        .padding(padding)        \n        .legend(false)\n        .tooltip(false)\n        .zeroOffset(true) \n        .parent(parent)\n        .color(color[0]);\n    barSettings.forEach(d => {smallBar[d.key](d.value)});\n    smallBar.render();\n  }\n  \n  this.regions()\n    .each(function(_,i) {\n      if (i===0) select(this).each(_smallbar);\n      else select(this).each(_smallLine)\n    })\n}\n\nexport default _facet;","function _tooltip() {\n  if(!this.tooltip()) return;\n  const field = this.__execs__.field;\n  let key = (d) => {\n    return {name: 'key', value:d.data.key};\n  }\n  let value = (d, text) => {\n    let name = d.anchor ? field.yLine.field() : field.yBar.field();\n    return {name, value:text};\n  }\n  this.renderTooltip({value, key});\n}\n\nexport default _tooltip;","import paddingMixin from '../paddingMixin';\nimport seriesMixin from '../seriesMixin';\nimport sortMixin from '../sortMixin/';\nimport RectLinear from '../rectLinear/';\nimport {mixedMeasure} from '../../modules/measureField';\nimport {genFunc, mix} from '../../modules/util';\nimport _axis from './_axis';\nimport _munge from './_munge';\nimport _domain from './_domain';\nimport _range from './_range';\nimport _region from './_region';\nimport _legend from './_legend';\nimport _facet from './_facet';\nimport _tooltip from './_tooltip';\n\nconst size = {range: [2, 2], scale: 'linear', reverse: false};\nconst conditions = ['normal'];\nconst _attrs = {\n  padding: 0.05,\n  point: false,\n  pointRatio : 3,\n  regionPadding: 0.1,\n  size: size,\n};\n\n/**\n * renders a combo chart, having both a bar and a line chart.\n * @class Combo\n * @augments Core\n * @augments RectLinear \n * @augments PaddingMixin\n * @augments SortMixin\n */\nclass Combo extends mix(RectLinear).with(paddingMixin, seriesMixin, sortMixin) {\n  constructor() {\n    super();\n    this.setAttrs(_attrs);\n    this.process('munge', _munge, {isPre:true})\n      .process('domain', _domain, {isPre:true})\n      .process('range', _range, {isPre:true})\n      .process('region', _region)\n      .process('facet', _facet)\n      .process('axis', _axis)\n      .process('legend', _legend)\n      .process('tooltip', _tooltip)\n  }\n  /**\n   * @override\n   */\n  measureName() {\n    let measures = this.measures();\n    let yField;\n    if (this.condition() === conditions[2]) yField = mixedMeasure.field; \n    else if (this.aggregated() && measures[0].field === mixedMeasure.field) yField = measures[0].field;\n    else yField = measures[0].field + '-' + measures[0].op;\n    return yField;\n  }\n\n  isCount() {\n    return this.condition() === conditions[1];\n  }\n}\n\nexport default genFunc(Combo);\nexport {conditions};\n","import bar from './bar/';\nimport line from './line/';\nimport scatter from './scatter/';\nimport xyHeatmap from './xy-heatmap/';\nimport treemap from './treemap/';\nimport parCoords from './par-coords/';\nimport pie from './pie/';\nimport markerMap from './marker-map/';\nimport combo from './combo/';\n/**\n * @namespace jelly\n * @type {object}\n */\nconst _layout = {\n  /**\n   * Generator returns a {@link Bar} instance\n   * @type {function} \n   * @see {@link Bar} \n   * @memberOf jelly\n   */\n  bar,\n  /**\n   * Generator returns a {@link Line} instance\n   * @type {function} \n   * @see {@link Line} \n   * @memberOf jelly\n   */\n  line,\n  /**\n   * Generator returns a {@link Scatter} instance\n   * @type {function} \n   * @see {@link Scatter} \n   * @memberOf jelly\n   */\n  scatter, \n  /**\n   * Generator returns a {@link XYHeatmap} instance\n   * @type {function} \n   * @see {@link XYHeatmap} \n   * @memberOf jelly\n   */\n  xyHeatmap,\n  /**\n   * Generator returns a {@link Treemap} instance\n   * @type {function} \n   * @see {@link Treemap} \n   * @memberOf jelly\n   */ \n  treemap,\n  /**\n   * Generator returns a {@link ParCoords} instance\n   * @type {function} \n   * @see {@link ParCoords} \n   * @memberOf jelly\n   */ \n  parCoords,\n  /**\n   * Generator returns a {@link Pie} instance\n   * @type {function} \n   * @see {@link Pie} \n   * @memberOf jelly\n   */ \n  pie, \n  /**\n   * Generator returns a {@link MarkerMap} instance\n   * @type {function} \n   * @see {@link MarkerMap} \n   * @memberOf jelly\n   */\n  markerMap, \n  /**\n   * Generator returns a {@link Combo} instance\n   * @type {function} \n   * @see {@link Combo} \n   * @memberOf jelly\n   */\n  combo\n};\n_layout.type = function(type) {\n  if (_layout.hasOwnProperty(type))  return _layout[type];\n  throw new Error(`Undefined type: ${type} is not available`);\n}\nexport default _layout;\n"],"names":["classPrefix","magicTableColorScheme","labelFormat","integerFormat","format","plusIntegerFormat","floatFormat","plusFloatFormat","value","plus","isNaN","Number","isInteger","className","name","selectorMode","prefix","names","split","map","d","join","rebindOnMethod","instance","listeners","on","oldOn","apply","arguments","e","safari","test","window","HTMLElement","p","toString","pushNotification","attrFunc","attr","length","__attrs__","setAttrs","self","attrs","JSON","parse","stringify","hasOwnProperty","setMethodsFromAttrs","classFunc","prototype","setMethodFromDefaultObj","defaultSetting","k","uniqueId","_id","select","selectAll","empty","getUniqueId","num","zeroPoint","domain","mix","parent","MixinBuilder","mixins","reduce","cur","mixin","genFunc","ClassFunc","func","__class__","timeMillisecond","timeSecond","timeMinute","timeHour","timeDay","timeWeek","timeSunday","timeMonday","timeTuesday","timeWednesday","timeThursday","timeFriday","timeSaturday","timeMonth","timeYear","NotAvailableSelectorError","selector","message","ConditionException","ZeroDenominatorException","summarize","sum","mean","variance","min","max","median","extent","values","leaves","count","dateComparator","order","field","a","b","getTime","comparator","orderList","textToNum","accessor","reg","__compareNumbers","__compareStrings","onlyText","numA","match","numB","localeCompare","__compareByList","findFunc","t","Date","ai","findIndex","bi","compareFunc","leastSquare","target","xField","yField","lengthRev","xBar","yBar","ssXX","Math","pow","ssYY","ssXY","slope","intercept","rSquare","stack","measures","normalized","Array","isArray","forEach","i","arr","m","valueName","data","lastVal","thisMax","continousScale","type","isTime","scale","scaleTime","scalePow","scaleLog","scaleLinear","_scaleType","_field","dimension","dim","nested","interval","intr","key","f","sortKeys","dateKey","result","reverse","preFormat","dimensions","currentLevel","sort","merge","aggregate","rollup","useHierarchy","nest","call","entries","hierarchy","children","op","root","Field","__execs__","setInit","source","attrNames","n","at","axis","mixed","concatFields","tickFormat","tickFormatSub","formatSub","customDomain","countMeasureTitle","countMeasure","mixedMeasure","MeasureField","measure","padding","stacked","allowMono","level","munged","curLevel","_value","push","offset","dist","abs","fieldName","aggregated","def","measureField","aggregateMixed","results","allowThreshold","autoResize","that","allowResize","lastWidth","canvas","rect","container","node","getBoundingClientRect","width","transition","duration","delay","render","autoResizeSkip","addEventListener","__execs__autoResize","removeEventListener","color","colorDomain","condition","conditionFunc","mute","nodeOrRegion","intensity","muteIntensity","demute","demuteLegend","excemptionFilter","legend","filter","cond","demuteNodes","nodes","filterNodes","classed","conditionForMute","size","regions","isSeries","seriesName","nodeName","exceptionFilter","filterRegions","dimensionMax","setFormat","timeFormat","_dimensionType","Object","assign","v","callback","noFacet","multiTooltip","tooltip","hide","innerSize","needArray","left","right","height","top","bottom","horizontalThickness","verticalThickness","orient","align","thickness","limitKeys","limitNumber","_limit","maxLevel","slice","nestedLevel","limitRows","append","prop","margin","curMargin","measureName","suffix","undefined","_type","mixedDimension","muteLegend","ismute","muteRegions","splited","trim","zeroMargin","zeroOffset","gen","option","allow","isPre","process","__process__","existing","splice","find","regionName","reset","parentNode","remove","bindOn","dispatch","run","keep","skip","indexOf","pre","post","needCanvas","renderFrame","renderCanvas","selectDispatch","muteToLegend","demuteToLegend","isFacet","stream","background","appendClipPath","selection","pos","defs","childNodes","datum","appendStringContainer","markLocal","mark","tagName","set","x","y","svg","style","trans","setSvg","appendHidden","hidden","defaultFont","areaClipPath","labelClipPath","aligns","orients","highlightDuration","_attrs","Legend","_legend","isHorizontal","_style","font","_align","area","areaWidth","getBBox","alignPos","round","_arrow","rowNum","labelHeight","labelPadding","rectW","arrowColor","schemeCategory10","rectColor","curRowNum","arrow","arrowEnter","enter","symbol","symbolTriangle","translate","_clipPath","maxLabelW","clipPath","exit","_overflow","curX","curY","each","w","_render","labelHeightHalf","label","labelEnter","text","_filter","keyTime","update","renderLegend","legendToggle","fieldObj","isInterval","offsetThickness","axisX","colorScale","legendObj","muteFromLegend","demuteFromLegend","legendSel","renderRegion","posFunc","dataFunc","region","regionClass","_regionInit","xy","_region","regionEnter","gradientPrefix","Spectrum","spectrum","_spectrum","_gradientAlternative","colorRange","chipNum","chipW","fill","range","chips","gradientWidth","gradientHeight","rangeRound","gradientId","triangleSymbol","gradient","stop","titleText","title","show","renderSpectrum","spectrumSel","arrowWidth","backgroundColor","whiteColor","greyColor","IS_IE9","navigator","userAgent","Tooltip","init","valueFormat","_tooltip","_styleOpacity","_event","points","fromMulti","_position","absLocal","local","offsetFunc","absolute","initX","initY","svgRect","frameRect","__pos","__absPos","fontKey","showFromPoint","point","keyFunc","valueFunc","get","keys","showDiff","_","tooltipH","dx","dy","_val","renderTooltip","setting","tooltipObj","resetTooltip","adjustDomain","from","to","nice","setCustomDomain","fromScale","_defaultDomain","isMixed","showTooltip","styleFont","sortByValue","fillUndefined","colors","lastColorIndex","c","updateColorScale","keepLast","lastScale","originColors","newRange","o","scaleOrdinal","_defaultRange","lastDomain","lastRange","exist","lastIndex","l","continousColorScheme","categoryColorScheme","Core","demuteRegions","hideTooltip","muteNodes","verticalAxisThickness","horizontalAxisThickness","tickFormatForOrdinal","targets","SIPrefixFormat","commaFormat","titleSize","domainColor","titleColor","gridColor","zerocolor","defaultTickRotate","smallModeThreshold","Axis","rotated","_axis","_generator","axisTop","axisRight","axisLeft","axisBottom","_grid","zoomed","grid","gridSize","sign","gridLine","ticks","_tickNumber","gridLineEnter","tickStepSize","bandwidth","step","_generateId","sel","insert","rectPos","scaleDist","showTitle","_hidden","showTicks","isSmall","_rotate","tickPadding","tickRotate","isPositive","_rotateFunc","_selection","_tickRotate","rotate","autoRotate","tick","totalW","isOver","tickFormatForContinious","_format","autoTickFormat","invert","tickNumber","tNumber","_preStyle","tickSize","intervalType","_renderSubFormat","sf","updateFunc","tickFormats","tickData","zip","subTick","showDomain","_title","_textTransform","titleOrient","_transform","halfPos","titleSel","titleSelEnter","_zero","gridLineTransforms","facet","includes","setVal","val","defaultThickness","adding","_axisExec","_set","axisDefault","axisSetting","axisTitle","axisTitles","shape","curAxis","targetAndField","Error","titles","renderAxis","axisObj","_appendAxis","targetNum","cName","axisSel","axisG","isOrdinal","RectLinear","noAxisOffset","axisToggle","axisY","axisFacet","useRegion","xAt","yAt","Facet","paddingMixin","PaddingMixin","Base","regionPadding","orders","sortMixin","SortMixin","stackMixin","StackMixin","distDomain","_lastDomain","limitViewInterval","isKeep","viewInterval","intervalUnit","unit","intervalMultiple","multiple","timeInterval","concat","getDistPerPixel","streamPanning","renderFunc","drag","markProcCall","tooltipProcCall","isContinous","renderFuncDefault","curDomain","distPerPixel","defaultDomain","event","updateCondition","accumDx","absAccumDx","initIndex","floor","tempPosForOrdinalScale","curIndex","streamMixin","StreamMixin","streamPanningDispatch","isVertical","isInit","line","_annotation","annotation","isShowDiff","isNested","g","anno","annoEnter","diff","neighbor","showLabel","_axisScaleX","targetField","targetScale","_axisScaleY","_domain","isNestedAndSortByValue","yDomain","xDomain","regionDomain","scaleBand","mono","domainY","_facet","settings","hasX","hasY","_smallbar","smallBar","bar","_mark","vertical","hasZeroPoint","diffColor","__local","monoColor","_fill","tFormat","h","yValue","upward","x0","__barInit","__labelInit","__bar","__label","barEnter","last","strokeWidth","halfStrokeWidth","neuFill","pathLocal","r","nds","nd","neighborParent","path","interrupt","DimensionField","multipleDomain","needMultipleDomain","duplicateDomain","setDomain","residual","_keys","duplicate","newDomain","domainSet","dimensionField","conditions","_munge","_panning","_range","targetXField","__regionLocal","isStacked","valueDiff","yDiff","toggle","Bar","_padding","with","incStroke","incFill","decStroke","decFill","brushGen","brushDispatch","brushMove","group","brush","move","brushMixin","BrushMixin","fitLineMixin","FitLineMixin","fitLine","curves","seriesMixin","SeriesMixin","curve","pointRatio","pointNum","zoom","types","zoomExtent","isDual","rangeDist","yRange","yRangeDist","ceil","zoomGen","scaleObj","scaleX","scaleY","transform","newScaleX","rescaleX","newScaleY","zoomDispatch","zoomTransform","zoomMixin","ZoomMixin","isBrushZoom","shapeMixin","ShapeMixin","_brush","brushX","brushG","_brushZoom","ratio","bigHeight","smallHeight","lines","brushScale","brushGroup","zoomScale","zoomGroup","sourceEvent","zoomIdentity","individualScale","isIndividualScale","showPoint","isArea","shapes","curveLinear","curveStep","curveCatmullRom","scaleBandMode","xKey","xValue","yValueFunc","s","lineInitGen","lineGenFunc","ys","areaInitGen","areaGenFunc","y0","y1","anchor","__upward","nextResult","__seriesInit","__series","thisSelect","__pointInit","__point","__appendSeries","series","___append","__appendPoints","pointEnter","valuesZipped","individualDomain","isNumberDomain","scalePoint","tempAt","d0","d1","center","ats","stroke","_meanLine","meanLineG","meanLine","meanLineVal","ms","meanLineEnter","multiTooltipG","smallLines","_smallLine","smallLine","osm","sm","showMultiTooltip","fitLineColor","fitLineVal","fitLineG","leastSquares","xValues","yValues","fitLineEnter","pointOriginColor","baseColor","MultiTooltip","_multiTooltip","bisectDomain","bisector","lastTick","_tick","start","clientRectLeft","d2","dd","_hide","circle","overlay","_show","showTrans","filtered","baseline","keyFormat","_sortByValue","ascending","descending","_single","_multi","multiTooltipObj","multiTooltipDispatch","normal","scaleExtent","translateExtent","_zoom","Line","_fitLine","ls","lsFunc","mt","fieldY","rDomain","isColor","isSized","radius","_small","small","scatter","rValue","colorValue","xDomainOrigin","yDomainOrigin","idleTimeout","setTimeout","Scatter","legion","textValue","XYHeatmap","leaf","packGen","pack","treemapGen","treemap","paddingTop","stemColor","clipIdPrefix","nodeType","nodeAttr","nameAttr","x1","__clipInit","__clip","__nodeInit","__node","__nameInit","__name","__appendNodes","descendants","nodeEnter","isCount","Treemap","Default","_series","yMeasureName","xMeasureName","ordinalDomainFlatten","parCoords","scaleName","matrix","yScaleName","xScaleName","isParcoords","regionWidth","innserSize","lineGenInit","lineGen","_parCoords","yScale","showX","showY","_parcoords","brushW","brushY","_matrix","brushCell","xName","yName","ParCoords","pieGen","pie","padAngle","sortValues","arcGen","arc","innerRadius","outerRadius","startAngle","endAngle","tweenArc","interpolate","sizeMean","mid","sin","cos","attrTween","Pie","addr","lat","latMeasure","lng","lngMeasure","_map","frame","options","daum","maps","LatLng","Map","setMapTypeId","MapTypeId","mapBaseType","overlayMapType","addOverlayMapTypeId","zoomControl","ZoomControl","addControl","ControlPosition","RIGHT","setZoomable","sqrt","_addr2coord","geocoder","addr2coord","status","services","Status","OK","_rScaleRange","magVal","isAddr","Geocoder","circles","__set","latlng","bounds","LatLngBounds","extend","setBounds","getLevel","__nodes","earthR","latLng","Circle","setMap","keyVal","tooltipText","InfoWindow","addListener","open","close","CustomOverlay","err","coord","setRadius","MarkerMap","yLine","yAtLeft","yAtRight","domainYBar","domainYLine","barMeasures","toObject","barSettings","lineMeasures","lineSettings","Combo","_layout"],"mappings":"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"}